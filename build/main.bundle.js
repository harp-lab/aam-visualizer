!function(e){function t(t){for(var a,o,l=t[0],s=t[1],i=t[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);f.length;)f.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=s;c.push([144,1]),n()}({140:function(e,t,n){var a=n(141);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(143)(a,r);a.locals&&(e.exports=a.locals)},141:function(e,t,n){(t=e.exports=n(84)(!1)).i(n(142),""),t.push([e.i,"body{margin:0}#app{height:100vh}.CodeMirror{height:100%}.CodeMirror .mark{color:#3f51b5;cursor:pointer;font-size:0.6rem;line-height:inherit;padding-right:2px;vertical-align:top}.CodeMirror .mark:hover{color:#7986cb}.CodeMirror .selected{background-color:#fff59d}\n",""])},144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),l=n(6),s=n(29);const i="SET_USER",u="SET_TITLE",d="ADD_PROJECT",f="SET_PROJECT_DATA",p="SET_METADATA",m="SET_GRAPH_METADATA",h="ADD_PANEL",E="SET_PANEL",y="SET_PANELS",g="REFRESH_PANELS",v="DEL_PROJECT",b="DEL_PROJECTS",j="SEL_PROJECT",O={snackbars:[],dialogs:{},loading:!1};var k=function(e=O,t){switch(t.type){case"QUEUE_SNACKBAR":{const{text:n}=t.payload,{snackbars:a}=e;return{...e,snackbars:[...a,n]}}case"DEQUEUE_SNACKBAR":{const{snackbars:t}=e;t.shift();return{...e,snackbars:[...t]}}case"SET_LOADING":{const{loading:n}=t.payload;return{...e,loading:n}}case"SET_DIALOG":{const{dialogId:n,data:a}=t.payload,{dialogs:r}=e;return{...e,dialogs:{...r,[n]:a}}}default:return e}};const w="LOGIN_VIEW",S="LIST_VIEW",C="PROJECT_VIEW",I="empty",x="edit",T="process",$="done",P="error",R="configs",M="envs",A="konts";function D(e={},t){switch(t.type){case m:{const{graphId:n,data:a}=t.payload,r=e[n];return{...e,[n]:{...r,...a}}}default:return e}}function _(e,t){return(n,a)=>{const r=void 0===n;return t(a)||r?e(n,a):n}}function N(e={},t){switch(t.type){case h:{const{panelId:n,label:a}=t.payload;return{...e,[n]:{label:a,saved:!1,hidden:!0,selected:!1}}}case E:{const{panelId:n,data:a}=t.payload,r=e[n];return{...e,[n]:{...r,...a}}}case y:{const{data:e}=t.payload;return{...e}}case g:{const{func:n}=t.payload,a={};for(const[t,r]of Object.entries(e)){const e=n(t,r);a[t]={...r,...e}}return a}default:return e}}const U=Object(s.c)({configs:_(N,e=>!!e.payload&&e.payload.type===R),envs:_(N,e=>!!e.payload&&e.payload.type===M),konts:_(N,e=>!!e.payload&&e.payload.type===A)});var L=function(e={},t){switch(t.type){case p:{const{data:n}=t.payload;return{...e,...n}}default:{const{graphs:n,panels:a}=e;return{...e,graphs:D(n,t),panels:U(a,t)}}}};const F={status:"empty",code:"",metadata:L(void 0,{type:"INIT"})};var z=function(e=F,t){switch(t.type){case f:{const{data:n}=t.payload;return{...e,...n}}default:{const{metadata:n}=e;return{...e,metadata:L(n,t)}}}};var G=function(e={},t){switch(t.type){case d:case f:default:if(t.payload&&t.payload.projectId){const{projectId:n}=t.payload,a=e[n];return{...e,[n]:z(a,t)}}return e;case v:{const{projectId:n}=t.payload,{[n]:a,...r}=e;return{...r}}case b:return{}}};var B=function(e={},t){switch(t.type){case i:{const{userId:n}=t.payload;return{...e,userId:n}}case u:{const{title:n}=t.payload;return{...e,title:n}}case j:{const{projectId:n}=t.payload;return{...e,selectedProjectId:n}}default:{const{notifications:n,projects:a}=e;return{...e,notifications:k(n,t),projects:G(a,t)}}}},J=n(87);const H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d;var W=Object(s.e)(B,H(Object(s.a)(J.a)));const V=e=>({type:i,payload:{userId:e}});const q=e=>({type:u,payload:{title:e}});function K(e){return e}function Q(e){return K(e).userId}function Y(e){const t=Q(e),n=Z(e);return t?n?C:S:w}function X(e){return K(e).title}function Z(e){return K(e).selectedProjectId}function ee(e){return e.projects}function te(e){return Object.keys(ee(e))}function ne(e,t){return t||(t=Z(e)),ee(e)[t]}function ae(e,t){const{items:n}=ne(e,t);return n}function re(e){return ne(e).metadata}function ce(e){return ae(e).graphs}function oe(e){return re(e).mainGraphId||"funcs"}function le(e){const t=de(e,oe(e));let n="states";if(t.length>0){const a=t[0],r=ae(e),{form:c}=r.funcs[a];["halt","not found","non-func","unknown"].includes(c)||(n=a)}return n}function se(e){const t=oe(e);return re(e).focusedGraph||t}function ie(e,t){return ce(e)[t]}function ue(e,t){return function(e){return re(e).graphs}(e)[t]||{}}function de(e,t){return ue(e,t).selectedNodes||[]}function fe(e,t){const n=ae(e);switch(t){case"funcs":return n.funcs;case"states":default:return n.configs}}function pe(e){return[oe(e),le(e)].flatMap(t=>{return he(de(e,t),fe(e,t))})}function me(e){return[oe(e),le(e)].flatMap(t=>{return he(function(e,t){return ue(e,t).hoveredNodes||[]}(e,t),fe(e,t))})}function he(e,t){const n=new Set;for(const a of e){const{astLink:e,expr:r}=t[a];let c=[];e?c=e:r&&(c=[r]),c.forEach(e=>n.add(e))}return[...n]}function Ee(e){return e.notifications}function ye(e){const{snackbars:t}=Ee(e);return t[0]}function ge(e){return function(e,t){const{dialogs:n}=Ee(e);return n[t]}(e,"rename")}function ve(e){return re(e).panels}function be(e,t){const n=Z(W.getState());return{type:m,payload:{projectId:n,graphId:e,data:t}}}function je(e,t){return n=>{const a=de(W.getState(),e),r=new Set([...a,...t]);n(be(e,{selectedNodes:[...r]})),n(Ue())}}function Oe(e,t){return be(e,{hoveredNodes:t})}function ke(e,t){return n=>{n(be(e,{selectedEdges:t}));const a=W.getState(),{graph:r}=ie(a,e),c=oe(a),o=new Set;for(const e of t){const[t,n]=e.split("-"),a=r[t][n],{calls:c}=a;if(c)for(const e of c)o.add(e)}n(function(e,t){return be(e,{suggestedNodes:t})}(c,[...o]))}}const we=e=>({type:"QUEUE_SNACKBAR",payload:{text:e}}),Se=()=>({type:"DEQUEUE_SNACKBAR"}),Ce=e=>({type:"SET_DIALOG",payload:{dialogId:"rename",data:e}});function Ie(e,t,n){const a=Z(W.getState());return{type:E,payload:{projectId:a,type:e,panelId:t,data:n}}}function xe(e,t,n){return{type:y,payload:{projectId:e,type:t,data:n}}}const Te=(e,t)=>Ie(e,t,{hidden:!0}),$e=(e,t)=>Ie(e,t,{hidden:!1}),Pe=(e,t)=>Ie(e,t,{saved:!0}),Re=(e,t)=>Ie(e,t,{saved:!1}),Me=(e,t)=>Ie(e,t,{selected:!0}),Ae=(e,t)=>Ie(e,t,{selected:!1}),De=e=>$e(A,e),_e=e=>$e(M,e);function Ne(e,t){const n=Z(W.getState());return{type:g,payload:{projectId:n,type:e,func:t}}}function Ue(){return e=>{e(function(){const e=W.getState(),t=le(e),n=de(e,t);return Ne(R,(e,t)=>n.includes(e)?{selected:!0,hidden:!1}:{hidden:!0})}()),e(Le()),e(Fe())}}function Le(){const e=W.getState(),t=ae(e),{configs:n,envs:a}=ve(e),r=[];for(const[e,a]of Object.entries(n))if(!a.hidden&&a.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e].env;n&&r.push(n)}}return Ne(M,(e,t)=>r.includes(e)?{hidden:!1}:{hidden:!0})}function Fe(){const e=W.getState(),t=ae(e),{configs:n,konts:a}=ve(e),r=[];for(const[e,a]of Object.entries(n))if(!a.hidden&&a.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e].kont;r.push(n)}}return Ne(A,(e,t)=>r.includes(e)?{hidden:!1}:{hidden:!0})}function ze(e){return t=>{const n=ae(W.getState(),e);n.configs&&t(function(e){return t=>{const n=ae(W.getState(),e),a={};for(const[e,t]of Object.entries(n.configs)){const{form:r,states:c}=t;let o;if(c){const e=c[0],t=n.states[e];switch(t.form){case"halt":o=`[ ${t.results.map(e=>{const{type:t,name:a,valString:r}=n.vals[e];let c;switch(t){case"closure":c=a;break;case"bool":c=r}return c}).join(", ")} ]`;break;default:o=t.exprString}}const l=`${e}: ${r} - ${o}`;a[e]=Ge(l)}t(xe(e,R,a))}}(e)),n.envs&&t(function(e){return t=>{const n=ae(W.getState(),e),a={};for(const[e,t]of Object.entries(n.envs)){const n=`${e}: [ ${t.map(e=>e.varString).join(", ")} ]`;a[e]=Ge(n)}t(xe(e,M,a))}}(e)),n.konts&&t(function(e){return t=>{const n=ae(W.getState(),e),a={};for(const[e,t]of Object.entries(n.konts)){const{descs:t}=n.konts[e];let r=`${e}: `;t.length>1?r+=`[ ${t[0]}, ... +${t.length-1} ]`:r+=`[ ${t[0]} ]`,a[e]=Ge(r)}t(xe(e,A,a))}}(e))}}function Ge(e){return{label:e,saved:!1,hidden:!0,selected:!1}}const Be=e=>({type:d,payload:{projectId:e}}),Je=(e,t)=>({type:f,payload:{projectId:e,data:t}}),He=e=>({type:v,payload:{projectId:e}}),We=()=>({type:b}),Ve=e=>({type:j,payload:{projectId:e}}),qe=(e,t)=>({type:p,payload:{projectId:e,data:t}});function Ke(e,t){const n=Q(W.getState());return fetch(`/api/${n}/${e}`,{method:t})}function Qe(){return async function(e){const t=await Ke("all","GET");switch(t.status){case 200:{const n=await t.json();let a=!1;for(const[t,r]of Object.entries(n)){const{status:n,name:c,analysis:o}=r;e(Je(t,{status:n,name:c,analysis:o})),n===T&&(a=!0)}return a}default:return!0}}}function Ye(){return async function(e){const t=await Ke("create","GET"),n=(await t.json()).id;return e(Be(n)),e(Ve(void 0)),n}}function Xe(e){return async function(t){let n=W.getState(),a=ne(n,e);a.status!==I&&(await t(Ze(e)),a=ne(n=W.getState(),e));const r=await t(Ye()),{code:c,analysis:o}=a;t(Je(r,{code:c,analysis:o})),t(Ve(r))}}function Ze(e){return async function(t){const n=await Ke(`projects/${e}/code`,"GET"),{code:a}=await n.json();t(Je(e,{code:a}))}}function et(e,t){return n=>{const a=W.getState(),{userId:r,status:c}=ne(a,e);switch(c){case I:case x:{let a=x;return""==t&&(a=I),n(Je(e,{status:a,code:t})),fetch(`/api/${r}/projects/${e}/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})}}}}function tt(e){return async function(t){const n=await Ke(`projects/${e}/data`,"GET");switch(n.status){case 200:{const a=await n.json();return t(Je(e,a)),n.status}case 204:return n.status;case 412:return t(we("Project data request rejected")),n.status}}}function nt(e){return async function(t){switch(await t(tt(e))){case 200:{const t=ne(W.getState(),e),n=JSON.stringify(t,null,2),a=new Blob([n],{type:"application/json"}),r=URL.createObjectURL(a),c=`aam-vis-${e}.json`,o=document.createElement("a");Object.assign(o,{href:r,download:c}),document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(r);break}case 204:t(we("Project still processing"))}}}var at=n(225),rt=n(207),ct=n(46),ot=n(196),lt=n(226),st=n(227);var it=function(){const e=Object(l.c)(),[t,n]=Object(a.useState)("guest"),c=!/^\w+$/.test(t);return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(st.a,{label:"username",value:t,onChange:e=>n(e.target.value),error:c,helperText:"You can use letters, numbers, & underscores"}),r.a.createElement(ot.a,{onClick:()=>e(function(e){return t=>{t(V(e))}}(t)),disabled:c},"login"))},ut=n(195),dt=n(146),ft=n(209),pt=n(210),mt=n(147),ht=n(92),Et=n.n(ht),yt=n(90),gt=n.n(yt),vt=n(91),bt=n.n(vt),jt=n(232),Ot=n(97),kt=n(197),wt=n(89),St=n.n(wt);var Ct=function(e){const{items:t}=e,[n,c]=Object(a.useState)(void 0);function o(){c(void 0)}const l=t.map(e=>{const{label:t,callback:n}=e;return r.a.createElement(kt.a,{key:t,onClick:()=>{o(),n()}},t)});return r.a.createElement(a.Fragment,null,r.a.createElement(jt.a,{title:"More"},r.a.createElement(mt.a,{color:"inherit",onClick:function(e){c(e.currentTarget)}},r.a.createElement(St.a,null))),r.a.createElement(Ot.a,{anchorEl:n,getContentAnchorEl:void 0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(n),onClose:o},l))},It=n(198);function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Tt=function(e){const{content:t,tooltip:n,onClick:a,style:c}=e;return r.a.createElement(jt.a,{title:n},r.a.createElement(It.a,xt({onClick:e=>{e.stopPropagation(),a()}},{style:c}),r.a.createElement(ct.a,{display:"inline",style:{cursor:"pointer"}},t)))},$t=n(200),Pt=n(199),Rt=n(201);var Mt=class extends a.Component{render(){let e;switch(this.props.variant){case"linear":e=r.a.createElement(At,null,r.a.createElement(Pt.a,null),r.a.createElement(ct.a,{variant:"h6",style:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},this.props.status));break;case"circular":e=r.a.createElement(At,{style:{justifyContent:"center",alignItems:"center"}},r.a.createElement($t.a,{in:!0,style:{transitionDelay:"1000ms"}},r.a.createElement(Rt.a,null)),r.a.createElement($t.a,{in:!0,style:{transitionDelay:"200ms"}},r.a.createElement(ct.a,{variant:"h6",style:{marginTop:"2em"}},this.props.status)))}return e}};var At=class extends a.Component{constructor(e){super(e)}render(){const e=this.props.height,t=this.props.width,n=this.props.overflow,a=r.a.Children.map(this.props.children,n=>{const a={...t?{width:t}:{},...e?{height:e}:{}};return r.a.cloneElement(n,a)}),c={display:"flex",flexDirection:"column",height:e||"100%",width:t||"100%",overflow:n||"hidden",...this.props.style};return r.a.createElement("div",{style:c},a)}};var Dt=n(204),_t=n(205),Nt=n(206),Ut=n(203),Lt=n(202);var Ft=function(e){const t=e.labels.map(e=>r.a.createElement(Lt.a,{key:e},e)),n=e.entries.map((e,t)=>{const n=e.map((e,t)=>r.a.createElement(Lt.a,{key:t},e));return r.a.createElement(Ut.a,{key:t},n)});return r.a.createElement(Dt.a,{size:"small"},r.a.createElement(_t.a,null,r.a.createElement(Ut.a,null,t)),r.a.createElement(Nt.a,null,n))},zt=n(208);function Gt(e){const t=e.theme;return r.a.createElement(rt.a,{variant:"dense",style:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,minHeight:"auto"}},r.a.createElement(ct.a,null,e.content))}Gt=Object(zt.a)(Gt);var Bt=function(e){const{label:t,panels:n}=e,c=[...Object.entries(n).filter(([t,n])=>{const{saved:a}=n,r=a;let c=!0;return e.onFilterSaved&&(c=e.onFilterSaved([t,n])),r&&c}).map(e.onGenerate),...Object.entries(n).filter(([t,n])=>{const{saved:a,hidden:r}=n,c=!a&&!r;let o=!0;return e.onFilterUnsaved&&(o=e.onFilterUnsaved([t,n])),c&&o}).map(e.onGenerate)];return r.a.createElement(a.Fragment,null,r.a.createElement(Gt,{content:t}),r.a.createElement("div",{style:{overflowY:"auto"}},c))};var Jt=function(e){const{children:t,childrenStyle:n}=e,a=r.a.Children.map(t,e=>{if(e)return r.a.cloneElement(e,{style:n})});return r.a.createElement("div",null,a)};function Ht(e){let t={backgroundColor:"darkgray"};return t=e.horizontal?{...t,height:5,cursor:"ns-resize"}:{...t,width:5,cursor:"ew-resize"},r.a.createElement("div",{style:t,onMouseDown:e.onMouseDown})}var Wt=function(e){const t=Object(a.useRef)(void 0),[n,c]=Object(a.useState)(!1),o=e.children[0].props,l=parseInt(o.width||o.height),[s,i]=Object(a.useState)(l);function u(){c(!0)}function d(){n&&c(!1)}const f=100-s;let p,m,h,E;return e.horizontal?(p=r.a.cloneElement(e.children[0],{height:`${s}%`}),m=r.a.cloneElement(e.children[1],{height:`${f}%`}),h=r.a.createElement(Ht,{horizontal:!0,onMouseDown:u}),E="ns-resize"):(p=r.a.cloneElement(e.children[0],{width:`${s}%`}),m=r.a.cloneElement(e.children[1],{width:`${f}%`}),h=r.a.createElement(Ht,{vertical:!0,onMouseDown:u}),E="ew-resize"),r.a.createElement("div",{ref:t,style:{display:"flex",flexDirection:e.horizontal?"column":"row",flex:"1 1 auto",minHeight:0,cursor:n?E:"default"},onMouseMove:function(a){if(n){let n;!function(){const e=window.getSelection();e&&e.removeAllRanges()}();const r=t.current.getBoundingClientRect();n=e.horizontal?(a.clientY-r.y)/r.height*100:(a.clientX-r.x)/r.width*100,i(n)}},onMouseUp:d,onMouseLeave:d},p,h,m)};function Vt(e){const{projectId:t}=e,n=Object(l.d)(e=>ne(e,t)),a=Object(l.c)(),c=r.a.createElement(ft.a,{style:{flex:"0 0 10em"}},n.analysis),o=r.a.createElement(ft.a,{style:{overflow:"hidden",textOverflow:"ellipsis"}},n.name||"unnamed"),s=r.a.createElement(ft.a,{style:{flex:"0 0 10em"}},t),i=r.a.createElement(ft.a,{style:{flex:"0 0 10em"}},n.status);let u;u=n.status==T?r.a.createElement(jt.a,{title:"Cancel processing"},r.a.createElement(mt.a,{onClick:()=>a(function(e){return async function(t){switch((await Ke(`projects/${e}/cancel`,"POST")).status){case 200:t(Je(e,{status:x}));break;case 409:t(we(`Project ${e} cancel request denied - already finished`));break;default:t(we(`Project ${e} cancel request failed`));break}}}(t))},r.a.createElement(gt.a,null))):r.a.createElement(jt.a,{title:"Delete"},r.a.createElement(mt.a,{onClick:()=>a(function(e){return async function(t){const n=Z(W.getState());switch((await Ke(`projects/${e}/delete`,"POST")).status){case 205:t(He(e)),n==e&&t(Ve(void 0));break;default:t(we(`Project ${e} delete request failed`))}}}(t))},r.a.createElement(bt.a,null)));const d=r.a.createElement(pt.a,null,r.a.createElement(Ct,{items:[{label:"Rename",callback:()=>a(Ce(t))},{label:"Export",callback:()=>a(nt(t))}]}),r.a.createElement(jt.a,{title:"Fork"},r.a.createElement(mt.a,{onClick:()=>a(Xe(t))},r.a.createElement(Et.a,null))),u);return r.a.createElement(dt.a,{button:!0,key:t,onClick:()=>a(Ve(t)),align:"flex-start",style:{paddingRight:160}},c,o,s,i,d)}var qt=function(){const e=Object(l.d)(te),t=Object(l.c)(),n=Object(a.useRef)(void 0);Object(a.useEffect)(()=>(async function(){await t(Qe())&&(n.current=setTimeout(t(Qe),1e3))}(),()=>{clearTimeout(n.current)}),[]);const c=e.map(e=>r.a.createElement(Vt,{key:e,projectId:e}));return r.a.createElement(ut.a,{style:{overflowY:"auto"}},c)},Kt=n(231),Qt=n(228),Yt=n(60),Xt=n.n(Yt);n(118);function Zt(e){const{onClick:t}=e;return r.a.createElement(ot.a,{onClick:t,variant:"contained",color:"secondary"},"process")}var en=function(e){const{edit:t,processOptions:n,error:c,errorContent:o}=e,{analysis:s}=n,i=Object(a.useRef)(void 0),u={lineWrapping:!0,lineNumbers:!0,readOnly:!t},d=Object(a.useRef)(Xt.a),[f,p]=Object(a.useState)({analysis:s[0]}),m=Object(l.d)(Z),{code:h}=Object(l.d)(ne),E=Object(l.c)();function y(){return d.current.getDoc().getValue()}let g,v;if(Object(a.useEffect)(()=>(d.current=Xt.a.fromTextArea(i.current,u),()=>{d.current.toTextArea(),E(et(m,y()))}),[]),Object(a.useEffect)(()=>{!function(e){d.current.getDoc().setValue(e)}(h)},[h]),t){g=r.a.createElement(ct.a,null,"Input code for analysis");const e=n.analysis.map(e=>r.a.createElement(kt.a,{key:e,value:e},e));v=r.a.createElement(rt.a,null,r.a.createElement("div",{style:{flex:"1 1 auto"}},r.a.createElement(Kt.a,null,"Analysis"),r.a.createElement(Qt.a,{value:f.analysis,onChange:e=>{const t=e.target.value;p({...f,analysis:t})}},e)),r.a.createElement(Zt,{onClick:function(){E(function(e,t,n){return async function(a){a(et(e,t));const r=W.getState(),{userId:c}=ne(r,e);switch((await fetch(`/api/${c}/projects/${e}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).status){case 200:a(Je(e,{status:"process"}));break;case 412:a(we("Project process request rejected"))}}}(m,y(),f))}}))}else c&&(g=r.a.createElement(a.Fragment,null,r.a.createElement(ct.a,{variant:"h3"},"Analysis error"),r.a.createElement(ct.a,null,o)));return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"auto"}},g,r.a.createElement("textarea",{ref:e=>i.current=e,style:{flex:"1 1 auto",overflow:"auto",height:"100%"}}),v)},tn=n(93),nn=n.n(tn);var an=function(e,t){return{group:"nodes",data:{id:e,label:`${e}\n${t}`,form:t}}};var rn=function(e,t,n,a){const{label:r="",style:c}=a;return{group:"edges",data:{id:e,label:r,source:t,target:n,style:c}}};var cn=function(e,t){const n=t.graphs[e],{graph:a,start:r}=n;function c(e,t){const n=[];for(const[a,r]of Object.entries(e)){const{form:e}=t[a];n.push(an(a,e));for(const[e,c]of Object.entries(r)){const{form:r}=t[e];n.push(an(e,r));const o=`${a}-${e}`;n.push(rn(o,a,e,c))}}return n}switch(e){case"funcs":return c(a,t.funcs);case"states":default:return c(a,t.configs)}};function on(e){const t=Object(a.useRef)(void 0),n=Object(a.useRef)(void 0),c=Object(a.useRef)(!1),{graphId:o,edgePredicate:s,onNodeSelect:i,onNodeUnselect:u,theme:d}=e,f=Object(l.d)(ae),p=cn(o,f),m=Object(l.d)(e=>ue(e,o)),h=Object(l.d)(se)===o,E=Object(l.c)(),y={style:[{selector:"node",style:{label:"data(label)","text-wrap":"wrap"}},{selector:"node:selected",style:{"background-color":d.palette.select.main}},{selector:"edge",style:{label:"data(label)","curve-style":"bezier","target-arrow-shape":"triangle","line-style":(g="line-style",v="solid",e=>{const t=e.data("style");let n;return n=t&&t[g]?t[g]:v})}},{selector:"edge:selected",style:{"line-color":d.palette.select.main,"target-arrow-color":d.palette.select.main}},{selector:".suggested",style:{"background-color":d.palette.suggest.main}},{selector:e=>e.hasClass("suggested")&&e.selected(),style:{"background-color":d.palette.suggest.dark}},{selector:".hovered",style:{"background-color":d.palette.hover.main}}],headless:!0};var g,v;const b=Object(a.useRef)(nn()(y)).current,{positions:j,selectedNodes:O=[],selectedEdges:k=[],hoveredNodes:w=[],suggestedNodes:S=[]}=m;function C(e){const t=b.$("node:selected");switch(e.key){case"ArrowLeft":const n=t.incomers().nodes();1==n.length&&(t.unselect(),n.select());break;case"ArrowRight":const a=t.outgoers().nodes();1==a.length&&(t.unselect(),a.select())}}function I(e,t){b.batch(()=>{for(const n of e){b.getElementById(n).addClass(t)}})}function x(e,t){b.batch(()=>{for(const n of e){b.getElementById(n).removeClass(t)}})}return Object(a.useEffect)(()=>(b.mount(t.current),()=>b.unmount()),[]),Object(a.useEffect)(()=>{if(h)return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[h]),Object(a.useEffect)(()=>(["tap","select","unselect","mouseover","mouseout"].forEach(e=>b.off(e)),b.on("tap",()=>E(function(e){const t=Z(W.getState());return qe(t,{focusedGraph:e})}(o))),b.on("select","node",e=>{if(c.current){const t=e.target.id();E(je(o,[t])),i&&i(t)}}),b.on("unselect","node",e=>{if(c.current){const t=e.target.id();E(function(e,t){return n=>{const a=de(W.getState(),e),r=new Set(a);t.forEach(e=>r.delete(e)),n(be(e,{selectedNodes:[...r]})),n(Ue())}}(o,[t])),u&&u(t)}}),b.on("mouseover","node",e=>{const t=e.target.id();w!=[t]&&E(Oe(o,[t]))}),b.on("mouseout","node",e=>{E(Oe(o,[]))}),b.on("select","edge",e=>{if(c.current){const t=e.target;if(s(t)){const e=t.id();E(ke(o,[e]))}else t.unselect()}}),b.on("unselect","edge",e=>{c.current&&E(ke(o,[]))}),b.add(p),j?(b.nodes().positions(e=>j[e.data("id")]),b.fit()):b.layout({name:"cose",directed:!0}).run(),()=>{const e={};for(const t of p){const n=t.data.id;e[n]=b.$id(n).position()}E(function(e,t){return be(e,{positions:t})}(o,e)),b.nodes().remove()}),[o]),Object(a.useEffect)(()=>{return c.current=!1,function(e){e.forEach(e=>b.$id(e).select())}([...O,...k]),c.current=!0,()=>{c.current=!1,function(e){e.forEach(e=>b.$id(e).unselect())}([...O,k]),c.current=!0}},[O,k]),Object(a.useEffect)(()=>(c.current=!1,I(S,"suggested"),c.current=!0,()=>{c.current=!1,x(S,"suggested"),c.current=!0}),[S]),Object(a.useEffect)(()=>(c.current=!1,I(w,"hovered"),c.current=!0,()=>{c.current=!1,x(w,"hovered"),c.current=!0}),[w]),Object(a.useEffect)(()=>{b.resize()},[n.current]),Object(a.useEffect)(()=>{n.current=t.current.getBoundingClientRect()}),r.a.createElement("div",{style:{flex:"1 1 1%",display:"block",minHeight:0,width:"100%"},ref:t})}var ln=on=Object(zt.a)(on);function sn(e){const{content:t,theme:n}=e;return r.a.createElement(rt.a,{variant:"dense",style:{backgroundColor:n.palette.grey[300],color:n.palette.text.primary,width:"100%",minHeight:"unset"}},r.a.createElement(ct.a,null,t))}sn=Object(zt.a)(sn);var un=function(){const e=Object(l.d)(oe),t=Object(l.d)(le);return r.a.createElement(Wt,{horizontal:!0},r.a.createElement(At,{height:"50%"},r.a.createElement(sn,{content:e}),r.a.createElement(ln,{graphId:e,edgePredicate:e=>!1})),r.a.createElement(At,{height:"50%"},r.a.createElement(sn,{content:t}),r.a.createElement(ln,{graphId:t,edgePredicate:e=>{const t=e.data("style");return!!t&&"dashed"===t["line-style"]}})))};var dn=class{constructor(e,t){this.line=e,this.ch=t}toString(){return`line ${this.line} ch ${this.ch}`}},fn=n(70),pn=n.n(fn);var mn=class{constructor(e,t){this.start=e,this.end=t,this.nodes={}}addNode(e,t){this.nodes[e]?this.nodes[e].push(t):this.nodes[e]=[t]}in(e,t,n){let a=!1;if(t.line==n.line){const r=t.line<=e.line&&e.line<=n.line,c=t.ch<=e.ch&&e.ch<n.ch;r&&c&&(a=!0)}else{const r=e.line==t.line,c=e.line==n.line,o=t.line<e.line&&e.line<n.line,l=t.ch<=e.ch,s=e.ch<n.ch;(r&&l||o||c&&s)&&(a=!0)}return a}startsIn(e,t){return this.in(this.start,e,t)}endsIn(e,t){return this.in(new dn(this.end.line,this.end.ch-1),e,t)}includes(e,t){const n=this.in(e,this.start,this.end),a=this.in(new dn(t.line,t.ch-1),this.start,this.end);return n&&a}has(e){return this.in(e,this.start,this.end)}smallerThan(e){const t=this.end.line-this.start.line<e.end.line-e.start.line,n=this.end.ch-this.start.ch<e.end.ch-e.start.ch;return t||!t&&n}coverage(e,t){let n,a;const r=this.includes(e,t);let c;return this.startsIn(e,t)?n=this.start:r&&(n=e),this.endsIn(e,t)?a=this.end:r&&(a=t),c=n&&a?a.ch-n.ch:0}};function hn(e){const{code:t}=Object(l.d)(ne),n=[Object(l.d)(oe),Object(l.d)(le)],c=Object(l.d)(ae),o=Object(l.d)(pe),s=Object(l.d)(me),i=Object(l.c)(),u={};for(const[e,t]of Object.entries(c.ast)){const{start:n,end:a}=t,r=new dn(n[0],n[1]),c=new dn(a[0],a[1]);u[e]=new mn(r,c)}function d(e){const t=function(e){const{graph:t}=c.graphs[e],n=[];for(const[e,a]of Object.entries(t))n.push(e),n.concat(Object.keys(a));return n}(e),n=function(e){switch(e){case"funcs":return c.funcs;case"states":default:return c.configs}}(e);for(const a of t){const t=he([a],n);for(const n of t)u[n].addNode(e,a)}}n.forEach(e=>d(e));const[f,p]=Object(a.useState)("auto"),{theme:m}=e,h=Object.entries(u).reduce((e,t)=>{const[n,a]=t;return Object.keys(a.nodes).length>0&&(e[n]=a),e},{});function E(){for(const e of n)i(Oe(e,void 0))}const y=t.split(/\r\n|\n/).map(e=>e.match(/\(|\)|\[|\]|\#t|\#f|\w+|\s+/g)),g=y.map((e,t)=>{let n=0;e||(e=[" "]);const a=e.map((e,a)=>{const c=new dn(t,n),l=new dn(t,n+e.length);n+=e.length;let u="inherit";e.match(/lambda|let|if|\#t|\#f/)&&(u=pn.a[800]);const d=s.map(e=>h[e]),f=o.map(e=>h[e]),p=d.find(e=>e.includes(c,l)),y=f.find(e=>e.includes(c,l));let g=e;p?g=r.a.createElement(En,{content:e,color:m.palette.hover.light}):y&&(g=r.a.createElement(En,{content:e,color:m.palette.select.light}));const v=function(e,t){const n=new dn(e,t);let a;return Object.entries(h).forEach(([e,t])=>{if(t.has(n))if(a){const n=h[a];t.smallerThan(n)&&(a=e)}else a=e}),a}(t,c.ch);return r.a.createElement(yn,{key:a,content:g,textColor:u,onMouseOver:()=>(function(e){if(E(),e)for(const[t,n]of Object.entries(h[e].nodes))i(Oe(t,n))})(v),onClick:()=>(function(e){const t=h[e],n=t.nodes,a=Object.keys(t.nodes).filter(e=>"funcs"!==e);if(a.length>0){const e=a[0],t=n[e];i(je(e,t))}})(v),style:{cursor:"pointer"}})}),c=r.a.createElement("div",{style:{display:"inline-block",width:f,fontFamily:'Roboto Mono, "Courier New", Courier, monospace',backgroundColor:m.palette.grey[200],textAlign:"right",padding:"0 5px"}},r.a.createElement(ct.a,{variant:"body2",ref:e=>{const n=t==y.length-1;if(e&&n){const t=e.getBoundingClientRect(),n=t.width;f!==n&&p(t.width)}},color:"textSecondary"},t+1));return r.a.createElement("div",{key:t},c,r.a.createElement(ct.a,{onMouseLeave:()=>E(),variant:"body2",style:{display:"inline-block",verticalAlign:"bottom",fontFamily:'Roboto Mono, "Courier New", Courier, monospace'}},a))});return r.a.createElement("div",{style:{whiteSpace:"pre"}},g)}function En(e){const{content:t,color:n}=e;return r.a.createElement(yn,{content:t,color:n})}function yn(e){const{content:t,color:n,textColor:a,style:c,onClick:o,onMouseOver:l}=e;return r.a.createElement("span",{onMouseOver:l,onClick:o,style:{display:"inline-block",backgroundColor:n||"inherit",color:a||"inherit",...c}},t)}var gn=hn=Object(zt.a)(hn),vn=n(220),bn=n(221),jn=n(229),On=n(217),kn=n(219),wn=n(211),Sn=n(212),Cn=n(213),In=n(214),xn=n(215),Tn=n(216),$n=n(218),Pn=n(148);function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Mn(e){const{panelId:t,panelType:n,children:c,theme:o,classes:s,onSelect:i,onUnselect:u,onMouseOver:d,onMouseOut:f}=e,p=Object(l.d)(ve)[n][t],m=Object(l.c)(),[h,E]=Object(a.useState)(!1);const{label:y,selected:g,saved:v}=p;let b,j;j=e.disableSelect?r.a.createElement(An,{icon:r.a.createElement(wn.a,{color:"disabled"}),tooltip:e.disableSelectMsg,disabled:!0}):g?r.a.createElement(An,{icon:r.a.createElement(Cn.a,null),tooltip:"Unselect",onClick:function(){m(Ae(n,t)),u&&u()}}):r.a.createElement(An,{icon:r.a.createElement(Sn.a,null),tooltip:"Select",onClick:function(){m(Me(n,t)),i&&i()}}),b=v?r.a.createElement(An,{icon:r.a.createElement(xn.a,null),tooltip:"Unsave",onClick:()=>m(Re(n,t))}):r.a.createElement(An,{icon:r.a.createElement(In.a,null),tooltip:"Save",onClick:()=>m(Pe(n,t))});const O=r.a.createElement(An,{icon:r.a.createElement(Tn.a,null),tooltip:"Delete",onClick:()=>m(Te(n,t))});return r.a.createElement(jn.a,{onMouseOver:()=>{h||(d(),E(!0))},onMouseOut:()=>{h&&(f(),E(!1))},defaultExpanded:!v},r.a.createElement(On.a,{expandIcon:r.a.createElement($n.a,null),classes:{root:s.panelRoot,content:s.panelContent,expandIcon:s.panelExpandIcon,expanded:s.panelExpanded},style:{backgroundColor:h?o.palette.hover.light:void 0}},j,b,O,r.a.createElement(ct.a,null,y)),r.a.createElement(kn.a,null,c))}function An(e){const{icon:t,tooltip:n,disabled:a,onClick:c}=e,o={};return a?(o.disableRipple=!0,o.onClick=e=>{e.stopPropagation()}):o.onClick=e=>{e.stopPropagation(),c()},r.a.createElement(jt.a,{title:n},r.a.createElement(mt.a,Rn({size:"small"},o),t))}var Dn=Mn=Object(Pn.a)(e=>({panelRoot:{minHeight:0,"&$panelExpanded":{minHeight:0}},panelContent:{alignItems:"center",margin:"5px 0","&$panelExpanded":{margin:"8px 0"}},panelExpandIcon:{padding:"5px 12px"},panelExpanded:{}}),{withTheme:!0})(Mn);function _n(){return(_n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Nn=function(e){const{envId:t,style:n}=e,a=Object(l.c)();return r.a.createElement(Tt,_n({content:`env-${t}`,tooltip:"Show environment",onClick:()=>a(_e(t))},{style:n}))};function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ln=function(e){const{kontId:t,style:n}=e,a=Object(l.c)();return r.a.createElement(Tt,Un({content:`stack-${t}`,tooltip:"Show stack",onClick:()=>a(De(t))},{style:n}))};var Fn=function(e){const{valId:t}=e,n=Object(l.d)(ae),{type:a,astString:c,valString:o}=n.vals[t];let s;switch(a){case"bool":s=o;break;case"closure":s=c;break;default:s=`'${a}' value type unsupported`}return r.a.createElement(ct.a,null,s)};function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Gn(e){const{configId:t}=e,n=Object(l.d)(ae),{states:a}=n.configs[t];let c;return a&&(c=a.map(e=>{const{form:t}=n.states[e];switch(t){case"halt":return;default:return r.a.createElement(Bn,{key:e,stateId:e})}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},c)}function Bn(e){const{stateId:t}=e,n=Object(l.d)(ae),{instr:a,kont:c,env:o,vals:s}=n.states[t],i=n.instr[a].exprStrings.join(", "),u=r.a.createElement(ct.a,{display:"inline"},`[ ${i} ]`),d=r.a.createElement(Ln,{kontId:c}),f=o?r.a.createElement(Nn,{envId:o}):void 0;let p;return s&&(p=s.map((e,t)=>{const n=e.map(e=>r.a.createElement(Fn,{key:e,valId:e}));return r.a.createElement("div",{key:t,style:{flex:"1 1 auto"}},n)})),r.a.createElement(vn.a,{style:{width:"100%"}},r.a.createElement(bn.a,{style:{padding:8}},r.a.createElement(Jt,{childrenStyle:{marginRight:5}},u,d,f),r.a.createElement("div",{style:{display:"flex"}},p)))}var Jn=function(){const{configs:e}=Object(l.d)(ve),t=Object(l.d)(ae),n=Object(l.d)(le),a=Object(l.c)();function c(){a(Le()),a(Fe())}const o={onFilterSaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)},onFilterUnsaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)}};return r.a.createElement(Bt,zn({label:"Configurations",panels:e,onGenerate:function([e,t]){return r.a.createElement(Dn,{key:e,panelId:e,panelType:"configs",onMouseOver:()=>a(Oe(n,[e])),onMouseOut:()=>a(Oe(n,[])),onSelect:c,onUnselect:c},r.a.createElement(Gn,{configId:e}))}},o))};var Hn=function(){const{envs:e}=Object(l.d)(ve);return r.a.createElement(Bt,{label:"Environments",panels:e,onGenerate:function([e,t]){return r.a.createElement(Dn,{key:e,panelId:e,panelType:"envs",onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},r.a.createElement(Wn,{envId:e}))}})};function Wn(e){const{envId:t}=e,n=Object(l.d)(ae),{envs:a,instr:c,store:o,vals:s}=n,i=a[t].map(e=>{const n=c[e.instr].exprStrings.join(", "),a=o[e.addr].map(e=>{const{env:n,type:a,astString:c,valString:o}=s[e];let l;switch(a){case"closure":l=c;break;case"bool":l=o;break;default:l=`'${a}' value type unsupported`}const i=t?r.a.createElement(Nn,{envId:t}):void 0;return r.a.createElement(Jt,{key:e,childrenStyle:{marginRight:5}},r.a.createElement(ct.a,{display:"inline"},l),i)});return[e.varString,`[ ${n} ]`,a]});return r.a.createElement(Ft,{labels:["var","instr","store"],entries:i})}var Vn=n(193),qn=n(222);var Kn=class{constructor(e){this.cardIds=e,this.selected=void 0}select(e){this.selected=e}unselect(e){this.selected=void 0}get cards(){return this.cardIds}};function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Yn(e){const{kontId:t}=e,[n,c]=Object(a.useState)([new Kn([t])]);function o(e){return n.slice(0,e+1)}const l=n.map((e,t)=>r.a.createElement(Xn,{key:t,layer:e,onSet:(e,n)=>(function(e,t,n){const a=o(e);a[a.length-1].select(t),c([...a,n])})(t,e,n),onUnset:e=>(function(e,t){const n=o(e);n[n.length-1].unselect(t),c(n)})(t,e)}));return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},l)}function Xn(e){const{layer:t}=e,n=t.cards.map(n=>r.a.createElement(Zn,{key:n,kontId:n,selected:t.selected==n,onSet:e.onSet,onUnset:e.onUnset}));return r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"5px 0"}},n)}function Zn(e){const{kontId:t,selected:n,theme:a,classes:c}=e,o=Object(l.d)(ae),s=o.konts[t],{form:i,type:u,vals:d}=s;let f,p,m;switch(i){case"addr":{const{func:e,env:n,konts:a}=s;f=r.a.createElement(ea,null,r.a.createElement(Ln,{kontId:t}),r.a.createElement(ta,{label:"Form"},i),r.a.createElement(ta,{label:"Function"},o.funcs[e].form),r.a.createElement(Nn,{envId:n})),m=new Kn(a);break}case"frame":{const{env:e,instr:t,exprString:n,kont:a}=s,c=o.instr[t].exprStrings.join(", ");f=r.a.createElement(ea,null,r.a.createElement(ta,{label:"Type"},u),r.a.createElement(Nn,{envId:e}),r.a.createElement(ta,{label:"Instrumentation"},`[ ${c} ]`)),p=r.a.createElement(ct.a,null,n),m=new Kn([a]);break}default:f=r.a.createElement(ea,null,r.a.createElement(Ln,{kontId:t}),r.a.createElement(ta,{label:"Form"},i))}const h={style:{flex:"1 0 0",backgroundColor:n?a.palette.select.light:void 0,cursor:m?"pointer":void 0,minWidth:100}};let E,y;return m&&(h.classes={root:c.enableHover},h.onClick=n?()=>e.onUnset(t):()=>e.onSet(t,m)),p&&(E=r.a.createElement(na,null,p)),d&&(y=d.map((e,t)=>{const n=e.map(e=>r.a.createElement(Fn,{key:e,valId:e}));return r.a.createElement("div",{key:t,style:{flex:"1 1 auto"}},n)})),r.a.createElement(vn.a,Qn({key:t},h),r.a.createElement(bn.a,{style:{padding:8}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"}},f,E),r.a.createElement("div",{style:{display:"flex"}},y)))}function ea(e){const{children:t}=e,n=r.a.Children.map(t,e=>r.a.cloneElement(e,{style:{marginRight:"5px"}}));return r.a.createElement("div",null,n)}function ta(e){const{label:t,children:n,style:a}=e;return r.a.createElement(jt.a,{title:t},r.a.createElement(ct.a,Qn({display:"inline"},{style:a}),n))}function na(e){const{children:t,classes:n}=e,[c,o]=Object(a.useState)(void 0);return r.a.createElement(a.Fragment,null,r.a.createElement(jt.a,{title:"Show info"},r.a.createElement(mt.a,{size:"small",onClick:function(e){e.stopPropagation(),o(e.currentTarget)}},r.a.createElement(qn.a,null))),r.a.createElement(Vn.a,{open:Boolean(c),anchorEl:c,onClose:function(e){e.stopPropagation(),o(void 0)},classes:{paper:n.paper}},t))}Zn=Object(Pn.a)(e=>({enableHover:{"&:hover":{backgroundColor:`${e.palette.hover.light} !important`}}}),{withTheme:!0})(Zn),na=Object(Pn.a)({paper:{padding:"1em"}})(na);var aa=function(){const{konts:e}=Object(l.d)(ve);return r.a.createElement(Bt,{label:"Stacks",panels:e,onGenerate:function([e,t]){return r.a.createElement(Dn,{key:e,panelId:e,panelType:"konts",onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},r.a.createElement(Yn,{kontId:e}))}})};var ra=function(){const e=Object(l.d)(Z),t=Object(l.d)(ne),n=Object(l.c)(),c=Object(a.useRef)(void 0);async function o(){switch(await n(tt(e))){case 200:n(ze(e));break;case 204:c.current=setTimeout(()=>o(),5e3)}}return Object(a.useEffect)(()=>{const{status:a,code:r,items:l,name:s}=t;switch(n(q(s||e)),a){case x:""==r&&n(Ze(e));break;case $:case P:l||o()}return()=>{n(q(void 0)),clearTimeout(c.current)}},[]),Object(a.useEffect)(()=>{switch(t.status){case"process":c.current=setTimeout(()=>o(),5e3)}},[t.status]),function(){const{status:e,error:n,items:a}=t;let c;switch(e){case I:case x:c=r.a.createElement(en,{processOptions:{analysis:["0-cfa","1-cfa","2-cfa"]},edit:!0});break;case T:c=r.a.createElement(Mt,{status:"Processing",variant:"circular"});break;case $:c=a?r.a.createElement(Wt,{vertical:!0},r.a.createElement(At,{width:"40%"},r.a.createElement(un,null)),r.a.createElement(At,{width:"60%"},r.a.createElement(Wt,{horizontal:!0},r.a.createElement(At,{height:"48%"},r.a.createElement(Wt,{vertical:!0},r.a.createElement(At,{width:"48%",overflow:"auto"},r.a.createElement(gn,null)),r.a.createElement(At,{width:"52%"},r.a.createElement(aa,null)))),r.a.createElement(At,{height:"52%",overflow:"auto"},r.a.createElement(Wt,null,r.a.createElement(At,{width:"50%",overflow:"auto"},r.a.createElement(Jn,null)),r.a.createElement(At,{width:"50%",overflow:"auto"},r.a.createElement(Hn,null))))))):r.a.createElement(Mt,{status:"Downloading",variant:"circular"});break;case P:c=r.a.createElement(en,{error:!0,errorContent:n})}return c}()},ca=n(94),oa=n.n(ca),la=n(95),sa=n.n(la),ia=n(41),ua=n.n(ia),da=n(73),fa=n.n(da),pa=n(74),ma=n.n(pa);var ha=oa()({palette:{secondary:{light:ua.a[300],main:ua.a[500],dark:ua.a[700]},select:{light:ua.a[100],main:ua.a[400]},hover:{light:fa.a[100],main:fa.a[400]},suggest:{main:ma.a[400],dark:ma.a[700]},warn:{main:sa.a.A700,contrastText:"#fff"}}}),Ea=n(233),ya=n(223),ga=n(224);var va=Object(l.b)(e=>{const t=ge(e);return{projectId:t,name:t?ne(e,t).name:""}},{rename:function(e,t){return async function(n){const a=Q(W.getState());return n(Je(e,{name:t})),fetch(`/api/${a}/projects/${e}/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})}},setRenameDialog:Ce})(function(e){const{projectId:t,name:n,rename:c,setRenameDialog:o}=e,[l,s]=Object(a.useState)(void 0);function i(){o(void 0)}return Object(a.useEffect)(()=>s(n||""),[n]),r.a.createElement(Ea.a,{open:Boolean(t),onClose:i},r.a.createElement(ya.a,null,r.a.createElement(st.a,{label:"name",value:l,onChange:e=>s(e.target.value),placeholder:`project ${t} name`})),r.a.createElement(ga.a,null,r.a.createElement(ot.a,{onClick:i},"cancel"),r.a.createElement(ot.a,{onClick:()=>{i(),c(t,l)}},"rename")))}),ba=n(230),ja=n(96),Oa=n.n(ja);var ka=function(){const e=Object(l.d)(ye),t=Object(l.c)(),[n,c]=Object(a.useState)(void 0);function o(){clearTimeout(n),t(Se())}return Object(a.useEffect)(()=>{e&&c(setTimeout(()=>{o()},2e4))},[e]),r.a.createElement(ba.a,{open:Boolean(e),onClose:function(e,t){"clickaway"!==t&&o()},action:[r.a.createElement(mt.a,{key:"close",onClick:o,color:"inherit"},r.a.createElement(Oa.a,null))],autoHideDuration:2e4,message:e,anchorOrigin:{horizontal:"left",vertical:"bottom"}})};var wa=function(){const e=Object(l.d)(Y),t=Object(l.d)(X),n=Object(l.d)(Z),c=Object(l.c)();let o,s,i;switch(e){case w:o=r.a.createElement(it,null);break;case S:s=r.a.createElement(Sa,null),i=r.a.createElement(a.Fragment,null,r.a.createElement(Ia,null),r.a.createElement(xa,{content:"new project",onClick:()=>c(Ye())}),r.a.createElement(Ca,null)),o=r.a.createElement(qt,null);break;case C:s=r.a.createElement(Sa,null),i=r.a.createElement(a.Fragment,null,r.a.createElement(xa,{content:"fork project",onClick:()=>c(Xe(n))}),r.a.createElement(xa,{content:"export project",onClick:()=>c(nt(n))}),r.a.createElement(Ca,null)),o=r.a.createElement(ra,null)}const u=r.a.createElement(at.a,{position:"static"},r.a.createElement(rt.a,null,s,r.a.createElement(ct.a,{variant:"h6",color:"inherit",style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"}},t),i));return r.a.createElement(lt.a,{theme:ha},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}},!1,u,o,r.a.createElement(ka,null),r.a.createElement(va,null)))};function Sa(){const e=Object(l.c)();return r.a.createElement(xa,{content:"project list",onClick:()=>e(Ve(void 0))})}function Ca(){const e=Object(l.c)();return r.a.createElement(xa,{content:"logout",onClick:t=>e(function(e){return e=>{e(V(void 0)),e(We())}}())})}function Ia(){const e=Object(a.useRef)(void 0),t=Object(l.c)();function n(n){const a=new FileReader;a.onload=()=>{const e=JSON.parse(a.result),r=n.name.match(/aam-vis-(.*)\.js/)[1];t(function(e,t){return n=>{n(Be(e)),n(Je(e,t)),n(ze(e))}}(r,e))},a.readAsText(n),e.current.value=""}return r.a.createElement(a.Fragment,null,r.a.createElement(xa,{content:"import",onClick:()=>e.current.click()}),r.a.createElement("input",{ref:e,onChange:()=>n(e.current.files[0]),type:"file",hidden:!0}))}function xa(e){const{content:t,onClick:n}=e;return r.a.createElement(ot.a,{onClick:n,color:"inherit",variant:"outlined",style:{margin:ha.spacing(1)}},t)}n(140);o.a.render(r.a.createElement(l.a,{store:W},r.a.createElement(wa,null)),document.getElementById("app"))}});