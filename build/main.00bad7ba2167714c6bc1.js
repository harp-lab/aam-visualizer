(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{kHzT:function(e,t,n){var a=n("r05h");"string"==typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n("LboF")(a,r);a.locals&&(e.exports=a.locals)},r05h:function(e,t,n){(t=e.exports=n("JPst")(!1)).i(n("bl2O"),""),t.push([e.i,"body{margin:0}#app{height:100vh}.CodeMirror{height:100%}.CodeMirror .mark{color:#3f51b5;cursor:pointer;font-size:0.6rem;line-height:inherit;padding-right:2px;vertical-align:top}.CodeMirror .mark:hover{color:#7986cb}.CodeMirror .selected{background-color:#fff59d}\n",""])},xATA:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),c=n("i8i4"),o=n.n(c),l=n("/MKj"),s=n("ANjH");const i="SET_USER",u="SET_TITLE",d="ADD_PROJECT",f="SET_PROJECT_DATA",m="SET_METADATA",p="SET_STATUS",E="SET_GRAPH_METADATA",y="ADD_PANEL",h="SET_PANEL",g="SET_PANELS",b="REFRESH_PANELS",v="DEL_PROJECT",j="DEL_PROJECTS",O="SEL_PROJECT",k={snackbars:[],dialogs:{},loading:!1};var w=function(e=k,t){switch(t.type){case"QUEUE_SNACKBAR":{const{text:n}=t.payload,{snackbars:a}=e;return{...e,snackbars:[...a,n]}}case"DEQUEUE_SNACKBAR":{const{snackbars:t}=e;t.shift();return{...e,snackbars:[...t]}}case"SET_LOADING":{const{loading:n}=t.payload;return{...e,loading:n}}case"SET_DIALOG":{const{dialogId:n,data:a}=t.payload,{dialogs:r}=e;return{...e,dialogs:{...r,[n]:a}}}default:return e}};const S="LOGIN_VIEW",I="LIST_VIEW",C="PROJECT_VIEW",x="empty",T="edit",R="process",$="done",A="error",P="configs",D="envs",N="stacks",M="frame",U="cstack";function _(e={},t){switch(t.type){case E:{const{graphId:n,data:a}=t.payload,r=e[n];return{...e,[n]:{...r,...a}}}default:return e}}function L(e,t){return(n,a)=>{const r=void 0===n;return t(a)||r?e(n,a):n}}function F(e={},t){switch(t.type){case y:{const{panelId:n,label:a}=t.payload;return{...e,[n]:{label:a,saved:!1,hidden:!0,selected:!1}}}case h:{const{panelId:n,data:a}=t.payload,r=e[n];return{...e,[n]:{...r,...a}}}case g:{const{data:e}=t.payload;return{...e}}case b:{const{func:n}=t.payload,a={};for(const[t,r]of Object.entries(e)){const e=n(t,r);a[t]={...r,...e}}return a}default:return e}}const z=Object(s.c)({configs:L(F,e=>!!e.payload&&e.payload.type===P),envs:L(F,e=>!!e.payload&&e.payload.type===D),stacks:L(F,e=>!!e.payload&&e.payload.type===N)});function G(e={},t){switch(t.type){case p:{const{data:n}=t.payload;return{...e,...n}}default:return e}}var B=function(e={},t){switch(t.type){case m:{const{data:n}=t.payload;return{...e,...n}}default:{const{graphs:n,panels:a,status:r}=e;return{...e,graphs:_(n,t),panels:z(a,t),status:G(r,t)}}}};const H={status:"empty",code:"",metadata:B(void 0,{type:"INIT"})};var W=function(e=H,t){switch(t.type){case f:{const{data:n}=t.payload;return{...e,...n}}default:{const{metadata:n}=e;return{...e,metadata:B(n,t)}}}};var J=function(e={},t){switch(t.type){case d:case f:default:if(t.payload&&t.payload.projectId){const{projectId:n}=t.payload,a=e[n];return{...e,[n]:W(a,t)}}return e;case v:{const{projectId:n}=t.payload,{[n]:a,...r}=e;return{...r}}case j:return{}}};var V=function(e={},t){switch(t.type){case i:{const{userId:n}=t.payload;return{...e,userId:n}}case u:{const{title:n}=t.payload;return{...e,title:n}}case O:{const{projectId:n}=t.payload;return{...e,selectedProjectId:n}}default:{const{notifications:n,projects:a}=e;return{...e,notifications:w(n,t),projects:J(a,t)}}}},q=n("sINF");const K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d;var X=Object(s.e)(V,K(Object(s.a)(q.a)));const Y=e=>({type:i,payload:{userId:e}});const Q=e=>({type:u,payload:{title:e}});function Z(e){return e}function ee(e){return Z(e).userId}function te(e){const t=ee(e),n=ae(e);return t?n?C:I:S}function ne(e){return Z(e).title}function ae(e){return Z(e).selectedProjectId}function re(e){return e.label}function ce(e){return e.projects}function oe(e){return Object.keys(ce(e))}function le(e,t){return t||(t=ae(e)),ce(e)[t]}function se(e,t){const{items:n}=le(e,t);return n}function ie(e,t){const{status:n}=le(e,t);return n}function ue(e,t){return le(e,t).metadata}function de(e,t){const{code:n,items:a,error:r}=le(e,t);return{code:""!==n,items:Boolean(a),error:Boolean(r)}}function fe(e){return se(e).graphs}function me(e){return ue(e).mainGraphId||"funcs"}function pe(e){const t=be(e,me(e));let n="states";if(t.length>0){const a=t[0],r=se(e),{form:c}=r.funcs[a];["halt","not found","non-func","unknown"].includes(c)||(n=a)}return n}function Ee(e){const t=me(e);return ue(e).focusedGraph||t}function ye(e,t){const{graph:n}=he(e,t),a=[];for(const[e,t]of Object.entries(n))a.push(e),a.concat(Object.keys(t));return a}function he(e,t){return fe(e)[t]}function ge(e,t){return function(e){return ue(e).graphs}(e)[t]||{}}function be(e,t){return ge(e,t).selectedNodes||[]}function ve(e,t){const n=se(e);switch(t){case"funcs":return n.funcs;case"states":default:return n.configs}}function je(e){return[me(e),pe(e)].flatMap(t=>{return ke(be(e,t),ve(e,t))})}function Oe(e){return[me(e),pe(e)].flatMap(t=>{return ke(function(e,t){return ge(e,t).hoveredNodes||[]}(e,t),ve(e,t))})}function ke(e,t){const n=new Set;if(t)for(const a of e){const{astLink:e,expr:r}=t[a];let c=[];e?c=e:r&&(c=[r]),c.forEach(e=>n.add(e))}return[...n]}function we(e){return e.notifications}function Se(e){const{snackbars:t}=we(e);return t[0]}function Ie(e){return function(e,t){const{dialogs:n}=we(e);return n[t]}(e,"rename")}function Ce(e){return ue(e).panels}function xe(e,t){const n=ae(X.getState());return{type:E,payload:{projectId:n,graphId:e,data:t}}}function Te(e,t){return n=>{const a=be(X.getState(),e),r=new Set([...a,...t]);n(xe(e,{selectedNodes:[...r]})),n(Je())}}function Re(e,t){return xe(e,{hoveredNodes:t})}function $e(e,t){return n=>{n(xe(e,{selectedEdges:t}));const a=X.getState(),{graph:r}=he(a,e),c=me(a),o=new Set;for(const e of t){const[t,n]=e.split("-"),a=r[t][n],{calls:c}=a;if(c)for(const e of c)o.add(e)}n(function(e,t){return xe(e,{suggestedNodes:t})}(c,[...o]))}}const Ae=e=>({type:"QUEUE_SNACKBAR",payload:{text:e}}),Pe=()=>({type:"DEQUEUE_SNACKBAR"}),De=e=>({type:"SET_DIALOG",payload:{dialogId:"rename",data:e}});function Ne(e,t,n){const a=ae(X.getState());return{type:h,payload:{projectId:a,type:e,panelId:t,data:n}}}function Me(e,t,n){return{type:g,payload:{projectId:e,type:t,data:n}}}const Ue=(e,t)=>Ne(e,t,{hidden:!0}),_e=(e,t)=>Ne(e,t,{hidden:!1}),Le=(e,t)=>Ne(e,t,{saved:!0}),Fe=(e,t)=>Ne(e,t,{saved:!1}),ze=(e,t)=>Ne(e,t,{selected:!0}),Ge=(e,t)=>Ne(e,t,{selected:!1});function Be(e,t){return`${t}-${e}`}const He=e=>_e(D,e);function We(e,t){const n=ae(X.getState());return{type:b,payload:{projectId:n,type:e,func:t}}}function Je(){return e=>{e(function(){const e=X.getState(),t=pe(e),n=be(e,t);return We(P,(e,t)=>n.includes(e)?{selected:!0,hidden:!1}:{hidden:!0})}()),e(Ve()),e(qe())}}function Ve(){const e=X.getState(),t=se(e),{configs:n}=Ce(e),a=[];for(const[e,r]of Object.entries(n))if(!r.hidden&&r.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e].env;n&&a.push(n)}}return We(D,(e,t)=>a.includes(e)?{hidden:!1}:{hidden:!0})}function qe(){const e=X.getState(),t=se(e),{configs:n}=Ce(e),a=[];for(const[e,r]of Object.entries(n))if(!r.hidden&&r.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e],{[M]:r,[U]:c}=n,o=Be(r||c,r?M:U);a.push(o)}}return We(N,(e,t)=>a.includes(e)?{hidden:!1}:{hidden:!0})}function Ke(e){return t=>{const n=se(X.getState(),e);n.configs&&t(function(e){return t=>{const n=se(X.getState(),e),a={};for(const[e,t]of Object.entries(n.configs)){const{form:r,states:c}=t;let o;if(c){const e=c[0],t=n.states[e];switch(t.form){case"halt":if(t.results){o=`[ ${t.results.map(e=>{const{type:t,name:a,valString:r}=n.vals[e];let c;switch(t){case"closure":c=a;break;case"bool":c=r}return c}).join(", ")} ]`}break;default:o=t.exprString}}const l=`${re(t)||e}: ${r} - ${o}`;a[e]=Xe(l)}t(Me(e,P,a))}}(e)),n.envs&&t(function(e){return t=>{const n=se(X.getState(),e),a={};for(const[e,t]of Object.entries(n.envs)){const n=t.map(e=>e.varString).join(", "),r=`${re(t)||e}: [ ${n} ]`;a[e]=Xe(r)}t(Me(e,D,a))}}(e)),(n.frames||n.cstacks)&&t(function(e){return t=>{const n=se(X.getState(),e),a={};if(n.frames)for(const[e,t]of Object.entries(n.frames)){const{descs:n}=t;let r=`${re(t)||e}: `;n.length>1?r+=`[ ${n[0]}, ... +${n.length-1} ]`:r+=`[ ${n[0]} ]`,a[Be(e,M)]={...Xe(r),frame:e}}if(n.cstacks)for(const[e,t]of Object.entries(n.cstacks)){let n=`${re(t)||e}`;a[Be(e,U)]={...Xe(n),cstack:e}}t(Me(e,N,a))}}(e))}}function Xe(e){return{label:e,saved:!1,hidden:!0,selected:!1}}const Ye=e=>({type:d,payload:{projectId:e}}),Qe=(e,t)=>({type:f,payload:{projectId:e,data:t}}),Ze=e=>({type:v,payload:{projectId:e}}),et=()=>({type:j});function tt(e){return t=>{if(e){const n=X.getState(),{name:a}=le(n,e);t(Q(a||e))}t({type:O,payload:{projectId:e}})}}const nt=(e,t)=>({type:m,payload:{projectId:e,data:t}});function at(e,t){const n=ee(X.getState());return fetch(`/api/${n}/${e}`,{method:t})}function rt(e,t){const n=ee(X.getState());return fetch(`/api/${n}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function ct(){return async function(e){const t=await at("create","GET"),n=(await t.json()).id;return e(Ye(n)),e(tt(void 0)),n}}function ot(e){return async function(t){let n=X.getState(),a=le(n,e);a.status!==x&&(await t(st(e)),a=le(n=X.getState(),e));const r=await t(ct()),{code:c,analysis:o}=a;t(Qe(r,{code:c,analysis:o})),t(tt(r))}}function lt(e){return async function(t){const n=X.getState(),a=ie(n,e),r=de(n,e);let c=!1;switch(a){case T:r.code||t(st(e));break;case R:await t(ut(e)),c=ie(X.getState(),e)===R;break;case $:r.items||(await t(ut(e)),t(Ke(e)));break;case A:r.error||await t(ut(e))}return c}}function st(e){return async function(t){const n=await at(`projects/${e}/code`,"GET"),{code:a}=await n.json();t(Qe(e,{code:a}))}}function it(e,t){return n=>{const a=X.getState(),{status:r}=le(a,e);switch(r){case x:case T:{let a=T;return""===t&&(a=x),n(Qe(e,{status:a,code:t})),rt(`projects/${e}/save`,{code:t})}}}}function ut(e){return async function(t){const n=await at(`projects/${e}/data`,"GET");switch(n.status){case 200:{const a=await n.json();t(Qe(e,a));break}case 204:break;case 412:t(Ae("Project data request rejected"))}}}function dt(e){return async function(t){switch(await t(lt(e)),ie(X.getState(),e)){case R:t(Ae("Project still processing"));break;default:{const t=le(X.getState(),e),n={};for(const[e,a]of Object.entries(t))["analysis","code","items"].includes(e)&&(n[e]=a);const a=JSON.stringify(n,null,2),r=new Blob([a],{type:"application/json"}),c=URL.createObjectURL(r),o=`aam-vis-${e}.json`,l=document.createElement("a");Object.assign(l,{href:c,download:o}),document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(c);break}}}}var ft=n("bXiM"),mt=n("lO0E"),pt=n("ofer"),Et=n("Z3vd"),yt=n("bWLx"),ht=n("YTst"),gt=n("r9w1");var bt=function(){const e=Object(l.c)(),[t,n]=Object(a.useState)("guest"),c=!/^\w+$/.test(t);return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(gt.a,{label:"username",value:t,onChange:e=>n(e.target.value),error:c,helperText:"You can use letters, numbers, & underscores"}),r.a.createElement(Et.a,{onClick:()=>e(function(e){return t=>{t(Y(e))}}(t)),disabled:c},"login"))},vt=n("eD//"),jt=n("tVbE"),Ot=n("IsqK"),kt=n("TjOe"),wt=n("PsDL"),St=n("dxKC"),It=n.n(St),Ct=n("WUv8"),xt=n.n(Ct),Tt=n("FrwU"),Rt=n.n(Tt),$t=n("csfp"),At=n("gd/W"),Pt=n("jjAL"),Dt=n("ZuSV"),Nt=n.n(Dt);var Mt=function(e){const{items:t}=e,[n,c]=Object(a.useState)(void 0);function o(){c(void 0)}const l=t.map(e=>{const{label:t,callback:n}=e;return r.a.createElement(Pt.a,{key:t,onClick:()=>{o(),n()}},t)});return r.a.createElement(a.Fragment,null,r.a.createElement($t.a,{title:"More"},r.a.createElement(wt.a,{color:"inherit",onClick:function(e){c(e.currentTarget)}},r.a.createElement(Nt.a,null))),r.a.createElement(At.a,{anchorEl:n,getContentAnchorEl:void 0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(n),onClose:o},l))},Ut=n("iNvf");var _t=function(e){const{item:t}=e,{debug:n}=t;if(!n)return null;let a;return a=n instanceof String?r.a.createElement(pt.a,null,n):n instanceof Array?n.map((e,t)=>r.a.createElement(pt.a,{key:t},e)):r.a.createElement(pt.a,null,"Invalid debug property type: ",typeof n),r.a.createElement(Wt,{icon:r.a.createElement(Ut.a,null),tooltip:"Show debug"},a)},Lt=n("/HlT");class Ft extends a.Component{constructor(e){super(e),this.state={error:!1}}static getDerivedStateFromError(e){return{error:!0}}componentDidCatch(e,t){}render(){const{children:e,onReset:t}=this.props;return this.state.error?r.a.createElement(en,{content:"Error caught",buttons:r.a.createElement(zt,{onClick:t})}):e}}function zt(e){const{onClick:t}=e;return r.a.createElement($t.a,{title:"Restart"},r.a.createElement(wt.a,{size:"small",onClick:t},r.a.createElement(Lt.a,null)))}var Gt=function(e){const{children:t}=e,[n,c]=Object(a.useState)(0);return r.a.createElement(Ft,{key:n,onReset:()=>c(n+1)},t)},Bt=n("5Gel"),Ht=n("ucgz");var Wt=Object(Ht.a)({paper:{padding:"1em"}})((function(e){const{icon:t,tooltip:n,children:c,classes:o}=e,[l,s]=Object(a.useState)(void 0);return r.a.createElement(a.Fragment,null,r.a.createElement($t.a,{title:n},r.a.createElement(wt.a,{size:"small",onClick:function(e){e.stopPropagation(),s(e.currentTarget)}},t)),r.a.createElement(Bt.a,{open:Boolean(l),anchorEl:l,onClose:function(e){e.stopPropagation(),s(void 0)},classes:{paper:o.paper}},c))})),Jt=n("hlie");function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var qt=function(e){const{content:t,tooltip:n,onClick:a,style:c}=e;return r.a.createElement($t.a,{title:n},r.a.createElement(Jt.a,Vt({onClick:e=>{e.stopPropagation(),a()}},{style:c}),r.a.createElement(pt.a,{display:"inline",style:{cursor:"pointer"}},t)))},Kt=n("kKU3"),Xt=n("iae6"),Yt=n("de8u");var Qt=function(e){const{status:t,variant:n="circular"}=e;let a;switch(n){case"circular":a=r.a.createElement(Zt,{style:{justifyContent:"center",alignItems:"center"}},r.a.createElement(Kt.a,{in:!0,style:{transitionDelay:"1000ms"}},r.a.createElement(Xt.a,null)),r.a.createElement(Kt.a,{in:!0,style:{transitionDelay:"200ms"}},r.a.createElement(pt.a,{variant:"h6",style:{marginTop:"2em"}},t)));break;case"linear":a=r.a.createElement(Zt,null,r.a.createElement(Yt.a,null),r.a.createElement(pt.a,{variant:"h6",style:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},this.props.status))}return a};var Zt=function(e){const{overflow:t,children:n,style:c}=e,o=Object(a.useContext)(pn),{height:l,width:s}=o;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:l||"100%",width:s||"100%",overflow:t||"hidden",...c}},r.a.createElement(Gt,null,n))};var en=function(e){const{content:t,buttons:n}=e;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(pt.a,{variant:"h6",style:{margin:"0 1em"}},t),n))},tn=n("/EAt"),nn=n("Imu7"),an=n("Uf6+"),rn=n("sRsu"),cn=n("3PeG");var on=function(e){const t=e.labels.map(e=>r.a.createElement(cn.a,{key:e},e)),n=e.entries.map((e,t)=>{const n=e.map((e,t)=>r.a.createElement(cn.a,{key:t},e));return r.a.createElement(rn.a,{key:t},n)});return r.a.createElement(tn.a,{size:"small"},r.a.createElement(nn.a,null,r.a.createElement(rn.a,null,t)),r.a.createElement(an.a,null,n))};function ln(e){const t=e.theme;return r.a.createElement(mt.a,{variant:"dense",style:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,minHeight:"auto"}},r.a.createElement(pt.a,null,e.content))}ln=Object(ht.a)(ln);var sn=function(e){const{label:t,panels:n}=e,c=[...Object.entries(n).filter(([t,n])=>{const{saved:a}=n,r=a;let c=!0;return e.onFilterSaved&&(c=e.onFilterSaved([t,n])),r&&c}).map(e.onGenerate),...Object.entries(n).filter(([t,n])=>{const{saved:a,hidden:r}=n,c=!a&&!r;let o=!0;return e.onFilterUnsaved&&(o=e.onFilterUnsaved([t,n])),c&&o}).map(e.onGenerate)];return r.a.createElement(a.Fragment,null,r.a.createElement(ln,{content:t}),r.a.createElement("div",{style:{overflowY:"auto"}},c))};var un=function(e){const{children:t,childrenStyle:n}=e,a=r.a.Children.map(t,e=>{if(e)return r.a.cloneElement(e,{style:n})});return r.a.createElement("div",null,a)};function dn(){return(dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function fn(e){const{horizontal:t,onMouseDown:n}=e;let a;return a=t?{height:5,cursor:"ns-resize"}:{width:5,cursor:"ew-resize"},r.a.createElement("div",{style:{backgroundColor:"darkgray",...a},onMouseDown:n})}var mn=function(e){const{horizontal:t,children:n}=e,c=Object(a.useRef)(void 0),[o,l]=Object(a.useState)(!1),s=n[0].props,i=parseInt(s.width||s.height),[u,d]=Object(a.useState)(i);function f(){o&&l(!1)}let m,p,E;t?(m="height",p="horizontal",E="ns-resize"):(m="width",p="vertical",E="ew-resize");const[y,h]=n;return r.a.createElement("div",{ref:c,style:{display:"flex",flexDirection:t?"column":"row",flex:"1 1 auto",cursor:o?E:"default",minHeight:0},onMouseMove:function(e){if(o){!function(){const e=window.getSelection();e&&e.removeAllRanges()}();const n=c.current.getBoundingClientRect();let a;a=t?(e.clientY-n.y)/n.height*100:(e.clientX-n.x)/n.width*100,d(a)}},onMouseUp:f,onMouseLeave:f},r.a.createElement(pn.Provider,{value:{[m]:`${u}%`}},y),r.a.createElement(fn,dn({[p]:!0},{onMouseDown:function(){l(!0)}})),r.a.createElement(pn.Provider,{value:{[m]:`${100-u}%`}},h))},pn=r.a.createContext({});function En(e){const{projectId:t}=e,n=Object(l.d)(e=>le(e,t)),a=Object(l.c)(),c=r.a.createElement(Ot.a,{style:{flex:"0 0 10em"}},n.analysis),o=r.a.createElement(Ot.a,{style:{overflow:"hidden",textOverflow:"ellipsis"}},n.name||"unnamed"),s=r.a.createElement(Ot.a,{style:{flex:"0 0 10em"}},t),i=r.a.createElement(Ot.a,{style:{flex:"0 0 10em"}},n.status);let u;u=n.status==R?r.a.createElement($t.a,{title:"Cancel processing"},r.a.createElement(wt.a,{onClick:()=>a(function(e){return async function(t){switch((await at(`projects/${e}/cancel`,"POST")).status){case 200:t(Qe(e,{status:T}));break;case 409:t(Ae(`Project ${e} cancel request denied - already finished`));break;default:t(Ae(`Project ${e} cancel request failed`));break}}}(t))},r.a.createElement(xt.a,null))):r.a.createElement($t.a,{title:"Delete"},r.a.createElement(wt.a,{onClick:()=>a(function(e){return async function(t){const n=ae(X.getState());switch((await at(`projects/${e}/delete`,"POST")).status){case 205:t(Ze(e)),n==e&&t(tt(void 0));break;default:t(Ae(`Project ${e} delete request failed`))}}}(t))},r.a.createElement(Rt.a,null)));const d=r.a.createElement(kt.a,null,r.a.createElement(Mt,{items:[{label:"Rename",callback:()=>a(De(t))},{label:"Export",callback:()=>a(dt(t))}]}),r.a.createElement($t.a,{title:"Fork"},r.a.createElement(wt.a,{onClick:()=>a(ot(t))},r.a.createElement(It.a,null))),u);return r.a.createElement(jt.a,{button:!0,key:t,onClick:()=>a(tt(t)),align:"flex-start",style:{paddingRight:160}},c,o,s,i,d)}var yn=function(){const e=Object(l.d)(oe),t=Object(l.c)(),n=Object(a.useRef)(void 0);async function c(){await t((async function(e){const t=await at("all","GET");let n=!1;switch(t.status){case 200:{const a=await t.json();for(const[t,r]of Object.entries(a)){const{status:a,name:c,analysis:o}=r;e(Qe(t,{status:a,name:c,analysis:o})),a===R&&(n=!0)}break}default:n=!0}return n}))&&(n.current=setTimeout(c,1e3))}Object(a.useEffect)(()=>(c(),()=>{clearTimeout(n.current)}),[]);const o=e.map(e=>r.a.createElement(En,{key:e,projectId:e}));return r.a.createElement(vt.a,{style:{overflowY:"auto"}},o)},hn=n("1AYd"),gn=n("cVXz"),bn=n("VrN/"),vn=n.n(bn);n("8wdy");function jn(e){const{onClick:t}=e;return r.a.createElement(Et.a,{onClick:t,variant:"contained",color:"secondary"},"process")}var On=function(e){const{edit:t,error:n}=e,c=["0-cfa","1-cfa","2-cfa"],o=Object(a.useRef)(void 0),s={lineWrapping:!0,lineNumbers:!0,readOnly:!t},i=Object(a.useRef)(vn.a),[u,d]=Object(a.useState)({analysis:c[0]}),f=Object(l.d)(ae),{code:m,error:p}=Object(l.d)(le),E=Object(l.c)();function y(){return i.current.getDoc().getValue()}let h,g;if(Object(a.useEffect)(()=>(i.current=vn.a.fromTextArea(o.current,s),()=>{i.current.toTextArea(),E(it(f,y()))}),[]),Object(a.useEffect)(()=>{!function(e){i.current.getDoc().setValue(e)}(m)},[m]),t){h=r.a.createElement(pt.a,null,"Input code for analysis");const e=c.map(e=>r.a.createElement(Pt.a,{key:e,value:e},e));g=r.a.createElement(mt.a,null,r.a.createElement("div",{style:{flex:"1 1 auto"}},r.a.createElement(hn.a,null,"Analysis"),r.a.createElement(gn.a,{value:u.analysis,onChange:e=>{const t=e.target.value;d({...u,analysis:t})}},e)),r.a.createElement(jn,{onClick:function(){E(function(e,t,n){return async function(a){switch(await a(it(e,t)),(await rt(`projects/${e}/process`,n)).status){case 200:a(Qe(e,{status:"process"}));break;case 412:a(Ae("Project process request rejected"))}}}(f,y(),u))}}))}else n&&(h=r.a.createElement(a.Fragment,null,r.a.createElement(pt.a,{variant:"h3"},"Analysis error"),r.a.createElement(pt.a,null,p)));return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"auto"}},h,r.a.createElement("textarea",{ref:e=>o.current=e,style:{flex:"1 1 auto",overflow:"auto",height:"100%"}}),g)},kn=n("ROFb"),wn=n.n(kn);var Sn=function(e,t){return{group:"nodes",data:{id:e,label:`${e}\n${t}`,form:t}}};var In=function(e,t,n,a){const{label:r="",style:c}=a;return{group:"edges",data:{id:e,label:r,source:t,target:n,style:c}}};var Cn=function(e,t){const n=t.graphs[e],{graph:a,start:r}=n;function c(e,t){const n=[];for(const[a,r]of Object.entries(e)){let e;t&&(e=t[a].form),n.push(Sn(a,e));for(const[c,o]of Object.entries(r)){t&&(e=t[c].form),n.push(Sn(c,e));const r=`${a}-${c}`;n.push(In(r,a,c,o))}}return n}switch(e){case"funcs":return c(a,t.funcs);case"states":default:return c(a,t.configs)}};function xn(e){const t=Object(a.useRef)(void 0),n=Object(a.useRef)(void 0),c=Object(a.useRef)(!1),{graphId:o,edgePredicate:s,onNodeSelect:i,onNodeUnselect:u,theme:d}=e,f=Object(l.d)(se);if(!f.graphs[o])return r.a.createElement(en,{content:`'${o}' graph undefined`});const m=Cn(o,f),p=Object(l.d)(e=>ge(e,o)),E=Object(l.d)(Ee)===o,y=Object(l.c)(),h={style:[{selector:"node",style:{label:"data(label)","text-wrap":"wrap"}},{selector:"node:selected",style:{"background-color":d.palette.select.main}},{selector:"edge",style:{label:"data(label)","curve-style":"bezier","target-arrow-shape":"triangle","line-style":(g="line-style",b="solid",e=>{const t=e.data("style");let n;return n=t&&t[g]?t[g]:b})}},{selector:"edge:selected",style:{"line-color":d.palette.select.main,"target-arrow-color":d.palette.select.main}},{selector:".suggested",style:{"background-color":d.palette.suggest.main}},{selector:e=>e.hasClass("suggested")&&e.selected(),style:{"background-color":d.palette.suggest.dark}},{selector:".hovered",style:{"background-color":d.palette.hover.main}}],headless:!0};var g,b;const v=Object(a.useRef)(wn()(h)).current,{positions:j,selectedNodes:O=[],selectedEdges:k=[],hoveredNodes:w=[],suggestedNodes:S=[]}=p;function I(e){const t=v.$("node:selected");switch(e.key){case"ArrowLeft":const e=t.incomers().nodes();1==e.length&&(t.unselect(),e.select());break;case"ArrowRight":const n=t.outgoers().nodes();1==n.length&&(t.unselect(),n.select())}}function C(e,t){v.batch(()=>{for(const n of e){v.getElementById(n).addClass(t)}})}function x(e,t){v.batch(()=>{for(const n of e){v.getElementById(n).removeClass(t)}})}return Object(a.useEffect)(()=>(v.mount(t.current),()=>v.unmount()),[]),Object(a.useEffect)(()=>{if(E)return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[E]),Object(a.useEffect)(()=>(["tap","select","unselect","mouseover","mouseout"].forEach(e=>v.off(e)),v.on("tap",()=>y(function(e){const t=ae(X.getState());return nt(t,{focusedGraph:e})}(o))),v.on("select","node",e=>{if(c.current){const t=e.target.id();y(Te(o,[t])),i&&i(t)}}),v.on("unselect","node",e=>{if(c.current){const t=e.target.id();y(function(e,t){return n=>{const a=be(X.getState(),e),r=new Set(a);t.forEach(e=>r.delete(e)),n(xe(e,{selectedNodes:[...r]})),n(Je())}}(o,[t])),u&&u(t)}}),v.on("mouseover","node",e=>{const t=e.target.id();w!=[t]&&y(Re(o,[t]))}),v.on("mouseout","node",e=>{y(Re(o,[]))}),v.on("select","edge",e=>{if(c.current){const t=e.target;if(s(t)){const e=t.id();y($e(o,[e]))}else t.unselect()}}),v.on("unselect","edge",e=>{c.current&&y($e(o,[]))}),v.add(m),j?(v.nodes().positions(e=>j[e.data("id")]),v.fit()):v.layout({name:"cose",directed:!0}).run(),()=>{const e={};for(const t of m){const n=t.data.id;e[n]=v.$id(n).position()}y(function(e,t){return xe(e,{positions:t})}(o,e)),v.nodes().remove()}),[o]),Object(a.useEffect)(()=>{return c.current=!1,function(e){e.forEach(e=>v.$id(e).select())}([...O,...k]),c.current=!0,()=>{c.current=!1,function(e){e.forEach(e=>v.$id(e).unselect())}([...O,k]),c.current=!0}},[O,k]),Object(a.useEffect)(()=>(c.current=!1,C(S,"suggested"),c.current=!0,()=>{c.current=!1,x(S,"suggested"),c.current=!0}),[S]),Object(a.useEffect)(()=>(c.current=!1,C(w,"hovered"),c.current=!0,()=>{c.current=!1,x(w,"hovered"),c.current=!0}),[w]),Object(a.useEffect)(()=>{v.resize()},[n.current]),Object(a.useEffect)(()=>{n.current=t.current.getBoundingClientRect()}),r.a.createElement("div",{style:{flex:"1 1 1%",display:"block",minHeight:0,width:"100%"},ref:t})}var Tn=xn=Object(ht.a)(xn);function Rn(e){const{content:t,theme:n}=e;return r.a.createElement(mt.a,{variant:"dense",style:{backgroundColor:n.palette.grey[300],color:n.palette.text.primary,width:"100%",minHeight:"unset"}},r.a.createElement(pt.a,null,t))}Rn=Object(ht.a)(Rn);var $n=function(){const e=Object(l.d)(me),t=Object(l.d)(pe);return r.a.createElement(mn,{horizontal:!0},r.a.createElement(Zt,{height:"50%"},r.a.createElement(Rn,{content:e}),r.a.createElement(Tn,{graphId:e,edgePredicate:e=>!1})),r.a.createElement(Zt,{height:"50%"},r.a.createElement(Rn,{content:t}),r.a.createElement(Tn,{graphId:t,edgePredicate:e=>{const t=e.data("style");return!!t&&"dashed"===t["line-style"]}})))},An=Object(a.createContext)(void 0),Pn=n("rwtN");function Dn(e){const{lineId:t,chId:n,theme:c}=e,{ast:o}=Object(l.d)(se),s=Object(l.d)(je),i=Object(l.d)(Oe),{astNodes:u,code:d,hover:f,click:m}=Object(a.useContext)(An),p=d[t][n],E=[parseInt(t),parseInt(n)],y=[parseInt(t),parseInt(n)+p.length];let h;for(const e of Object.keys(u))j(e,E,y)&&(h?g(o[e],o[h])<0&&(h=e):h=e);function g(e,t){const{start:n,end:a}=e,{start:r,end:c}=t,o=b(n,a),l=b(r,c);if(o<l)return-1;if(o>l)return 1;{const e=v(n,a),t=v(r,c);return e<t?-1:e>t?1:0}}function b(e,t){return t[0]-e[0]}function v(e,t){return t[1]-e[1]}function j(e,t,n){const{start:a,end:r}=o[e],c=O(a,t)<=0,l=O(n,r)<=0;return c&&l}function O(e,t){const[n,a]=e,[r,c]=t;return n<r?-1:n>r?1:a<c?-1:a>c?1:0}const k=p.match(/lambda|let|if|\#t|\#f/),w=i.find(e=>j(e,E,y)),S=s.find(e=>j(e,E,y));let I=p;return w?I=r.a.createElement(Nn,{content:p,color:c.palette.hover.light}):S&&(I=r.a.createElement(Nn,{content:p,color:c.palette.select.light})),r.a.createElement(Nn,{key:n,content:I,textColor:k?Pn.a[800]:void 0,onMouseOver:()=>f(h),onClick:()=>m(h),style:{cursor:"pointer"}})}function Nn(e){const{content:t,color:n,textColor:a,style:c,onClick:o,onMouseOver:l}=e;return r.a.createElement("span",{onMouseOver:l,onClick:o,style:{display:"inline-block",backgroundColor:n||"inherit",color:a||"inherit",...c}},t)}var Mn=Dn=Object(ht.a)(Dn);function Un(e){const{lineId:t,lastLine:n,width:a,theme:c,onSet:o}=e;return r.a.createElement("div",{style:{display:"inline-block",width:a,fontFamily:"Roboto Mono, Courier New, Courier, monospace",backgroundColor:c.palette.grey[200],textAlign:"right",padding:"0 5px"}},r.a.createElement(pt.a,{variant:"body2",ref:function(e){if(n){const t=e.getBoundingClientRect().width;a!==t&&setGutterWidth(t)}},color:"textSecondary"},parseInt(t)+1))}Un=Object(ht.a)(Un);var _n=function(e){const{lineId:t}=e,{code:n,unhover:c,gutterWidth:o,setGutterWidth:l}=Object(a.useContext)(An),s=n[t],i=Object.keys(s).map(e=>r.a.createElement(Mn,{key:e,lineId:t,chId:e}));return r.a.createElement("div",{key:t},r.a.createElement(Un,{lineId:t,lastLine:t===Object.keys(n).length-1,width:o,onSet:l}),r.a.createElement(pt.a,{onMouseLeave:()=>c(),variant:"body2",style:{display:"inline-block",verticalAlign:"bottom",fontFamily:'Roboto Mono, "Courier New", Courier, monospace'}},i))};var Ln=function(){const{code:e}=Object(l.d)(le),t=Object(l.d)(me),n=Object(l.d)(e=>ye(e,t)),c=Object(l.d)(e=>ve(e,t)),o=Object(l.d)(pe),s=Object(l.d)(e=>ye(e,o)),i=Object(l.d)(e=>ve(e,o)),{graphs:u}=Object(l.d)(se),d=Object(l.c)(),f={};u[t]&&(f[t]={nodeIds:n,refData:c}),u[o]&&(f[o]={nodeIds:s,refData:i});const[m,p]=Object(a.useState)({}),[E,y]=Object(a.useState)({}),[h,g]=Object(a.useState)("auto");function b(){for(const e of Object.keys(f))d(Re(e,void 0))}Object(a.useEffect)(()=>{const e={};for(const[t,n]of Object.entries(f)){const{nodeIds:a,refData:r}=n;for(const n of a){const a=ke([n],r);for(const r of a)e[r]?e[r][t]?e[r][t].push(n):e[r][t]=[n]:e[r]={[t]:[n]}}}p(e)},[t,o]),Object(a.useEffect)(()=>{const t={};e.split(/\r\n|\n/).forEach((e,n)=>{let a=0;const r={};e.match(/\(|\)|\[|\]|[^\s\(\)\[\]]+|\s+/g).forEach(e=>{r[a]=e,a+=e.length}),t[n]=r}),y(t)},[e]);const v=Object.keys(E).map(e=>r.a.createElement(_n,{key:e,lineId:e}));return r.a.createElement(An.Provider,{value:{astNodes:m,code:E,hover:function(e){if(b(),e&&m[e])for(const[t,n]of Object.entries(m[e]))d(Re(t,n))},unhover:b,click:function(e){const t=m[e],n=Object.keys(t).filter(e=>"funcs"!==e);if(n.length>0){const e=n[0],a=t[e];d(Te(e,a))}},gutterWidth:h,setGutterWidth:g}},r.a.createElement("div",{style:{whiteSpace:"pre"}},v))},Fn=n("30+C"),zn=n("oa/T"),Gn=n("G08z"),Bn=n("lFb4"),Hn=n("Dl3h"),Wn=n("aXMt"),Jn=n("5sOi"),Vn=n("U2vl"),qn=n("vn1N"),Kn=n("yKwf"),Xn=n("3Qh7"),Yn=n("BNdo");function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Zn(e){const{panelId:t,panelType:n,children:c,theme:o,classes:s,onSelect:i,onUnselect:u,onMouseOver:d,onMouseOut:f}=e,m=Object(l.d)(Ce)[n][t],p=Object(l.c)(),[E,y]=Object(a.useState)(!1);const{label:h,selected:g,saved:b}=m;let v,j;j=e.disableSelect?r.a.createElement(ea,{icon:r.a.createElement(Wn.a,{color:"disabled"}),tooltip:e.disableSelectMsg,disabled:!0}):g?r.a.createElement(ea,{icon:r.a.createElement(Vn.a,null),tooltip:"Unselect",onClick:function(){p(Ge(n,t)),u&&u()}}):r.a.createElement(ea,{icon:r.a.createElement(Jn.a,null),tooltip:"Select",onClick:function(){p(ze(n,t)),i&&i()}}),v=b?r.a.createElement(ea,{icon:r.a.createElement(Kn.a,null),tooltip:"Unsave",onClick:()=>p(Fe(n,t))}):r.a.createElement(ea,{icon:r.a.createElement(qn.a,null),tooltip:"Save",onClick:()=>p(Le(n,t))});const O=r.a.createElement(ea,{icon:r.a.createElement(Xn.a,null),tooltip:"Delete",onClick:()=>p(Ue(n,t))});return r.a.createElement(Gn.a,{onMouseOver:()=>{E||(d(),y(!0))},onMouseOut:()=>{E&&(f(),y(!1))},defaultExpanded:!b},r.a.createElement(Bn.a,{expandIcon:r.a.createElement(Yn.a,null),classes:{root:s.panelRoot,content:s.panelContent,expandIcon:s.panelExpandIcon,expanded:s.panelExpanded},style:{backgroundColor:E?o.palette.hover.light:void 0}},j,v,O,r.a.createElement(pt.a,null,h)),r.a.createElement(Hn.a,null,c))}function ea(e){const{icon:t,tooltip:n,disabled:a,onClick:c}=e,o={};return a?(o.disableRipple=!0,o.onClick=e=>{e.stopPropagation()}):o.onClick=e=>{e.stopPropagation(),c()},r.a.createElement($t.a,{title:n},r.a.createElement(wt.a,Qn({size:"small"},o),t))}var ta=Zn=Object(Ht.a)(e=>({panelRoot:{minHeight:0,"&$panelExpanded":{minHeight:0}},panelContent:{alignItems:"center",margin:"5px 0","&$panelExpanded":{margin:"8px 0"}},panelExpandIcon:{padding:"5px 12px"},panelExpanded:{}}),{withTheme:!0})(Zn);function na(){return(na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var aa=function(e){const{envId:t,style:n}=e,{envs:a}=Object(l.d)(se),c=Object(l.c)();return r.a.createElement(qt,na({content:re(a[t])||t,tooltip:`Show environment ${t}`,onClick:()=>c(He(t))},{style:n}))};function ra(){return(ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ca=function(e){const{stackId:t,stackType:n,style:a}=e,c=Object(l.c)(),o=function(e){const t=se(X.getState());switch(e){case U:return t.cstacks;case M:return t.frames}}(n);return r.a.createElement(qt,ra({content:re(o[t])||t,tooltip:`Show stack ${t}`,onClick:()=>c(function(e,t){const n=Be(e,t);return _e(N,n)}(t,n))},{style:a}))};var oa=function(e){const{valId:t}=e,n=Object(l.d)(se),{type:a,astString:c,valString:o}=n.vals[t];let s;switch(a){case"bool":s=o;break;case"closure":s=c;break;default:s=`'${a}' value type unsupported`}return r.a.createElement(pt.a,null,s)};function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function sa(e){const{configId:t}=e,n=Object(l.d)(se),{states:a}=n.configs[t];let c;return a&&(c=a.map(e=>{const{form:t}=n.states[e];switch(t){case"halt":return;default:return r.a.createElement(ia,{key:e,stateId:e})}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},c)}function ia(e){const{stateId:t}=e,n=Object(l.d)(se),{instr:a,frame:c,cstack:o,env:s,vals:i}=n.states[t],u=n.instr[a].exprStrings.join(", "),d=r.a.createElement(pt.a,{display:"inline"},`[ ${u} ]`),f=c||o,m=c?M:U,p=r.a.createElement(ca,la({stackId:f},{stackType:m})),E=s?r.a.createElement(aa,{envId:s}):void 0;let y;return i&&(y=i.map((e,t)=>{const n=e.map(e=>r.a.createElement(oa,{key:e,valId:e}));return r.a.createElement("div",{key:t,style:{flex:"1 1 auto"}},n)})),r.a.createElement(Fn.a,{style:{width:"100%"}},r.a.createElement(zn.a,{style:{padding:8}},r.a.createElement(un,{childrenStyle:{marginRight:5}},d,p,E),r.a.createElement("div",{style:{display:"flex"}},y)))}var ua=function(){const{configs:e}=Object(l.d)(Ce),t=Object(l.d)(se),n=Object(l.d)(pe),a=Object(l.c)();function c(){a(Ve()),a(qe())}const o={onFilterSaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)},onFilterUnsaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)}};return r.a.createElement(sn,la({label:"Configurations",panels:e,onGenerate:function([e,t]){return r.a.createElement(ta,{key:e,panelId:e,panelType:"configs",onMouseOver:()=>a(Re(n,[e])),onMouseOut:()=>a(Re(n,[])),onSelect:c,onUnselect:c},r.a.createElement(sa,{configId:e}))}},o))};var da=function(){const{envs:e}=Object(l.d)(Ce);return r.a.createElement(sn,{label:"Environments",panels:e,onGenerate:function([e,t]){return r.a.createElement(ta,{key:e,panelId:e,panelType:"envs",onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},r.a.createElement(fa,{envId:e}))}})};function fa(e){const{envId:t}=e,n=Object(l.d)(se),{envs:a,instr:c,store:o,vals:s}=n,i=a[t].map(e=>{const t=c[e.instr].exprStrings.join(", "),n=o[e.addr].map(e=>{const{env:t,type:n,astString:a,valString:c}=s[e];let o;switch(n){case"closure":o=a;break;case"bool":o=c;break;default:o=`'${n}' value type unsupported`}const l=t?r.a.createElement(aa,{envId:t}):void 0;return r.a.createElement(un,{key:e,childrenStyle:{marginRight:5}},r.a.createElement(pt.a,{display:"inline"},o),l)});return[e.varString,`[ ${t} ]`,n]});return r.a.createElement(on,{labels:["var","instr","store"],entries:i})}var ma=n("PgHX");var pa=class{constructor(e,t){this.cardIds=e,this.cardType=t,this.selected=void 0}select(e){this.selected=e}unselect(e){this.selected=void 0}get cards(){return this.cardIds}get type(){return this.cardType}},Ea=n("ePBu");function ya(){return(ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ha(e){const{frameId:t,selected:n,theme:a,classes:c,onSet:o,onUnset:s}=e,i=Object(l.d)(se),u=i.frames[t],{form:d,type:f,vals:m,frames:p,cstacks:E,next:y}=u;let h,g,b;switch(d){case"addr":{const{func:e,env:n}=u;h=r.a.createElement(ga,null,r.a.createElement(ca,{stackId:t,stackType:M}),r.a.createElement(ba,{label:"Form"},d),r.a.createElement(ba,{label:"Function"},i.funcs[e].form),r.a.createElement(aa,{envId:n}));break}case"frame":{const{env:e,instr:t,exprString:n}=u,a=i.instr[t].exprStrings.join(", ");h=r.a.createElement(ga,null,r.a.createElement(ba,{label:"Type"},f),r.a.createElement(aa,{envId:e}),r.a.createElement(ba,{label:"Instrumentation"},`[ ${a} ]`)),g=r.a.createElement(pt.a,null,n);break}default:h=r.a.createElement(ga,null,r.a.createElement(ca,{stackId:t,stackType:M}),r.a.createElement(ba,{label:"Form"},d))}p?b=new pa(p,M):E?b=new pa(E,U):y&&(b=new pa([y],M));const v={};b&&(v.classes={root:c.enableHover},v.onClick=n?()=>s():()=>o(b));const j=g?r.a.createElement(va,null,g):null;let O;return m&&(O=m.map((e,t)=>{const n=e.map(e=>r.a.createElement(oa,{key:e,valId:e}));return r.a.createElement("div",{key:t,style:{flex:"1 1 auto"}},n)})),r.a.createElement(Fn.a,ya({key:t},v,{style:{flex:"1 0 0",backgroundColor:n?a.palette.select.light:void 0,cursor:b?"pointer":void 0,minWidth:100}}),r.a.createElement(zn.a,{style:{padding:8}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"}},h,r.a.createElement("div",null,r.a.createElement(_t,{item:u}),j)),r.a.createElement("div",{style:{display:"flex"}},O)))}function ga(e){const{children:t}=e,n=r.a.Children.map(t,e=>r.a.cloneElement(e,{style:{marginRight:"5px"}}));return r.a.createElement("div",null,n)}function ba(e){const{label:t,children:n,style:a}=e;return r.a.createElement($t.a,{title:t},r.a.createElement(pt.a,ya({display:"inline"},{style:a}),n))}function va(e){const{children:t}=e;return r.a.createElement(Wt,{icon:r.a.createElement(Ea.a,null),tooltip:"Show info"},t)}var ja=ha=Object(Ht.a)(e=>({enableHover:{"&:hover":{backgroundColor:`${e.palette.hover.light} !important`}}}),{withTheme:!0})(ha);var Oa=function(e){const{children:t}=e;return r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"5px 0",justifyContent:"center"}},t)};function ka(e){const{cstackId:t,selected:n,onSet:a,onUnset:c}=e,{cstacks:o}=Object(l.d)(se),s=o[t][0];return r.a.createElement(ja,{frameId:s,selected:n,onSet:e=>a(t,e),onUnset:()=>c(t)})}var wa=function(e){const{layer:t,onSet:n,onUnset:c}=e,o=t.cards.map(e=>r.a.createElement(ka,{key:e,cstackId:e,selected:t.selected===e,onSet:n,onUnset:c}));return r.a.createElement(a.Fragment,null,r.a.createElement(Oa,null,o),t.selected?r.a.createElement(Ca,{cstackId:t.selected}):null)};var Sa=function(e){const{layer:t,onSet:n,onUnset:a}=e,c=t.cards.map(e=>r.a.createElement(ja,{key:e,frameId:e,selected:t.selected===e,onSet:t=>n(e,t),onUnset:()=>a(e)}));return r.a.createElement(Oa,null,c)};var Ia=function(e){const{frameId:t}=e,n=Object(l.d)(se),[c,o]=Object(a.useState)([new pa([t],M)]);function s(e,t){const n=u(e);n[n.length-1].select(t),o(n)}function i(e,t){const n=u(e);n[n.length-1].unselect(t),o(n)}function u(e){return c.slice(0,e+1)}return c.map((e,t)=>{let l,u;switch(e.type){case U:l=r.a.createElement(wa,{layer:e,onSet:e=>s(t,e),onUnset:e=>i(t,e)});break;default:l=r.a.createElement(Sa,{layer:e,onSet:(e,n)=>(function(e,t,n){s(e,t),o([...c,n])})(t,e,n),onUnset:e=>i(t,e)})}const d=t===c.length-1,f=function(e){const t=c[e];switch(t.type){case M:for(const e of t.cards){const{frames:t,cstacks:a,next:r}=n.frames[e];if(t||a||r)return!0}return!1;default:return!1}}(t);return d&&f&&(u=r.a.createElement(Oa,null,r.a.createElement(ma.a,{color:"disabled"}))),r.a.createElement(a.Fragment,{key:t},l,u)})};var Ca=function(e){const{cstackId:t}=e,{cstacks:n}=Object(l.d)(se),a=n[t].map(e=>r.a.createElement(Ia,{key:e,frameId:e}));return r.a.createElement("div",{style:{margin:5}},a)};var xa=function(){const{stacks:e}=Object(l.d)(Ce);return r.a.createElement(sn,{label:"Stacks",panels:e,onGenerate:function([e,t]){const{[M]:n,[U]:a}=t;let c;return c=n?r.a.createElement(Ia,{frameId:n}):r.a.createElement(Ca,{cstackId:a}),r.a.createElement(ta,{key:e,panelId:e,panelType:N,onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},r.a.createElement("div",{style:{width:"100%"}},c))}})};function Ta(){const e=Object(l.d)(de);let t=r.a.createElement(Qt,{status:"Downloading"});return e.items&&(t=r.a.createElement(mn,{vertical:!0},r.a.createElement(Zt,{width:"40%"},r.a.createElement($n,null)),r.a.createElement(Zt,null,r.a.createElement(mn,{horizontal:!0},r.a.createElement(Zt,{height:"48%"},r.a.createElement(mn,{vertical:!0},r.a.createElement(Zt,{width:"48%",overflow:"auto"},r.a.createElement(Ln,null)),r.a.createElement(Zt,null,r.a.createElement(xa,null)))),r.a.createElement(Zt,{overflow:"auto"},r.a.createElement(mn,null,r.a.createElement(Zt,{width:"50%",overflow:"auto"},r.a.createElement(ua,null)),r.a.createElement(Zt,{overflow:"auto"},r.a.createElement(da,null)))))))),t}var Ra=function(){const e=Object(l.d)(ae),t=Object(l.d)(ie),n=Object(l.c)(),c=Object(a.useRef)(void 0);async function o(){await n(lt(e))&&(c.current=setTimeout(o,1e3))}let s;switch(Object(a.useEffect)(()=>(o(),()=>{clearTimeout(c.current)}),[]),Object(a.useEffect)(()=>{switch(t){case R:o()}},[t]),t){case x:case T:s=r.a.createElement(On,{edit:!0});break;case R:s=r.a.createElement(Qt,{status:"Processing"});break;case $:s=r.a.createElement(Ta,null);break;case A:s=r.a.createElement(On,{error:!0})}return s},$a=n("q0Gq"),Aa=n.n($a),Pa=n("1J5C"),Da=n.n(Pa),Na=n("vqLa"),Ma=n.n(Na),Ua=n("V/ii"),_a=n.n(Ua),La=n("LwY3"),Fa=n.n(La);var za=Aa()({palette:{secondary:{light:Ma.a[300],main:Ma.a[500],dark:Ma.a[700]},select:{light:Ma.a[100],main:Ma.a[400]},hover:{light:_a.a[100],main:_a.a[400]},suggest:{main:Fa.a[400],dark:Fa.a[700]},warn:{main:Da.a.A700,contrastText:"#fff"}}}),Ga=n("kfFl"),Ba=n("EQI2"),Ha=n("+JwS");var Wa=Object(l.b)(e=>{const t=Ie(e);return{projectId:t,name:t?le(e,t).name:""}},{rename:function(e,t){return async function(n){n(Qe(e,{name:t})),rt(`projects/${e}/save`,{name:t})}},setRenameDialog:De})((function(e){const{projectId:t,name:n,rename:c,setRenameDialog:o}=e,[l,s]=Object(a.useState)(void 0);function i(){o(void 0)}return Object(a.useEffect)(()=>s(n||""),[n]),r.a.createElement(Ga.a,{open:Boolean(t),onClose:i},r.a.createElement(Ba.a,null,r.a.createElement(gt.a,{label:"name",value:l,onChange:e=>s(e.target.value),placeholder:`project ${t} name`})),r.a.createElement(Ha.a,null,r.a.createElement(Et.a,{onClick:i},"cancel"),r.a.createElement(Et.a,{onClick:()=>{i(),c(t,l)}},"rename")))})),Ja=n("79Xs"),Va=n("ZPUd"),qa=n.n(Va);var Ka=function(){const e=Object(l.d)(Se),t=Object(l.c)(),[n,c]=Object(a.useState)(void 0);function o(){clearTimeout(n),t(Pe())}return Object(a.useEffect)(()=>{e&&c(setTimeout(()=>{o()},2e4))},[e]),r.a.createElement(Ja.a,{open:Boolean(e),onClose:function(e,t){"clickaway"!==t&&o()},action:[r.a.createElement(wt.a,{key:"close",onClick:o,color:"inherit"},r.a.createElement(qa.a,null))],autoHideDuration:2e4,message:e,anchorOrigin:{horizontal:"left",vertical:"bottom"}})};var Xa=function(){const e=Object(l.d)(te),t=Object(l.d)(ne),n=Object(l.d)(ae),c=Object(l.c)();let o,s,i;switch(e){case S:o=r.a.createElement(bt,null);break;case I:s=r.a.createElement(Za,null),i=r.a.createElement(a.Fragment,null,r.a.createElement(tr,null),r.a.createElement(nr,{content:"new project",onClick:()=>c(ct())}),r.a.createElement(er,null)),o=r.a.createElement(yn,null);break;case C:s=r.a.createElement(Za,null),i=r.a.createElement(a.Fragment,null,r.a.createElement(nr,{content:"fork project",onClick:()=>c(ot(n))}),r.a.createElement(nr,{content:"export project",onClick:()=>c(dt(n))}),r.a.createElement(er,null)),o=r.a.createElement(Ra,null)}const u=r.a.createElement(ft.a,{position:"static"},r.a.createElement(mt.a,null,s,r.a.createElement(pt.a,{variant:"h6",color:"inherit",style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"}},t),i));return r.a.createElement(yt.a,{theme:za},r.a.createElement(Ya,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}},!1,u,o,r.a.createElement(Ka,null),r.a.createElement(Wa,null)))};function Ya(){return r.a.createElement("div",{style:{display:"flex",height:"100%",width:"100%",position:"fixed",justifyContent:"flex-end",alignItems:"flex-end",pointerEvents:"none",zIndex:-1}},r.a.createElement(pt.a,{variant:"caption",color:"textSecondary",style:{padding:5}},"0.3.11"))}function Qa(e){const{content:t,theme:n}=e;return r.a.createElement(pt.a,{style:{display:"flex",justifyContent:"center",backgroundColor:n.palette.warn.main,color:n.palette.warn.contrastText}},t)}function Za(){const e=Object(l.c)();return r.a.createElement(nr,{content:"project list",onClick:()=>e(tt(void 0))})}function er(){const e=Object(l.c)();return r.a.createElement(nr,{content:"logout",onClick:t=>e(function(e){return e=>{e(Y(void 0)),e(et())}}())})}function tr(){const e=Object(a.useRef)(void 0),t=Object(l.c)();function n(n){const a=new FileReader;a.onload=()=>{const e=JSON.parse(a.result),r=n.name,c=r.match(/aam-vis-(.*)\.json/);if(c){const n=c[1];t(function(e,t){return n=>{t.status=$,n(Ye(e)),n(Qe(e,t)),n(Ke(e))}}(n,e))}else t(Ae(`'${r}' file name incorrectly formatted ('aam-vis-<projectId>.json')`))},a.readAsText(n),e.current.value=""}return r.a.createElement(a.Fragment,null,r.a.createElement(nr,{content:"import",onClick:()=>e.current.click()}),r.a.createElement("input",{ref:e,onChange:()=>n(e.current.files[0]),type:"file",hidden:!0}))}function nr(e){const{content:t,onClick:n}=e;return r.a.createElement(Et.a,{onClick:n,color:"inherit",variant:"outlined",style:{margin:za.spacing(1)}},t)}Qa=Object(ht.a)(Qa);n("kHzT");o.a.render(r.a.createElement(l.a,{store:X},r.a.createElement(Xa,null)),document.getElementById("app"))}},[["xATA",1,2]]]);