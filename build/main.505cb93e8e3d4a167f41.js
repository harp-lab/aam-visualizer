(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{kHzT:function(e,t,n){var a=n("r05h");"string"==typeof a&&(a=[[e.i,a,""]]);var c={insert:"head",singleton:!1};n("LboF")(a,c);a.locals&&(e.exports=a.locals)},r05h:function(e,t,n){(t=e.exports=n("JPst")(!1)).i(n("bl2O"),""),t.push([e.i,"body{margin:0}#app{height:100vh}.CodeMirror{height:100%}.CodeMirror .mark{color:#3f51b5;cursor:pointer;font-size:0.6rem;line-height:inherit;padding-right:2px;vertical-align:top}.CodeMirror .mark:hover{color:#7986cb}.CodeMirror .selected{background-color:#fff59d}\n",""])},xATA:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),c=n.n(a),r=n("i8i4"),o=n.n(r),l=n("/MKj"),s=n("ANjH");const i="SET_USER",u="SET_TITLE",d="ADD_PROJECT",f="SET_PROJECT_DATA",m="SET_METADATA",p="SET_STATUS",E="SET_GRAPH_METADATA",h="ADD_PANEL",y="SET_PANEL",b="SET_PANELS",g="REFRESH_PANELS",v="DEL_PROJECT",j="DEL_PROJECTS",O="SEL_PROJECT",k={snackbars:[],dialogs:{},loading:!1};var w=function(e=k,t){switch(t.type){case"QUEUE_SNACKBAR":{const{text:n}=t.payload,{snackbars:a}=e;return{...e,snackbars:[...a,n]}}case"DEQUEUE_SNACKBAR":{const{snackbars:t}=e;t.shift();return{...e,snackbars:[...t]}}case"SET_LOADING":{const{loading:n}=t.payload;return{...e,loading:n}}case"SET_DIALOG":{const{dialogId:n,data:a}=t.payload,{dialogs:c}=e;return{...e,dialogs:{...c,[n]:a}}}default:return e}};const I="LOGIN_VIEW",S="LIST_VIEW",C="PROJECT_VIEW",x="empty",T="edit",R="process",$="done",A="error",D="configs",P="envs",N="stacks",M="frame",U="cstack";function L(e={},t){switch(t.type){case E:{const{graphId:n,data:a}=t.payload,c=e[n];return{...e,[n]:{...c,...a}}}default:return e}}function _(e,t){return(n,a)=>{const c=void 0===n;return t(a)||c?e(n,a):n}}function F(e={},t){switch(t.type){case h:{const{panelId:n,label:a}=t.payload;return{...e,[n]:{label:a,saved:!1,hidden:!0,selected:!1}}}case y:{const{panelId:n,data:a}=t.payload,c=e[n];return{...e,[n]:{...c,...a}}}case b:{const{data:e}=t.payload;return{...e}}case g:{const{func:n}=t.payload,a={};for(const[t,c]of Object.entries(e)){const e=n(t,c);a[t]={...c,...e}}return a}default:return e}}const z=Object(s.c)({configs:_(F,e=>!!e.payload&&e.payload.type===D),envs:_(F,e=>!!e.payload&&e.payload.type===P),stacks:_(F,e=>!!e.payload&&e.payload.type===N)});function G(e={},t){switch(t.type){case p:{const{data:n}=t.payload;return{...e,...n}}default:return e}}var H=function(e={},t){switch(t.type){case m:{const{data:n}=t.payload;return{...e,...n}}default:{const{graphs:n,panels:a,status:c}=e;return{...e,graphs:L(n,t),panels:z(a,t),status:G(c,t)}}}};const B={status:"empty",code:"",metadata:H(void 0,{type:"INIT"})};var J=function(e=B,t){switch(t.type){case f:{const{data:n}=t.payload;return{...e,...n}}default:{const{metadata:n}=e;return{...e,metadata:H(n,t)}}}};var W=function(e={},t){switch(t.type){case d:case f:default:if(t.payload&&t.payload.projectId){const{projectId:n}=t.payload,a=e[n];return{...e,[n]:J(a,t)}}return e;case v:{const{projectId:n}=t.payload,{[n]:a,...c}=e;return{...c}}case j:return{}}};var V=function(e={},t){switch(t.type){case i:{const{userId:n}=t.payload;return{...e,userId:n}}case u:{const{title:n}=t.payload;return{...e,title:n}}case O:{const{projectId:n}=t.payload;return{...e,selectedProjectId:n}}default:{const{notifications:n,projects:a}=e;return{...e,notifications:w(n,t),projects:W(a,t)}}}},q=n("sINF");const X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d;var K=Object(s.e)(V,X(Object(s.a)(q.a))),Q=n("ofer"),Y=n("RD7I"),Z=n("bWLx"),ee=n("YTst");const te=e=>({type:i,payload:{userId:e}});const ne=e=>({type:u,payload:{title:e}});var ae=n("G4qV");const ce=e=>e.userId,re=e=>e.selectedProjectId,oe=Object(ae.a)(ce,re,(e,t)=>e?t?C:S:I),le=e=>e.title,se=e=>e.label,ie=e=>Object(ae.a)(t=>ke(t,e),t=>Ie(t,e),me),ue=Object(ae.a)(e=>ie(ye(e))(e),e=>ie(be(e))(e),(e,t)=>[e,t].flat()),de=e=>Object(ae.a)(t=>we(t,e),t=>Ie(t,e),me),fe=Object(ae.a)(e=>de(ye(e))(e),e=>de(be(e))(e),(e,t)=>[e,t].flat());function me(e,t){const n=new Set;if(t)for(const a of e){const{astLink:e,expr:c}=t[a];let r=[];e?r=e:c&&(r=[c]),r.forEach(e=>n.add(e))}return[...n]}const pe=Object(ae.a)(e=>Ae(e),e=>e.graphs),Ee=Object(ae.a)(e=>pe(e),e=>Object.keys(e)),he=Object(ae.a)(e=>Pe(e),e=>e.graphs),ye=Object(ae.a)(e=>Pe(e),e=>e.mainGraphId||"funcs"),be=Object(ae.a)(e=>ke(e,ye(e)),e=>Ae(e),(e,t)=>{let n="states";if(e.length>0){const a=e[0],{form:c}=t.funcs[a];["halt","not found","non-func","unknown"].includes(c)||(n=a)}return n}),ge=Object(ae.a)(e=>Pe(e),ye,(e,t)=>e.focusedGraph||t);function ve(e,t){const{graph:n}=je(e,t),a=[];for(const[e,t]of Object.entries(n))a.push(e),a.concat(Object.keys(t));return a}const je=(e,t)=>pe(e)[t],Oe=(Object(ae.a)(pe,ye,(e,t)=>e[t]),Object(ae.a)(pe,be,(e,t)=>e[t]),(e,t)=>he(e)[t]||{}),ke=(e,t)=>Oe(e,t).selectedNodes||[],we=(e,t)=>Oe(e,t).hoveredNodes||[];function Ie(e,t){const n=Ae(e);switch(t){case"funcs":return n.funcs;case"states":default:return n.configs}}const Se=e=>e.notifications,Ce=Object(ae.a)(Se,e=>e.snackbars[0]),xe=(e=>Object(ae.a)(Se,t=>t.dialogs[e]))("rename"),Te=e=>e.projects,Re=Object(ae.a)(Te,e=>Object.keys(e));function $e(e,t){return t||(t=re(e)),Te(e)[t]}function Ae(e,t){const{items:n}=$e(e,t);return n}function De(e,t){const{status:n}=$e(e,t);return n}function Pe(e,t){return $e(e,t).metadata}function Ne(e,t){const{code:n,items:a,error:c}=$e(e,t);return{code:""!==n,items:Boolean(a),error:Boolean(c)}}const Me=Object(ae.a)(Pe,e=>e.panels);function Ue(e,t){const n=K.getState(),a=re(n);return{type:E,payload:{projectId:a,graphId:e,data:t}}}function Le(e,t){return(n,a)=>{const c=a(),r=ke(c,e),o=new Set([...r,...t]);n(Ue(e,{selectedNodes:[...o]})),n(tt())}}function _e(e,t){return Ue(e,{hoveredNodes:t})}function Fe(e,t){return(n,a)=>{n(Ue(e,{selectedEdges:t}));const c=a(),{graph:r}=je(c,e),o=ye(c),l=new Set;for(const e of t){const[t,n]=e.split("-"),a=r[t][n],{calls:c}=a;if(c)for(const e of c)l.add(e)}n(function(e,t){return Ue(e,{suggestedNodes:t})}(o,[...l]))}}const ze=e=>({type:"QUEUE_SNACKBAR",payload:{text:e}}),Ge=()=>({type:"DEQUEUE_SNACKBAR"}),He=e=>({type:"SET_DIALOG",payload:{dialogId:"rename",data:e}});function Be(e,t,n){const a=K.getState(),c=re(a);return{type:y,payload:{projectId:c,type:e,panelId:t,data:n}}}function Je(e,t,n){return{type:b,payload:{projectId:e,type:t,data:n}}}const We=(e,t)=>Be(e,t,{hidden:!0}),Ve=(e,t)=>Be(e,t,{hidden:!1}),qe=(e,t)=>Be(e,t,{saved:!0}),Xe=(e,t)=>Be(e,t,{saved:!1}),Ke=(e,t)=>Be(e,t,{selected:!0}),Qe=(e,t)=>Be(e,t,{selected:!1});function Ye(e,t){return`${t}-${e}`}const Ze=e=>Ve(P,e);function et(e,t){const n=K.getState(),a=re(n);return{type:g,payload:{projectId:a,type:e,func:t}}}function tt(){return e=>{e(function(){const e=K.getState(),t=be(e),n=ke(e,t);return et(D,(e,t)=>n.includes(e)?{selected:!0,hidden:!1}:{hidden:!0})}()),e(nt()),e(at())}}function nt(){const e=K.getState(),t=Ae(e),{configs:n}=Me(e),a=[];for(const[e,c]of Object.entries(n))if(!c.hidden&&c.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e].env;n&&a.push(n)}}return et(P,(e,t)=>a.includes(e)?{hidden:!1}:{hidden:!0})}function at(){const e=K.getState(),t=Ae(e),{configs:n}=Me(e),a=[];for(const[e,c]of Object.entries(n))if(!c.hidden&&c.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e],{[M]:c,[U]:r}=n,o=Ye(c||r,c?M:U);a.push(o)}}return et(N,(e,t)=>a.includes(e)?{hidden:!1}:{hidden:!0})}function ct(e){return(t,n)=>{const a=Ae(n(),e);a.configs&&t(function(e){return(t,n)=>{const a=Ae(n(),e),c={};for(const[e,t]of Object.entries(a.configs)){const{form:n,states:r}=t;let o;if(r){const e=r[0],t=a.states[e];switch(t.form){case"halt":if(t.results){o=`[ ${t.results.map(e=>{const{type:t,name:n,valString:c}=a.vals[e];let r;switch(t){case"closure":r=n;break;case"bool":r=c}return r}).join(", ")} ]`}break;default:o=t.exprString}}const l=`${se(t)||e}: ${n} - ${o}`;c[e]=rt(l)}t(Je(e,D,c))}}(e)),a.envs&&t(function(e){return(t,n)=>{const a=Ae(n(),e),c={};for(const[e,t]of Object.entries(a.envs)){const n=t.map(e=>e.varString).join(", "),a=`${se(t)||e}: [ ${n} ]`;c[e]=rt(a)}t(Je(e,P,c))}}(e)),(a.frames||a.cstacks)&&t(function(e){return(t,n)=>{const a=Ae(n(),e),c={};if(a.frames)for(const[e,t]of Object.entries(a.frames)){const{descs:n}=t;let a=`${se(t)||e}: `;n.length>1?a+=`[ ${n[0]}, ... +${n.length-1} ]`:a+=`[ ${n[0]} ]`,c[Ye(e,M)]={...rt(a),frame:e}}if(a.cstacks)for(const[e,t]of Object.entries(a.cstacks)){let n=`${se(t)||e}`;c[Ye(e,U)]={...rt(n),cstack:e}}t(Je(e,N,c))}}(e))}}function rt(e){return{label:e,saved:!1,hidden:!0,selected:!1}}const ot=e=>({type:d,payload:{projectId:e}}),lt=(e,t)=>({type:f,payload:{projectId:e,data:t}}),st=e=>({type:v,payload:{projectId:e}}),it=()=>({type:j});function ut(e){return t=>{if(e){const n=K.getState(),{name:a}=$e(n,e);t(ne(a||e))}t({type:O,payload:{projectId:e}})}}const dt=(e,t)=>({type:m,payload:{projectId:e,data:t}});function ft(e,t){const n=K.getState(),a=ce(n);return fetch(`/api/${a}/${e}`,{method:t})}function mt(e,t){const n=K.getState(),a=ce(n);return fetch(`/api/${a}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function pt(){return async function(e){const t=await ft("create","GET"),n=(await t.json()).id;return e(ot(n)),e(ut(void 0)),n}}function Et(e){return async function(t){let n=K.getState(),a=$e(n,e);a.status!==x&&(await t(yt(e)),a=$e(n=K.getState(),e));const c=await t(pt()),{code:r,analysis:o}=a;t(lt(c,{code:r,analysis:o})),t(ut(c))}}function ht(e){return async function(t){const n=K.getState(),a=De(n,e),c=Ne(n,e);let r=!1;switch(a){case T:c.code||t(yt(e));break;case R:await t(gt(e)),r=De(K.getState(),e)===R;break;case $:c.items||(await t(gt(e)),t(ct(e)));break;case A:c.error||await t(gt(e))}return r}}function yt(e){return async function(t){const n=await ft(`projects/${e}/code`,"GET"),{code:a}=await n.json();t(lt(e,{code:a}))}}function bt(e,t){return n=>{const a=K.getState(),{status:c}=$e(a,e);switch(c){case x:case T:{let a=T;return""===t&&(a=x),n(lt(e,{status:a,code:t})),mt(`projects/${e}/save`,{code:t})}}}}function gt(e){return async function(t){const n=await ft(`projects/${e}/data`,"GET");switch(n.status){case 200:{const a=await n.json();t(lt(e,a));break}case 204:break;case 412:t(ze("Project data request rejected"))}}}function vt(e){return async function(t){switch(await t(ht(e)),De(K.getState(),e)){case R:t(ze("Project still processing"));break;default:{const t=$e(K.getState(),e),n={};for(const[e,a]of Object.entries(t))["analysis","code","items"].includes(e)&&(n[e]=a);const a=JSON.stringify(n,null,2),c=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(c),o=`aam-vis-${e}.json`,l=document.createElement("a");Object.assign(l,{href:r,download:o}),document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(r);break}}}}var jt=n("kfFl"),Ot=n("EQI2"),kt=n("+JwS"),wt=n("r9w1"),It=n("Z3vd");var St=Object(l.c)(e=>{const t=xe(e);return{projectId:t,name:t?$e(e,t).name:""}},{rename:function(e,t){return async function(n){n(lt(e,{name:t})),mt(`projects/${e}/save`,{name:t})}},setRenameDialog:He})((function(e){const{projectId:t,name:n,rename:r,setRenameDialog:o}=e,[l,s]=Object(a.useState)(void 0);function i(){o(void 0)}return Object(a.useEffect)(()=>s(n||""),[n]),c.a.createElement(jt.a,{open:Boolean(t),onClose:i},c.a.createElement(Ot.a,null,c.a.createElement(wt.a,{label:"name",value:l,onChange:e=>s(e.target.value),placeholder:`project ${t} name`})),c.a.createElement(kt.a,null,c.a.createElement(It.a,{onClick:i},"cancel"),c.a.createElement(It.a,{onClick:()=>{i(),r(t,l)}},"rename")))})),Ct=n("bXiM"),xt=n("lO0E");const Tt=Object(Y.a)(e=>({appbar:{zIndex:e.zIndex.drawer+1}}));var Rt=function(){const e=Object(l.e)(oe),t=Object(l.e)(le),n=Object(l.e)(re),r=Object(l.d)(),o=Tt();let s,i;switch(e){case S:s=c.a.createElement($t,null),i=c.a.createElement(a.Fragment,null,c.a.createElement(Dt,null),c.a.createElement(Pt,{content:"new project",onClick:()=>r(pt())}),c.a.createElement(At,null));break;case C:s=c.a.createElement($t,null),i=c.a.createElement(a.Fragment,null,c.a.createElement(Pt,{content:"fork project",onClick:()=>r(Et(n))}),c.a.createElement(Pt,{content:"export project",onClick:()=>r(vt(n))}),c.a.createElement(At,null))}return c.a.createElement(Ct.a,{position:"static",className:o.appbar},c.a.createElement(xt.a,null,s,c.a.createElement(Q.a,{variant:"h6",color:"inherit",style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"}},t),i))};function $t(){const e=Object(l.d)();return c.a.createElement(Pt,{content:"project list",onClick:()=>e(ut(void 0))})}function At(){const e=Object(l.d)();return c.a.createElement(Pt,{content:"logout",onClick:t=>e(function(e){return e=>{e(te(void 0)),e(it())}}())})}function Dt(){const e=Object(a.useRef)(void 0),t=Object(l.d)();function n(n){const a=new FileReader;a.onload=()=>{try{const e=JSON.parse(a.result),c=/(?:(.*)(?=\.))?\.?(.*)/,r=n.name.match(c);if(r){const[n,a,c]=r;let o;t(function(e,t){return n=>{t.status=$,n(ot(e)),t=function(e){return e=function(e){return e}(e)}(t),n(lt(e,t)),n(ct(e))}}(o=a||c,e))}}catch(e){const{name:a,message:c}=e;switch(e.constructor){case SyntaxError:t(ze(`Import failed: ${n.name} is not valid JSON`));break;default:t(ze(`${a}: ${c}`))}}},a.readAsText(n),e.current.value=""}return c.a.createElement(a.Fragment,null,c.a.createElement(Pt,{content:"import",onClick:()=>e.current.click()}),c.a.createElement("input",{ref:e,onInput:()=>n(e.current.files[0]),type:"file",hidden:!0}))}function Pt(e){const{content:t,theme:n,onClick:a}=e;return c.a.createElement(It.a,{onClick:a,color:"inherit",variant:"outlined",style:{margin:n.spacing(1)}},t)}Pt=Object(ee.a)(Pt);var Nt=function(){const e=Object(l.d)(),[t,n]=Object(a.useState)("guest"),r=!/^\w+$/.test(t);return c.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center"}},c.a.createElement(wt.a,{label:"username",value:t,onChange:e=>n(e.target.value),error:r,helperText:"You can use letters, numbers, & underscores"}),c.a.createElement(It.a,{onClick:()=>e(function(e){return t=>{t(te(e))}}(t)),disabled:r},"login"))},Mt=n("eD//"),Ut=n("IsqK"),Lt=n("csfp"),_t=n("PsDL"),Ft=n("TjOe"),zt=n("tVbE"),Gt=n("DACN"),Ht=n("3Qh7"),Bt=n("y7u+"),Jt=n("gd/W"),Wt=n("jjAL"),Vt=n("ZuSV"),qt=n.n(Vt);var Xt=function(e){const{items:t}=e,[n,r]=Object(a.useState)(void 0);function o(){r(void 0)}const l=t.map(e=>{const{label:t,callback:n}=e;return c.a.createElement(Wt.a,{key:t,onClick:()=>{o(),n()}},t)});return c.a.createElement(a.Fragment,null,c.a.createElement(Lt.a,{title:"More"},c.a.createElement(_t.a,{color:"inherit",onClick:function(e){r(e.currentTarget)}},c.a.createElement(qt.a,null))),c.a.createElement(Jt.a,{anchorEl:n,getContentAnchorEl:void 0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(n),onClose:o},l))};var Kt=function(e){const{item:t}=e,{debug:n}=t;if(!n)return c.a.createElement(Q.a,null,"Debug property undefined");let a;return a=n instanceof String?c.a.createElement(Q.a,null,n):n instanceof Array?n.map((e,t)=>c.a.createElement(Q.a,{key:t},e)):c.a.createElement(Q.a,null,"Invalid debug property type: ",typeof n)},Qt=n("iNvf");var Yt=function(e){const{item:t}=e,{debug:n}=t;return n?c.a.createElement(on,{icon:c.a.createElement(Qt.a,null),tooltip:"Show debug"},c.a.createElement(Kt,{item:t})):null},Zt=n("/HlT");class en extends a.Component{constructor(e){super(e),this.state={error:!1}}static getDerivedStateFromError(e){return{error:!0}}componentDidCatch(e,t){}render(){const{children:e,onReset:t}=this.props;return this.state.error?c.a.createElement(hn,{content:"Error caught",buttons:c.a.createElement(tn,{onClick:t})}):e}}function tn(e){const{onClick:t}=e;return c.a.createElement(Lt.a,{title:"Restart"},c.a.createElement(_t.a,{size:"small",onClick:t},c.a.createElement(Zt.a,null)))}var nn=function(e){const{children:t}=e,[n,r]=Object(a.useState)(0);return c.a.createElement(en,{key:n,onReset:()=>r(n+1)},t)};var an=function(e){const{icon:t,tooltip:n,onClick:a}=e;return c.a.createElement(Lt.a,{title:n},c.a.createElement(_t.a,{size:"small",onClick:a},t))},cn=n("5Gel"),rn=n("ucgz");var on=Object(rn.a)({paper:{padding:"1em"}})((function(e){const{icon:t,tooltip:n,children:r,classes:o}=e,[l,s]=Object(a.useState)(void 0);return c.a.createElement(a.Fragment,null,c.a.createElement(Lt.a,{title:n},c.a.createElement(_t.a,{size:"small",onClick:function(e){e.stopPropagation(),s(e.currentTarget)}},t)),c.a.createElement(cn.a,{open:Boolean(l),anchorEl:l,onClose:function(e){e.stopPropagation(),s(void 0)},classes:{paper:o.paper}},r))})),ln=n("hlie");function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var un=function(e){const{content:t,tooltip:n,onClick:a,style:r}=e;return c.a.createElement(Lt.a,{title:n},c.a.createElement(ln.a,sn({onClick:e=>{e.stopPropagation(),a()}},{style:r}),c.a.createElement(Q.a,{display:"inline",style:{cursor:"pointer"}},t)))},dn=n("kKU3"),fn=n("iae6"),mn=n("de8u");var pn=function(e){const{status:t,variant:n="circular"}=e;let a;switch(n){case"circular":a=c.a.createElement(En,{style:{justifyContent:"center",alignItems:"center"}},c.a.createElement(dn.a,{in:!0,style:{transitionDelay:"1000ms"}},c.a.createElement(fn.a,null)),c.a.createElement(dn.a,{in:!0,style:{transitionDelay:"200ms"}},c.a.createElement(Q.a,{variant:"h6",style:{marginTop:"2em"}},t)));break;case"linear":a=c.a.createElement(En,null,c.a.createElement(mn.a,null),c.a.createElement(Q.a,{variant:"h6",style:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},this.props.status))}return a};var En=function(e){const{overflow:t,children:n,style:r}=e,o=Object(a.useContext)(Tn),{height:l,width:s}=o;return c.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:l||"100%",width:s||"100%",overflow:t||"hidden",...r}},c.a.createElement(nn,null,n))};var hn=function(e){const{content:t,buttons:n}=e;return c.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"}},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(Q.a,{variant:"h6",style:{margin:"0 1em"}},t),n))},yn=n("/EAt"),bn=n("Imu7"),gn=n("Uf6+"),vn=n("sRsu"),jn=n("3PeG");var On=function(e){const t=e.labels.map(e=>c.a.createElement(jn.a,{key:e},e)),n=e.entries.map((e,t)=>{const n=e.map((e,t)=>c.a.createElement(jn.a,{key:t},e));return c.a.createElement(vn.a,{key:t},n)});return c.a.createElement(yn.a,{size:"small"},c.a.createElement(bn.a,null,c.a.createElement(vn.a,null,t)),c.a.createElement(gn.a,null,n))};function kn(e){const t=e.theme;return c.a.createElement(xt.a,{variant:"dense",style:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,minHeight:"auto"}},c.a.createElement(Q.a,null,e.content))}kn=Object(ee.a)(kn);var wn=function(e){const{label:t,panels:n}=e,r=[...Object.entries(n).filter(([t,n])=>{const{saved:a}=n,c=a;let r=!0;return e.onFilterSaved&&(r=e.onFilterSaved([t,n])),c&&r}).map(e.onGenerate),...Object.entries(n).filter(([t,n])=>{const{saved:a,hidden:c}=n,r=!a&&!c;let o=!0;return e.onFilterUnsaved&&(o=e.onFilterUnsaved([t,n])),r&&o}).map(e.onGenerate)];return c.a.createElement(a.Fragment,null,c.a.createElement(kn,{content:t}),c.a.createElement("div",{style:{overflowY:"auto"}},r))};var In=function(e){const{children:t,childrenStyle:n}=e,a=c.a.Children.map(t,e=>{if(e){const t={...e.props.style,...n};return c.a.cloneElement(e,{style:t})}});return c.a.createElement("div",null,a)};function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Cn(e){const{horizontal:t,onMouseDown:n}=e;let a;return a=t?{height:5,cursor:"ns-resize"}:{width:5,cursor:"ew-resize"},c.a.createElement("div",{style:{backgroundColor:"darkgray",...a},onMouseDown:n})}var xn=function(e){const{horizontal:t,children:n}=e,r=Object(a.useRef)(void 0),[o,l]=Object(a.useState)(!1),s=n[0].props,i=parseInt(s.width||s.height),[u,d]=Object(a.useState)(i);function f(){o&&l(!1)}let m,p,E;t?(m="height",p="horizontal",E="ns-resize"):(m="width",p="vertical",E="ew-resize");const[h,y]=n;return c.a.createElement("div",{ref:r,style:{display:"flex",flexDirection:t?"column":"row",flex:"1 1 auto",cursor:o?E:"default",minHeight:0},onMouseMove:function(e){if(o){!function(){const e=window.getSelection();e&&e.removeAllRanges()}();const n=r.current.getBoundingClientRect();let a;a=t?(e.clientY-n.y)/n.height*100:(e.clientX-n.x)/n.width*100,d(a)}},onMouseUp:f,onMouseLeave:f},c.a.createElement(Tn.Provider,{value:{[m]:`${u}%`}},h),c.a.createElement(Cn,Sn({[p]:!0},{onMouseDown:function(){l(!0)}})),c.a.createElement(Tn.Provider,{value:{[m]:`${100-u}%`}},y))},Tn=c.a.createContext({});function Rn(e){const{projectId:t}=e,n=Object(l.e)(e=>$e(e,t)),a=Object(l.d)(),r=c.a.createElement(Ut.a,{style:{flex:"0 0 10em"}},n.analysis),o=c.a.createElement(Ut.a,{style:{overflow:"hidden",textOverflow:"ellipsis"}},n.name||"unnamed"),s=c.a.createElement(Ut.a,{style:{flex:"0 0 10em"}},t),i=c.a.createElement(Ut.a,{style:{flex:"0 0 10em"}},n.status);let u;u=n.status==R?c.a.createElement(Lt.a,{title:"Cancel processing"},c.a.createElement(_t.a,{onClick:()=>a(function(e){return async function(t){switch((await ft(`projects/${e}/cancel`,"POST")).status){case 200:t(lt(e,{status:T}));break;case 409:t(ze(`Project ${e} cancel request denied - already finished`));break;default:t(ze(`Project ${e} cancel request failed`));break}}}(t))},c.a.createElement(Gt.a,null))):c.a.createElement(Lt.a,{title:"Delete"},c.a.createElement(_t.a,{onClick:()=>a(function(e){return async function(t){const n=K.getState(),a=re(n);switch((await ft(`projects/${e}/delete`,"POST")).status){case 205:t(st(e)),a==e&&t(ut(void 0));break;default:t(ze(`Project ${e} delete request failed`))}}}(t))},c.a.createElement(Ht.a,null)));const d=c.a.createElement(Ft.a,null,c.a.createElement(Xt,{items:[{label:"Rename",callback:()=>a(He(t))},{label:"Export",callback:()=>a(vt(t))}]}),c.a.createElement(Lt.a,{title:"Fork"},c.a.createElement(_t.a,{onClick:()=>a(Et(t))},c.a.createElement(Bt.a,null))),u);return c.a.createElement(zt.a,{button:!0,key:t,onClick:()=>a(ut(t)),align:"flex-start",style:{paddingRight:160}},r,o,s,i,d)}var $n=function(){const e=Object(l.e)(Re),t=Object(l.d)(),n=Object(a.useRef)(void 0);async function r(){await t((async function(e){const t=await ft("all","GET");let n=!1;switch(t.status){case 200:{const a=await t.json();for(const[t,c]of Object.entries(a)){const{status:a,name:r,analysis:o}=c;e(lt(t,{status:a,name:r,analysis:o})),a===R&&(n=!0)}break}default:n=!0}return n}))&&(n.current=setTimeout(r,1e3))}Object(a.useEffect)(()=>(r(),()=>{clearTimeout(n.current)}),[]);const o=e.map(e=>c.a.createElement(Rn,{key:e,projectId:e}));return c.a.createElement(Mt.a,{style:{overflowY:"auto"}},o)},An=Object(a.createContext)(void 0),Dn=n("rwtN");function Pn(e){const{lineId:t,chId:n,theme:r}=e,{ast:o}=Object(l.e)(Ae),s=Object(l.e)(ue),i=Object(l.e)(fe),{astNodes:u,code:d,onHover:f,onClick:m}=Object(a.useContext)(An),p=d[t][n],E=[parseInt(t),parseInt(n)],h=[parseInt(t),parseInt(n)+p.length];let y;for(const e of Object.keys(u))j(e,E,h)&&(y?b(o[e],o[y])<0&&(y=e):y=e);function b(e,t){const{start:n,end:a}=e,{start:c,end:r}=t,o=g(n,a),l=g(c,r);if(o<l)return-1;if(o>l)return 1;{const e=v(n,a),t=v(c,r);return e<t?-1:e>t?1:0}}function g(e,t){return t[0]-e[0]}function v(e,t){return t[1]-e[1]}function j(e,t,n){const{start:a,end:c}=o[e],r=O(a,t)<=0,l=O(n,c)<=0;return r&&l}function O(e,t){const[n,a]=e,[c,r]=t;return n<c?-1:n>c?1:a<r?-1:a>r?1:0}const k=p.match(/lambda|let|if|\#t|\#f/),w=i.find(e=>j(e,E,h)),I=s.find(e=>j(e,E,h));let S=p;return w?S=c.a.createElement(Nn,{content:p,color:r.palette.hover.light}):I&&(S=c.a.createElement(Nn,{content:p,color:r.palette.select.light})),c.a.createElement(Nn,{key:n,content:S,textColor:k?Dn.a[800]:void 0,onMouseOver:()=>f(y),onClick:()=>m(y),style:{cursor:"pointer"}})}function Nn(e){const{content:t,color:n,textColor:a,style:r,onClick:o,onMouseOver:l}=e;return c.a.createElement("span",{onMouseOver:l,onClick:o,style:{display:"inline-block",backgroundColor:n||"inherit",color:a||"inherit",...r}},t)}var Mn=Pn=Object(ee.a)(Pn);function Un(e){const{lineId:t,lastLine:n,width:a,theme:r,onSet:o}=e;return c.a.createElement("div",{style:{display:"inline-block",width:a,fontFamily:"Roboto Mono, Courier New, Courier, monospace",backgroundColor:r.palette.grey[200],textAlign:"right",padding:"0 5px"}},c.a.createElement(Q.a,{variant:"body2",ref:function(e){if(n){const t=e.getBoundingClientRect().width;a!==t&&setGutterWidth(t)}},color:"textSecondary"},parseInt(t)+1))}Un=Object(ee.a)(Un);var Ln=function(e){const{lineId:t}=e,{code:n,onUnhover:r,gutterWidth:o,setGutterWidth:l}=Object(a.useContext)(An),s=n[t],i=Object.keys(s).map(e=>c.a.createElement(Mn,{key:e,lineId:t,chId:e}));return c.a.createElement("div",{key:t},c.a.createElement(Un,{lineId:t,lastLine:t===Object.keys(n).length-1,width:o,onSet:l}),c.a.createElement(Q.a,{onMouseLeave:()=>r(),variant:"body2",style:{display:"inline-block",verticalAlign:"bottom",fontFamily:'Roboto Mono, "Courier New", Courier, monospace'}},i))};var _n=function(){const{code:e}=Object(l.e)($e),t=Object(l.e)(ye),n=Object(l.e)(e=>ve(e,t)),r=Object(l.e)(e=>Ie(e,t)),o=Object(l.e)(be),s=Object(l.e)(e=>ve(e,o)),i=Object(l.e)(e=>Ie(e,o)),{graphs:u}=Object(l.e)(Ae),d=Object(l.d)(),f={};u[t]&&(f[t]={nodeIds:n,refData:r}),u[o]&&(f[o]={nodeIds:s,refData:i});const[m,p]=Object(a.useState)({}),[E,h]=Object(a.useState)({}),[y,b]=Object(a.useState)("auto");function g(){Object(l.b)(()=>{for(const e of Object.keys(f))d(_e(e,void 0))})}Object(a.useEffect)(()=>{const e={};for(const[t,n]of Object.entries(f)){const{nodeIds:a,refData:c}=n;for(const n of a){const a=me([n],c);for(const c of a)e[c]?e[c][t]?e[c][t].push(n):e[c][t]=[n]:e[c]={[t]:[n]}}}p(e)},[t,o]),Object(a.useEffect)(()=>{const t={};e.split(/\r\n|\n/).forEach((e,n)=>{let a=0;const c={};e.match(/\(|\)|\[|\]|[^\s\(\)\[\]]+|\s+/g).forEach(e=>{c[a]=e,a+=e.length}),t[n]=c}),h(t)},[e]);const v=Object.keys(E).map(e=>c.a.createElement(Ln,{key:e,lineId:e}));return c.a.createElement(An.Provider,{value:{astNodes:m,code:E,onHover:function(e){g(),e&&m[e]&&Object(l.b)(()=>{for(const[t,n]of Object.entries(m[e]))d(_e(t,n))})},onUnhover:g,onClick:function(e){const t=m[e],n=Object.keys(t).filter(e=>"funcs"!==e);if(n.length>0){const e=n[0],a=t[e];d(Le(e,a))}},gutterWidth:y,setGutterWidth:b}},c.a.createElement("div",{style:{whiteSpace:"pre"}},v))};function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var zn=function(e){const{envId:t,style:n}=e,{envs:a}=Object(l.e)(Ae),r=Object(l.d)();return c.a.createElement(un,Fn({content:se(a[t])||t,tooltip:`Show environment ${t}`,onClick:()=>r(Ze(t))},{style:n}))};function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Hn=function(e){const{stackId:t,stackType:n,style:a}=e,r=Object(l.d)(),o=function(e){const t=Ae(K.getState());switch(e){case U:return t.cstacks;case M:return t.frames}}(n);return c.a.createElement(un,Gn({content:se(o[t])||t,tooltip:`Show stack ${t}`,onClick:()=>r(function(e,t){const n=Ye(e,t);return Ve(N,n)}(t,n))},{style:a}))};var Bn=function(e){const{item:t}=e,{vals:n}=t;let a;return n&&(a=n.map((e,t)=>{const n=e.map(e=>c.a.createElement(Jn,{key:e,valId:e}));return c.a.createElement("div",{key:t,style:{flex:"1 1 auto"}},n)})),c.a.createElement("div",{style:{display:"flex"}},a)};var Jn=function(e){const{valId:t,style:n}=e,a=Object(l.e)(Ae),{type:r,label:o}=a.vals[t];let s;switch(r){case"bool":case"closure":case"unit":s=o;break;default:s=`'${o}' value type unsupported`}return c.a.createElement("div",{style:n},c.a.createElement(Q.a,{display:"inline"},s))},Wn=n("30+C"),Vn=n("oa/T"),qn=n("G08z"),Xn=n("lFb4"),Kn=n("Dl3h"),Qn=n("aXMt"),Yn=n("5sOi"),Zn=n("U2vl"),ea=n("vn1N"),ta=n("yKwf"),na=n("BNdo");function aa(){return(aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ca(e){const{panelId:t,panelType:n,children:r,theme:o,classes:s,onSelect:i,onUnselect:u,onMouseOver:d,onMouseOut:f}=e,m=Object(l.e)(Me)[n][t],p=Object(l.d)(),[E,h]=Object(a.useState)(!1);const{label:y,selected:b,saved:g}=m;let v,j;j=e.disableSelect?c.a.createElement(ra,{icon:c.a.createElement(Qn.a,{color:"disabled"}),tooltip:e.disableSelectMsg,disabled:!0}):b?c.a.createElement(ra,{icon:c.a.createElement(Zn.a,null),tooltip:"Unselect",onClick:function(){p(Qe(n,t)),u&&u()}}):c.a.createElement(ra,{icon:c.a.createElement(Yn.a,null),tooltip:"Select",onClick:function(){p(Ke(n,t)),i&&i()}}),v=g?c.a.createElement(ra,{icon:c.a.createElement(ta.a,null),tooltip:"Unsave",onClick:()=>p(Xe(n,t))}):c.a.createElement(ra,{icon:c.a.createElement(ea.a,null),tooltip:"Save",onClick:()=>p(qe(n,t))});const O=c.a.createElement(ra,{icon:c.a.createElement(Ht.a,null),tooltip:"Delete",onClick:()=>p(We(n,t))});return c.a.createElement(qn.a,{onMouseOver:()=>{E||(d(),h(!0))},onMouseOut:()=>{E&&(f(),h(!1))},defaultExpanded:!g},c.a.createElement(Xn.a,{expandIcon:c.a.createElement(na.a,null),classes:{root:s.panelRoot,content:s.panelContent,expandIcon:s.panelExpandIcon,expanded:s.panelExpanded},style:{backgroundColor:E?o.palette.hover.light:void 0}},j,v,O,c.a.createElement(Q.a,null,y)),c.a.createElement(Kn.a,null,r))}function ra(e){const{icon:t,tooltip:n,disabled:a,onClick:r}=e,o={};return a?(o.disableRipple=!0,o.onClick=e=>{e.stopPropagation()}):o.onClick=e=>{e.stopPropagation(),r()},c.a.createElement(Lt.a,{title:n},c.a.createElement(_t.a,aa({size:"small"},o),t))}var oa=ca=Object(rn.a)(e=>({panelRoot:{minHeight:0,"&$panelExpanded":{minHeight:0}},panelContent:{alignItems:"center",margin:"5px 0","&$panelExpanded":{margin:"8px 0"}},panelExpandIcon:{padding:"5px 12px"},panelExpanded:{}}),{withTheme:!0})(ca);function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function sa(e){const{configId:t}=e,n=Object(l.e)(Ae),{states:a}=n.configs[t];let r;return a&&(r=a.map(e=>{const{form:t}=n.states[e];switch(t){case"halt":return;default:return c.a.createElement(ia,{key:e,stateId:e})}})),c.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},r)}function ia(e){const{stateId:t}=e,n=Object(l.e)(Ae),a=n.states[t],{instr:r,frame:o,cstack:s,env:i}=a,u=n.instr[r].exprStrings.join(", "),d=c.a.createElement(Q.a,{display:"inline"},`[ ${u} ]`),f=o||s,m=o?M:U,p=c.a.createElement(Hn,la({stackId:f},{stackType:m})),E=i?c.a.createElement(zn,{envId:i}):void 0;return c.a.createElement(Wn.a,{style:{width:"100%"}},c.a.createElement(Vn.a,{style:{padding:8}},c.a.createElement(In,{childrenStyle:{marginRight:5}},d,p,E),c.a.createElement(Bn,{item:a})))}var ua=function(){const{configs:e}=Object(l.e)(Me),t=Object(l.e)(Ae),n=Object(l.e)(be),a=Object(l.d)();function r(){a(nt()),a(at())}const o={onFilterSaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)},onFilterUnsaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)}};return c.a.createElement(wn,la({label:"Configurations",panels:e,onGenerate:function([e,t]){return c.a.createElement(oa,{key:e,panelId:e,panelType:"configs",onMouseOver:()=>a(_e(n,[e])),onMouseOut:()=>a(_e(n,[])),onSelect:r,onUnselect:r},c.a.createElement(sa,{configId:e}))}},o))};var da=function(){const{envs:e}=Object(l.e)(Me);return c.a.createElement(wn,{label:"Environments",panels:e,onGenerate:function([e,t]){return c.a.createElement(oa,{key:e,panelId:e,panelType:"envs",onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},c.a.createElement(fa,{envId:e}))}})};function fa(e){const{envId:t}=e,n=Object(l.e)(Ae),{envs:a,instr:r,store:o,vals:s}=n,i=a[t].map(e=>{const n=r[e.instr].exprStrings.join(", "),a=o[e.addr].map(e=>{const n=t?c.a.createElement(zn,{envId:t}):void 0;return c.a.createElement(In,{key:e,childrenStyle:{marginRight:5}},c.a.createElement(Jn,{valId:e,style:{display:"inline-block"}}),n)});return[e.varString,`[ ${n} ]`,a]});return c.a.createElement(On,{labels:["var","instr","store"],entries:i})}var ma=n("PgHX");var pa=function(e,t,n,a){const{label:c="",style:r}=a;return{group:"edges",data:{id:e,label:c,source:t,target:n,style:r}}};var Ea=function(e,t){return{group:"nodes",data:{id:e,label:`${e}\n${t}`,form:t}}};var ha=function(e,t){const n=t.graphs[e],{graph:a,start:c}=n;function r(e,t){const n=[];for(const[a,c]of Object.entries(e)){const e=o(a,t);n.push(Ea(a,e));for(const[e,r]of Object.entries(c)){const c=o(e,t);n.push(Ea(e,c));const l=`${a}-${e}`;n.push(pa(l,a,e,r))}}return n}function o(e,t){let n;if(t){const a=t[e];a&&(n=a.form)}return n}switch(e){case"funcs":return r(a,t.funcs);case"states":default:return r(a,t.configs)}};var ya=class{constructor(e,t){this.cardIds=e,this.cardType=t,this.selected=void 0}select(e){this.selected=e}unselect(e){this.selected=void 0}get cards(){return this.cardIds}get type(){return this.cardType}},ba=n("ePBu");function ga(){return(ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function va(e){const{frameId:t,selected:n,theme:a,classes:r,onSet:o,onUnset:s}=e;let{onClick:i}=e;const u=Object(l.e)(Ae),d=u.frames[t],{form:f,type:m,frames:p,cstacks:E,next:h}=d;let y,b;switch(f){case"addr":{const{func:e,env:n}=d;y=c.a.createElement(ja,null,c.a.createElement(Hn,{stackId:t,stackType:M}),c.a.createElement(Oa,{label:"Form"},f),c.a.createElement(Oa,{label:"Function"},u.funcs[e].form),c.a.createElement(zn,{envId:n}));break}case"frame":{const{env:e,instr:t,exprString:n}=d,a=u.instr[t].exprStrings.join(", ");y=c.a.createElement(ja,null,c.a.createElement(Oa,{label:"Type"},m),c.a.createElement(zn,{envId:e}),c.a.createElement(Oa,{label:"Instrumentation"},`[ ${a} ]`)),b=c.a.createElement(Q.a,null,n);break}default:y=c.a.createElement(ja,null,c.a.createElement(Hn,{stackId:t,stackType:M}),c.a.createElement(Oa,{label:"Form"},f))}if(!i){let e;p?e=new ya(p,M):E?e=new ya(E,U):h&&(e=new ya([h],M)),e&&(i=n?s:()=>o(e))}return c.a.createElement(Wn.a,{key:t,onClick:i,classes:{root:i?r.enableHover:void 0},style:{flex:"1 0 0",backgroundColor:n?a.palette.select.light:void 0,cursor:i?"pointer":void 0,minWidth:100}},c.a.createElement(Vn.a,{style:{padding:8}},c.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"}},y,c.a.createElement("div",null,c.a.createElement(Yt,{item:d}),c.a.createElement(ka,{content:b}))),c.a.createElement(Bn,{item:d})))}function ja(e){const{children:t}=e,n=c.a.Children.map(t,e=>c.a.cloneElement(e,{style:{marginRight:"5px"}}));return c.a.createElement("div",null,n)}function Oa(e){const{label:t,children:n,style:a}=e;return c.a.createElement(Lt.a,{title:t},c.a.createElement(Q.a,ga({display:"inline"},{style:a}),n))}function ka(e){const{content:t}=e;return t?c.a.createElement(on,{icon:c.a.createElement(ba.a,null),tooltip:"Show info"},t):null}var wa=va=Object(rn.a)(e=>({enableHover:{"&:hover":{backgroundColor:`${e.palette.hover.light} !important`}}}),{withTheme:!0})(va);var Ia=function(e){const{children:t}=e;return c.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"5px 0",justifyContent:"center"}},t)};function Sa(e){const{cstackId:t,selected:n,onSet:a,onUnset:r}=e,{cstacks:o}=Object(l.e)(Ae),s=o[t][0],i=n?()=>r(t):()=>a(t);return c.a.createElement(wa,{frameId:s,selected:n,onClick:i})}var Ca=function(e){const{layer:t,onSet:n,onUnset:r}=e,o=t.cards.map(e=>c.a.createElement(Sa,{key:e,cstackId:e,selected:t.selected===e,onSet:n,onUnset:r}));return c.a.createElement(a.Fragment,null,c.a.createElement(Ia,null,o),t.selected?c.a.createElement(Ra,{cstackId:t.selected}):null)};var xa=function(e){const{layer:t,onSet:n,onUnset:a}=e,r=t.cards.map(e=>c.a.createElement(wa,{key:e,frameId:e,selected:t.selected===e,onSet:t=>n(e,t),onUnset:()=>a(e)}));return c.a.createElement(Ia,null,r)};var Ta=function(e){const{frameId:t}=e,n=Object(l.e)(Ae),[r,o]=Object(a.useState)([new ya([t],M)]);function s(e,t){const n=u(e);n[n.length-1].select(t),o(n)}function i(e,t){const n=u(e);n[n.length-1].unselect(t),o(n)}function u(e){return r.slice(0,e+1)}return r.map((e,t)=>{let l,u;switch(e.type){case U:l=c.a.createElement(Ca,{layer:e,onSet:e=>s(t,e),onUnset:e=>i(t,e)});break;default:l=c.a.createElement(xa,{layer:e,onSet:(e,n)=>(function(e,t,n){s(e,t),o([...r,n])})(t,e,n),onUnset:e=>i(t,e)})}const d=t===r.length-1,f=function(e){const t=r[e];switch(t.type){case M:for(const e of t.cards){const{frames:t,cstacks:a,next:c}=n.frames[e];if(t||a||c)return!0}return!1;default:return!1}}(t);return d&&f&&(u=c.a.createElement(Ia,null,c.a.createElement(ma.a,{color:"disabled"}))),c.a.createElement(a.Fragment,{key:t},l,u)})};var Ra=function(e){const{cstackId:t}=e,{cstacks:n}=Object(l.e)(Ae),a=n[t].map(e=>c.a.createElement(Ta,{key:e,frameId:e}));return c.a.createElement("div",{style:{margin:5}},a)};var $a=function(){const{stacks:e}=Object(l.e)(Me);return c.a.createElement(wn,{label:"Stacks",panels:e,onGenerate:function([e,t]){const{[M]:n,[U]:a}=t;let r;return r=n?c.a.createElement(Ta,{frameId:n}):c.a.createElement(Ra,{cstackId:a}),c.a.createElement(oa,{key:e,panelId:e,panelType:N,onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},c.a.createElement("div",{style:{width:"100%"}},r))}})},Aa=n("1AYd"),Da=n("cVXz"),Pa=n("VrN/"),Na=n.n(Pa);n("8wdy");function Ma(e){const{onClick:t}=e;return c.a.createElement(It.a,{onClick:t,variant:"contained",color:"secondary"},"process")}var Ua=function(e){const{edit:t,error:n}=e,r=["0-cfa","1-cfa","2-cfa"],o=Object(a.useRef)(void 0),s={lineWrapping:!0,lineNumbers:!0,readOnly:!t},i=Object(a.useRef)(Na.a),[u,d]=Object(a.useState)({analysis:r[0]}),f=Object(l.e)(re),{code:m,error:p}=Object(l.e)($e),E=Object(l.d)();function h(){return i.current.getDoc().getValue()}let y,b;if(Object(a.useEffect)(()=>(i.current=Na.a.fromTextArea(o.current,s),()=>{i.current.toTextArea(),E(bt(f,h()))}),[]),Object(a.useEffect)(()=>{!function(e){i.current.getDoc().setValue(e)}(m)},[m]),t){y=c.a.createElement(Q.a,null,"Input code for analysis");const e=r.map(e=>c.a.createElement(Wt.a,{key:e,value:e},e));b=c.a.createElement(xt.a,null,c.a.createElement("div",{style:{flex:"1 1 auto"}},c.a.createElement(Aa.a,null,"Analysis"),c.a.createElement(Da.a,{value:u.analysis,onChange:e=>{const t=e.target.value;d({...u,analysis:t})}},e)),c.a.createElement(Ma,{onClick:function(){E(function(e,t,n){return async function(a){switch(await a(bt(e,t)),(await mt(`projects/${e}/process`,n)).status){case 200:a(lt(e,{status:"process"}));break;case 412:a(ze("Project process request rejected"))}}}(f,h(),u))}}))}else n&&(y=c.a.createElement(a.Fragment,null,c.a.createElement(Q.a,{variant:"h3"},"Analysis error"),c.a.createElement(Q.a,null,p)));return c.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"auto"}},y,c.a.createElement("textarea",{ref:e=>o.current=e,style:{flex:"1 1 auto",overflow:"auto",height:"100%"}}),b)},La=n("ROFb"),_a=n.n(La);function Fa(e){const{graphId:t,edgePredicate:n=(e=>!1),onNodeSelect:r,onNodeUnselect:o,theme:s,style:i}=e,u=Object(l.e)(Ae);if(!u.graphs[t])return c.a.createElement(hn,{content:`'${t}' graph undefined`});const d=Object(l.e)(e=>Oe(e,t)),f=Object(l.e)(ge)===t,m=Object(l.d)(),p=Object(a.useRef)(void 0),E=Object(a.useRef)(void 0),h=Object(a.useRef)(!1),y=ha(t,u),b={style:[{selector:"node",style:{label:"data(label)","text-wrap":"wrap"}},{selector:"node:selected",style:{"background-color":s.palette.select.main}},{selector:"edge",style:{label:"data(label)","curve-style":"bezier","target-arrow-shape":"triangle","line-style":(g="line-style",v="solid",e=>{const t=e.data("style");let n;return n=t&&t[g]?t[g]:v})}},{selector:"edge:selected",style:{"line-color":s.palette.select.main,"target-arrow-color":s.palette.select.main}},{selector:".suggested",style:{"background-color":s.palette.suggest.main}},{selector:e=>e.hasClass("suggested")&&e.selected(),style:{"background-color":s.palette.suggest.dark}},{selector:".hovered",style:{"background-color":s.palette.hover.main}}],headless:!0};var g,v;const j=Object(a.useRef)(_a()(b)).current,{positions:O,selectedNodes:k=[],selectedEdges:w=[],hoveredNodes:I=[],suggestedNodes:S=[]}=d;function C(e){const t=j.$("node:selected");switch(e.key){case"ArrowLeft":const e=t.incomers().nodes();1==e.length&&(t.unselect(),e.select());break;case"ArrowRight":const n=t.outgoers().nodes();1==n.length&&(t.unselect(),n.select())}}function x(e,t){j.batch(()=>{for(const n of e){j.getElementById(n).addClass(t)}})}function T(e,t){j.batch(()=>{for(const n of e){j.getElementById(n).removeClass(t)}})}return Object(a.useEffect)(()=>(j.mount(p.current),()=>j.unmount()),[]),Object(a.useEffect)(()=>{if(f)return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[f]),Object(a.useEffect)(()=>(["tap","select","unselect","mouseover","mouseout"].forEach(e=>j.off(e)),j.on("tap",()=>m(function(e){const t=K.getState(),n=re(t);return dt(n,{focusedGraph:e})}(t))),j.on("select","node",e=>{if(h.current){const n=e.target.id();m(Le(t,[n])),r&&r(n)}}),j.on("unselect","node",e=>{if(h.current){const n=e.target.id();m(function(e,t){return(n,a)=>{const c=a(),r=ke(c,e),o=new Set(r);t.forEach(e=>o.delete(e)),n(Ue(e,{selectedNodes:[...o]})),n(tt())}}(t,[n])),o&&o(n)}}),j.on("mouseover","node",e=>{const n=e.target.id();I!=[n]&&m(_e(t,[n]))}),j.on("mouseout","node",e=>{m(_e(t,[]))}),j.on("select","edge",e=>{if(h.current){const a=e.target;if(n(a)){const e=a.id();m(Fe(t,[e]))}else a.unselect()}}),j.on("unselect","edge",e=>{h.current&&m(Fe(t,[]))}),j.add(y),O?(j.nodes().positions(e=>O[e.data("id")]),j.fit()):j.layout({name:"cose",directed:!0}).run(),()=>{const e={};for(const t of y){const n=t.data.id;e[n]=j.$id(n).position()}m(function(e,t){return Ue(e,{positions:t})}(t,e)),j.nodes().remove()}),[t]),Object(a.useEffect)(()=>{return h.current=!1,function(e){e.forEach(e=>j.$id(e).select())}([...k,...w]),h.current=!0,()=>{h.current=!1,function(e){e.forEach(e=>j.$id(e).unselect())}([...k,w]),h.current=!0}},[k,w]),Object(a.useEffect)(()=>(h.current=!1,x(S,"suggested"),h.current=!0,()=>{h.current=!1,T(S,"suggested"),h.current=!0}),[S]),Object(a.useEffect)(()=>(h.current=!1,x(I,"hovered"),h.current=!0,()=>{h.current=!1,T(I,"hovered"),h.current=!0}),[I]),Object(a.useEffect)(()=>{j.resize()},[E.current]),Object(a.useEffect)(()=>{E.current=p.current.getBoundingClientRect()}),c.a.createElement("div",{ref:p,style:{flex:"1 1 1%",display:"block",minHeight:0,width:"100%",...i}})}var za=Fa=Object(ee.a)(Fa);function Ga(e){const{content:t,theme:n}=e;return c.a.createElement(xt.a,{variant:"dense",style:{backgroundColor:n.palette.grey[300],color:n.palette.text.primary,width:"100%",minHeight:"unset"}},c.a.createElement(Q.a,null,t))}Ga=Object(ee.a)(Ga);var Ha=function(){const e=Object(l.e)(ye),t=Object(l.e)(be);return c.a.createElement(xn,{horizontal:!0},c.a.createElement(En,{height:"50%"},c.a.createElement(Ga,{content:e}),c.a.createElement(za,{graphId:e})),c.a.createElement(En,{height:"50%"},c.a.createElement(Ga,{content:t}),c.a.createElement(za,{graphId:t,edgePredicate:e=>{const t=e.data("style");return!!t&&"dashed"===t["line-style"]}})))},Ba=n("IIOH"),Ja=n("dXLW");const Wa=Object(Y.a)(e=>({appbar:e.mixins.toolbar,message:e.mixins.message,drawer:{marginRight:30}})),Va="graph",qa="debug";function Xa(e){const{open:t}=e,n=Object(l.e)(Ae);return c.a.createElement(Qa,{open:t},c.a.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%",margin:"1em"}},c.a.createElement(Kt,{item:n})))}function Ka(e){const{open:t}=e,n=Object(l.e)(Ee),[r,o]=Object(a.useState)(n[0]),s=n.map(e=>c.a.createElement(Wt.a,{key:e,value:e},e));return c.a.createElement(Qa,{open:t},c.a.createElement(Da.a,{value:r,onChange:e=>o(e.target.value)},s),c.a.createElement(za,{graphId:r,style:{height:"100%"}}))}function Qa(e){const{open:t,children:n}=e,a=Wa();return c.a.createElement(Ba.a,{anchor:"right",variant:"persistent",open:t,classes:{paper:a.drawer},PaperProps:{style:{width:"50vw"}}},c.a.createElement(Ya,null),c.a.createElement(nn,null,n))}function Ya(){const e=Wa();return c.a.createElement(a.Fragment,null,!1,c.a.createElement("div",{className:e.appbar}))}var Za=function(){const{debug:e}=Object(l.e)(Ae),[t,n]=Object(a.useState)(void 0);function r(e){n(t===e?void 0:e)}let o;return e&&(o=c.a.createElement(an,{icon:c.a.createElement(Qt.a,null),tooltip:"Show debug",onClick:()=>r(qa)})),c.a.createElement(a.Fragment,null,c.a.createElement(Ka,{open:t===Va}),c.a.createElement(Xa,{open:t===qa}),c.a.createElement(Ba.a,{anchor:"right",variant:"permanent",open:!0},c.a.createElement(Ya,null),c.a.createElement(an,{icon:c.a.createElement(Ja.a,null),tooltip:"Show graph",onClick:()=>r(Va)}),o))};function ec(){const e=Object(l.e)(Ne);let t=c.a.createElement(pn,{status:"Downloading"});return e.items&&(t=c.a.createElement(a.Fragment,null,c.a.createElement(xn,{vertical:!0},c.a.createElement(En,{width:"40%"},c.a.createElement(Ha,null)),c.a.createElement(En,null,c.a.createElement(xn,{horizontal:!0},c.a.createElement(En,{height:"48%"},c.a.createElement(xn,{vertical:!0},c.a.createElement(En,{width:"48%",overflow:"auto"},c.a.createElement(_n,null)),c.a.createElement(En,null,c.a.createElement($a,null)))),c.a.createElement(En,{overflow:"auto"},c.a.createElement(xn,null,c.a.createElement(En,{width:"50%",overflow:"auto"},c.a.createElement(ua,null)),c.a.createElement(En,{overflow:"auto"},c.a.createElement(da,null))))))),c.a.createElement(Za,null))),t}var tc=function(){const e=Object(l.e)(re),t=Object(l.e)(De),n=Object(l.d)(),r=Object(a.useRef)(void 0);async function o(){await n(ht(e))&&(r.current=setTimeout(o,1e3))}let s;switch(Object(a.useEffect)(()=>(o(),()=>{clearTimeout(r.current)}),[]),Object(a.useEffect)(()=>{switch(t){case R:o()}},[t]),t){case x:case T:s=c.a.createElement(Ua,{edit:!0});break;case R:s=c.a.createElement(pn,{status:"Processing"});break;case $:s=c.a.createElement(ec,null);break;case A:s=c.a.createElement(Ua,{error:!0})}return s},nc=n("q0Gq"),ac=n.n(nc),cc=n("1J5C"),rc=n.n(cc),oc=n("vqLa"),lc=n.n(oc),sc=n("V/ii"),ic=n.n(sc),uc=n("LwY3"),dc=n.n(uc);var fc=ac()({mixins:{message:{minHeight:24}},palette:{secondary:{light:lc.a[300],main:lc.a[500],dark:lc.a[700]},select:{light:lc.a[100],main:lc.a[400]},hover:{light:ic.a[100],main:ic.a[400]},suggest:{main:dc.a[400],dark:dc.a[700]},warn:{main:rc.a.A700,contrastText:"#fff"}}}),mc=n("79Xs"),pc=n("n0zQ");var Ec=function(){const e=Object(l.e)(Ce),t=Object(l.d)(),[n,r]=Object(a.useState)(void 0);function o(){clearTimeout(n),t(Ge())}return Object(a.useEffect)(()=>{e&&r(setTimeout(()=>{o()},2e4))},[e]),c.a.createElement(mc.a,{open:Boolean(e),onClose:function(e,t){"clickaway"!==t&&o()},action:[c.a.createElement(_t.a,{key:"close",onClick:o,color:"inherit"},c.a.createElement(pc.a,null))],autoHideDuration:2e4,message:e,anchorOrigin:{horizontal:"left",vertical:"bottom"}})};const hc=Object(Y.a)(e=>({message:{zIndex:e.zIndex.drawer+1}}));var yc=function(){let e;switch(Object(l.e)(oe)){case I:e=c.a.createElement(Nt,null);break;case S:e=c.a.createElement($n,null);break;case C:e=c.a.createElement(tc,null)}return c.a.createElement(Z.a,{theme:fc},c.a.createElement(bc,null),c.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}},!1,c.a.createElement(Rt,null),e,c.a.createElement(Ec,null),c.a.createElement(St,null)))};function bc(){return c.a.createElement("div",{style:{display:"flex",height:"100%",width:"100%",position:"fixed",justifyContent:"flex-end",alignItems:"flex-end",pointerEvents:"none",zIndex:-1}},c.a.createElement(Q.a,{variant:"caption",color:"textSecondary",style:{padding:5}},"0.3.13"))}function gc(e){const{content:t,theme:n}=e,a=hc();return c.a.createElement(Q.a,{style:{display:"flex",justifyContent:"center",backgroundColor:n.palette.warn.main,color:n.palette.warn.contrastText},className:a.message},t)}gc=Object(ee.a)(gc);n("kHzT");o.a.render(c.a.createElement(l.a,{store:K},c.a.createElement(yc,null)),document.getElementById("app"))}},[["xATA",1,2]]]);