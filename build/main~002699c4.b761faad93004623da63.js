(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+lx+":function(e,t,n){var a=n("JPst"),c=n("bl2O");(t=a(!1)).i(c),t.push([e.i,".CodeMirror{height:100%}.CodeMirror .mark{color:#3f51b5;cursor:pointer;font-size:0.6rem;line-height:inherit;padding-right:2px;vertical-align:top}.CodeMirror .mark:hover{color:#7986cb}.CodeMirror .selected{background-color:#fff59d}\n",""]),e.exports=t},"7QqU":function(e,t,n){(t=n("JPst")(!1)).push([e.i,"body{margin:0}#app{height:100vh}\n",""]),e.exports=t},Ac2X:function(e,t){t.engine=function(e,t){return{command:"racket",args:["engine.rkt","-o",t,e]}},t.theme={}},dJRW:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"metadataReducer",(function(){return b}));var c={};n.r(c),n.d(c,"nodeSelectHook",(function(){return Gn})),n.d(c,"nodeUnselectHook",(function(){return Bn})),n.d(c,"cyNodeDataHook",(function(){return Jn})),n.d(c,"generateMetadataHook",(function(){return qn})),n.d(c,"dataProcessHook",(function(){return Wn}));var r={};n.r(r),n.d(r,"EditorLayout",(function(){return Mc})),n.d(r,"ProjectLayout",(function(){return cr}));var o=n("q1tI"),s=n.n(o),l=n("i8i4"),i=n.n(l),u=n("/MKj"),d=n("ANjH");const f={snackbars:[],dialogs:{},loading:!1};var m=function(e=f,t){switch(t.type){case"QUEUE_SNACKBAR":{const{text:n}=t.payload,{snackbars:a}=e;return{...e,snackbars:[...a,n]}}case"DEQUEUE_SNACKBAR":{const{snackbars:t}=e;t.shift();return{...e,snackbars:[...t]}}case"SET_LOADING":{const{loading:n}=t.payload;return{...e,loading:n}}case"SET_DIALOG":{const{dialogId:n,data:a}=t.payload,{dialogs:c}=e;return{...e,dialogs:{...c,[n]:a}}}default:return e}};function p(e,t,n){let a=e[t];return a||(a=function(){return null}),a}function E(e,t,n){let a=e[t];return a||(a=function(){return function(e){}}),a}function b(e={},t){return t.type,e}const y=function(e,t,n){let a=e[t];return a||(a=function(e={},t){return e}),a}(a,"metadataReducer");var g=function(e={},t){switch(t.type){case"SET_GRAPH_METADATA":{const{graphId:n,data:a}=t.payload,c=e[n];return{...e,[n]:{...c,...a}}}default:return e}};var h=function(e={},t){if(t.payload&&t.payload.type){const n=t.payload.type;return e[n]=function(e={},t){switch(t.type){case"ADD_PANEL":{const{panelId:n,label:a}=t.payload;return{...e,[n]:{label:a,saved:!1,hidden:!0,selected:!1}}}case"SET_PANEL":{const{panelId:n,data:a}=t.payload,c=e[n];return{...e,[n]:{...c,...a}}}case"SET_PANELS":{const{data:e}=t.payload;return{...e}}case"REFRESH_PANELS":{const{func:n}=t.payload,a={};for(const[t,c]of Object.entries(e)){const e=n(t,c);a[t]={...c,...e}}return a}default:return e}}(e[n],t),e}return e};var v=function(e={client:"waiting"},t){switch(t.type){case"SET_STATUS":{const{data:n}=t.payload;return{...e,...n}}default:return e}};var j=function(e={},t){switch(t.type){case"SET_METADATA":{const{data:n}=t.payload;return{...e,...n}}default:{const{graphs:n,panels:a,status:c,fext:r}=e;return{...e,graphs:g(n,t),panels:h(a,t),status:v(c,t),fext:y(r,t)}}}};const O={status:"empty",analysisInput:"",metadata:j(void 0,{type:"INIT"})};var k=function(e=O,t){switch(t.type){case"SET_PROJECT_DATA":{const{data:n}=t.payload;return{...e,...n}}default:{const{metadata:n}=e;return{...e,metadata:j(n,t)}}}};var w=function(e={},t){switch(t.type){case"ADD_PROJECT":case"SET_PROJECT_DATA":default:if(t.payload&&t.payload.projectId){const{projectId:n}=t.payload,a=e[n];return{...e,[n]:k(a,t)}}return e;case"DEL_PROJECT":{const{projectId:n}=t.payload,{[n]:a,...c}=e;return{...c}}case"DEL_PROJECTS":return{}}};var I=function(e={},t){switch(t.type){case"SET_USER":{const{userId:n}=t.payload;return{...e,userId:n}}case"SET_TITLE":{const{title:n}=t.payload;return{...e,title:n}}case"SEL_PROJECT":{const{projectId:n}=t.payload;return{...e,selectedProjectId:n}}default:{const{notifications:n,projects:a}=e;return{...e,notifications:m(n,t),projects:w(a,t)}}}},S=n("sINF");const x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.c;var C=Object(d.d)(I,x(Object(d.a)(S.a))),T=n("ofer"),D=n("RD7I"),P=n("bWLx"),R=n("YTst"),A=n("kfFl"),$=n("yv+Y"),N=n("EQI2"),_=n("++HY"),U=n("r9w1"),L=n("+JwS"),z=n("Z3vd");const M=e=>({type:"SET_USER",payload:{userId:e}});const F=e=>({type:"SET_TITLE",payload:{title:e}});var H=n("G4qV");const G=e=>e.userId,B=e=>e.selectedProjectId,J=Object(H.a)(G,B,(e,t)=>e?t?"project":"list":"login"),q=e=>e.title,W=e=>e.label,X=Object(H.a)(e=>e,e=>!1),V=e=>e.projects,K=Object(H.a)(V,e=>Object.keys(e)),Q=Object(H.a)((e,t)=>t,B,V,(e,t,n)=>{let a;return a=e?n[e]:n[t],a}),Y=Object(H.a)(Q,e=>e?e.name||"unnamed":void 0),Z=Object(H.a)(Q,e=>e.analysisOutput);function ee(e,t){const{status:n}=Q(e,t);return n}const te=Object(H.a)(Q,e=>e.metadata),ne=Object(H.a)(te,e=>e.status.client),ae=Object(H.a)(e=>Z(e),e=>e.graphs),ce=Object(H.a)(e=>ae(e),e=>Object.keys(e)),re=Object(H.a)(te,e=>e.graphs),oe=Object(H.a)((e,t,n)=>t,(e,t,n)=>re(e,n),(e,t)=>t[e]||{}),se=Object(H.a)(oe,e=>e.selectedNodes||[]),le=Object(H.a)(oe,e=>e.selectedEdges||[]),ie=Object(H.a)(oe,e=>e.hoveredNodes||[]),ue=Object(H.a)(oe,e=>e.suggestedNodes||[]),de=Object(H.a)((e,t)=>oe(e,t),e=>e.positions),fe=Object(H.a)(oe,e=>e.viewers||0),me=Object(H.a)(re,e=>{const t={};for(const[n,a]of Object.entries(e)){const{viewers:e}=a;e>0&&(t[n]=!0)}return t}),pe=Object(H.a)(e=>te(e),e=>e.focusedGraph),Ee=Object(H.a)((e,t)=>t,(e,t)=>pe(e),(e,t)=>e===t);function be(e,t){const{graph:n}=ye(e,t),a=[];for(const[e,t]of Object.entries(n))a.push(e),a.concat(Object.keys(t));return a}const ye=Object(H.a)((e,t)=>ae(e),(e,t)=>t,(e,t)=>e[t]),ge=Object(H.a)((e,t)=>Z(e),(e,t)=>t,(e,t)=>{switch(t){case"funcs":return e.funcs;case"states":default:return e.configs}}),he=e=>e.notifications,ve=Object(H.a)(he,e=>e.snackbars[0]),je=e=>Object(H.a)(he,t=>t.dialogs[e]),Oe=je("rename"),ke=je("delete"),we=Object(H.a)((e,t)=>te(e),(e,t)=>t,(e,t)=>e.panels[t]||{}),Ie=Object(H.a)(e=>e,me,(e,t)=>Object.keys(t).map(t=>(e=>Object(H.a)(t=>se(t,e),t=>ge(t,e),xe))(t)(e)).flat()),Se=Object(H.a)(e=>e,me,(e,t)=>Object.keys(t).map(t=>(e=>Object(H.a)(t=>ie(t,e),t=>ge(t,e),xe))(t)(e)).flat());function xe(e,t){const n=new Set;if(t)for(const a of e)if(t[a]){const{astLink:e,expr:c}=t[a];let r=[];e?r=e:c&&(r=[c]),r.forEach(e=>n.add(e))}return[...n]}function Ce(e){return`bubbled-${e}`}const Te=Object(H.a)((e,t)=>ae(e),(e,t)=>Ce(t),(e,t)=>e[t]),De=Object(H.a)(Te,oe,(e,t)=>{const{bubbled:n}=t;return!(!e||void 0!==n)||n}),Pe=Object(H.a)((e,t)=>t,(e,t)=>De(e,t),(e,t)=>Ce(t),(e,t,n)=>{let a=e;return t&&(a=n),a}),Re=Object(H.a)((e,t)=>t,(e,t)=>Z(e),(e,t)=>{let n;switch(e){case"funcs":n=t.funcs;break;case"states":default:n=t.configs}return n}),Ae="frame",$e="cstack",Ne=Object(H.a)(e=>te(e),e=>e.mainGraphId||"funcs"),_e=Object(H.a)(e=>Pe(e,Ne(e)),e=>e),Ue=Object(H.a)(e=>se(e,_e(e)),e=>Z(e),(e,t)=>{let n="states";if(e.length>0){const a=e[0],{form:c}=t.funcs[a];["halt","not found","non-func","unknown"].includes(c)||(n=a)}return n});var Le=n("jjAL"),ze=n("gd/W"),Me=n("PgHX");var Fe=function(e){const{items:t}=e,[n,a]=Object(o.useState)(void 0);function c(){a(void 0)}const r=t.map(e=>{const{label:t,callback:n}=e;return s.a.createElement(Le.a,{key:t,onClick:()=>{c(),n()}},t)});return s.a.createElement(o.Fragment,null,s.a.createElement(Ye,{icon:s.a.createElement(Me.a,null),size:"medium",onClick:function(e){a(e.currentTarget)}}),s.a.createElement(ze.a,{anchorEl:n,getContentAnchorEl:void 0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(n),onClose:c},r))};const He=Object(D.a)(e=>({typography:{fontWeight:700,lineHeight:2,marginRight:10}}));var Ge=function(e){const{item:t}=e,{debug:n}=t,a=He();if(!n)return s.a.createElement(T.a,null,"Debug property undefined");let c;return c="string"==typeof n?s.a.createElement(T.a,null,n):n instanceof Array?n.map((e,t)=>s.a.createElement("div",{key:t,style:{display:"flex"}},s.a.createElement(T.a,{variant:"caption",classes:{root:a.typography}},t),s.a.createElement(T.a,null,e))):s.a.createElement(T.a,null,"Invalid debug property type: ",typeof n),c},Be=n("iNvf");var Je=function(e){const{item:t}=e,{debug:n}=t;return n?s.a.createElement(tt,{icon:s.a.createElement(Be.a,null),tooltip:"Show debug"},s.a.createElement(Ge,{item:t})):null},qe=n("csfp"),We=n("PsDL"),Xe=n("/HlT");class Ve extends o.Component{constructor(e){super(e),this.state={error:!1}}static getDerivedStateFromError(e){return{error:!0}}componentDidCatch(e,t){}render(){const{children:e,onReset:t}=this.props;return this.state.error?s.a.createElement(ht,{content:"Error caught",buttons:s.a.createElement(Ke,{onClick:t})}):e}}function Ke(e){const{onClick:t}=e;return s.a.createElement(qe.a,{title:"Restart"},s.a.createElement(We.a,{size:"small",onClick:t},s.a.createElement(Xe.a,null)))}var Qe=function(e){const{children:t}=e,[n,a]=Object(o.useState)(0);return s.a.createElement(Ve,{key:n,onReset:()=>a(n+1)},t)};var Ye=function(e){const{icon:t,size:n="small",tooltip:a,onClick:c}=e;let r=s.a.createElement(We.a,{size:n,onClick:c},t);return a&&(r=s.a.createElement(qe.a,{title:a},r)),r},Ze=n("5Gel"),et=n("ucgz");var tt=Object(et.a)({paper:{padding:"1em"}})((function(e){const{icon:t,tooltip:n,children:a,classes:c}=e,[r,l]=Object(o.useState)(void 0);return s.a.createElement(o.Fragment,null,s.a.createElement(qe.a,{title:n},s.a.createElement(We.a,{size:"small",onClick:function(e){e.stopPropagation(),l(e.currentTarget)}},t)),s.a.createElement(Ze.a,{open:Boolean(r),anchorEl:r,onClose:function(e){e.stopPropagation(),l(void 0)},classes:{paper:c.paper}},a))}));var nt=function(e){const{icon:t,tooltip:n,enabled:a,onToggle:c}=e,r=a?"secondary":"inherit",o=s.a.cloneElement(t,{color:r}),l=`${a?"Disable":"Enable"} ${n}`;return s.a.createElement(Ye,{icon:o,tooltip:l,onClick:c})},at=n("hlie");function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var rt=function(e){const{content:t,tooltip:n,onClick:a,style:c}=e;return s.a.createElement(qe.a,{title:n},s.a.createElement(at.a,ct({onClick:e=>{e.stopPropagation(),a()}},{style:c}),s.a.createElement(T.a,{display:"inline",style:{cursor:"pointer"}},t)))},ot=n("kKU3"),st=n("iae6"),lt=n("de8u");var it=function(e){const{status:t,variant:n="circular"}=e;let a;switch(n){case"circular":a=s.a.createElement(ut,{style:{justifyContent:"center",alignItems:"center"}},s.a.createElement(ot.a,{in:!0,style:{transitionDelay:"1000ms"}},s.a.createElement(st.a,null)),s.a.createElement(ot.a,{in:!0,style:{transitionDelay:"200ms"}},s.a.createElement(T.a,{variant:"h6",style:{marginTop:"2em"}},t)));break;case"linear":a=s.a.createElement(ut,null,s.a.createElement(lt.a,null),s.a.createElement(T.a,{variant:"h6",style:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},this.props.status))}return a};var ut=function(e){const{overflow:t,children:n,style:a}=e,[c,r]=Object(o.useState)(0),l=Object(o.useCallback)(e=>{e&&r(e.offsetWidth)},[]);let i,u,d;return s.a.Children.forEach(n,e=>{const{type:t}=e;"PaneContent"===t.name?i=e:t.$$typeof&&t.$$typeof===Symbol.for("react.forward_ref")&&"PaneToolbar"===t.render.name&&(u=e)}),i&&u?(i=s.a.cloneElement(i,{style:{width:`calc(100% - ${c}px)`}}),u=s.a.cloneElement(u,{ref:l}),d=s.a.createElement(dt,{overflow:t,style:{flexDirection:"row"}},s.a.createElement(mt.Provider,{value:{toolbarWidth:c}},i,u))):d=s.a.createElement(dt,{overflow:t,style:a},n),d};function dt(e){const{overflow:t="hidden",children:n,style:a}=e,{height:c="100%",width:r="100%"}=Object(o.useContext)(At);return s.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:c,width:r,overflow:t,...a}},s.a.createElement(At.Provider,{value:{height:"100%",width:"100%"}},s.a.createElement(Qe,null,n)))}var ft=function(e){const{children:t}=e;return s.a.createElement(ut,null,t)},mt=s.a.createContext({}),pt=n("kKAo");const Et=Object(D.a)(e=>({toolbar:{zIndex:e.zIndex.drawer+1}}));var bt=Object(o.forwardRef)((function(e,t){const{children:n}=e,a=Et();return s.a.createElement(pt.a,{square:!0,ref:t,classes:{root:a.toolbar}},n)}));const yt=Object(D.a)(e=>({appbar:e.mixins.toolbar,message:e.mixins.message,drawer:{position:"absolute",top:0,left:0,zIndex:e.zIndex.drawer}}));var gt=function(e){const{open:t,children:n}=e,{toolbarWidth:a}=Object(o.useContext)(mt),c=yt();return s.a.createElement(ot.a,{in:t},s.a.createElement(pt.a,{square:!0,classes:{root:c.drawer},style:{width:`calc(100% - ${a}px)`,height:"100%",marginRight:a}},s.a.createElement(Qe,null,n)))};var ht=function(e){const{content:t,buttons:n}=e;return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(T.a,{variant:"h6",style:{margin:"0 1em"}},t),n))},vt=n("3PeG"),jt=n("sRsu"),Ot=n("/EAt"),kt=n("Imu7"),wt=n("Uf6+");var It=function(e){const t=e.labels.map(e=>s.a.createElement(vt.a,{key:e},e)),n=e.entries.map((e,t)=>{const n=e.map((e,t)=>s.a.createElement(vt.a,{key:t},e));return s.a.createElement(jt.a,{key:t},n)});return s.a.createElement(Ot.a,{size:"small"},s.a.createElement(kt.a,null,s.a.createElement(jt.a,null,t)),s.a.createElement(wt.a,null,n))},St=n("lO0E");function xt(e){const t=e.theme;return s.a.createElement(St.a,{variant:"dense",style:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,minHeight:"auto"}},s.a.createElement(T.a,null,e.content))}xt=Object(R.a)(xt);var Ct=function(e){const{label:t,panels:n}=e,a=[...Object.entries(n).filter(([t,n])=>{const{saved:a}=n,c=a;let r=!0;return e.onFilterSaved&&(r=e.onFilterSaved([t,n])),c&&r}).map(e.onGenerate),...Object.entries(n).filter(([t,n])=>{const{saved:a,hidden:c}=n,r=!a&&!c;let o=!0;return e.onFilterUnsaved&&(o=e.onFilterUnsaved([t,n])),r&&o}).map(e.onGenerate)];return s.a.createElement(o.Fragment,null,s.a.createElement(xt,{content:t}),s.a.createElement("div",{style:{overflowY:"auto"}},a))};var Tt=function(e){const{children:t,childrenStyle:n,noDiv:a}=e,c=s.a.Children.map(t,e=>{if(e){const t={...e.props.style,...n};return s.a.cloneElement(e,{style:t})}});let r;return r=a?s.a.createElement(o.Fragment,null,c):s.a.createElement("div",null,c),r};function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Pt(e){const{horizontal:t,onMouseDown:n}=e;let a;return a=t?{height:5,cursor:"ns-resize"}:{width:5,cursor:"ew-resize"},s.a.createElement("div",{style:{backgroundColor:"darkgray",...a},onMouseDown:n})}var Rt=function(e){const{horizontal:t,children:n,style:a}=e,c=Object(o.useRef)(void 0),[r,l]=Object(o.useState)(!1),i=n[0].props,u=parseInt(i.width||i.height),[d,f]=Object(o.useState)(u);function m(){r&&l(!1)}let p,E,b;t?(p="height",E="horizontal",b="ns-resize"):(p="width",E="vertical",b="ew-resize");const[y,g]=n;return s.a.createElement("div",{ref:c,style:{display:"flex",flexDirection:t?"column":"row",flex:"1 1 auto",cursor:r?b:"default",minHeight:0,...a},onMouseMove:function(e){if(r){!function(){const e=window.getSelection();e&&e.removeAllRanges()}();const n=c.current.getBoundingClientRect();let a;a=t?(e.clientY-n.y)/n.height*100:(e.clientX-n.x)/n.width*100,f(a)}},onMouseUp:m,onMouseLeave:m},s.a.createElement(At.Provider,{value:{[p]:`${d}%`}},y),s.a.createElement(Pt,Dt({[E]:!0},{onMouseDown:function(){l(!0)}})),s.a.createElement(At.Provider,{value:{[p]:`${100-d}%`}},g))},At=s.a.createContext({}),$t=n("ROFb"),Nt=n.n($t),_t=n("zF/2");function Ut(e,t){return n=>{const a=n.data("style");return a&&a[e]?a[e]:t}}var Lt=function(e,t,n,a){const{label:c="",style:r}=a;return{group:"edges",data:{id:e,label:c,source:t,target:n,style:r}}};var zt=function(e,t){return{group:"nodes",data:{id:e,label:e,...t}}};var Mt=function(e,t){const{graph:n,start:a}=t,c=oa(e),r=[];function o(e){const t={entrypoint:!!a.includes(e)||void 0,...c(e)};r.push(zt(e,t))}function s(e,t,n){const a=`${e}-${t}`;r.push(Lt(a,e,t,n))}for(const[e,t]of Object.entries(n)){o(e);for(const[a,c]of Object.entries(t))n[a]||o(a),s(e,a,c)}return r};function Ft(e,t,n){const a=Object(u.d)(e=>ye(e,t)),c=Object(u.d)(e=>de(e,t)),r=Object(u.c)();Object(o.useEffect)(()=>{const o=Mt(t,a);return e.add(o),c?(e.nodes().positions(e=>c[e.data("id")]),e.fit()):e.layout(n).run(),()=>{const n={};for(const t of o){const a=t.data.id;n[a]=e.$id(a).position()}r(function(e,t){return la(e,{positions:t})}(t,n)),e.nodes().remove()}},[a])}function Ht(e,t,n){const a=Object(o.useRef)(!0);return function(e,t,n,a){const c=Object(u.c)();Object(o.useEffect)(()=>{e.off("tap"),e.on("tap",()=>c(function(e){const t=C.getState(),n=B(t);return Na(n,{focusedGraph:e})}(t)))},[t])}(e,t),function(e,t,n,a){const{onNodeSelect:c,onEdgeSelect:r,edgePredicate:s}=a,l=Object(u.c)();Object(o.useEffect)(()=>{e.off("select"),e.on("select","node",e=>{if(n.current){const n=e.target.id();l(ia(t,[n])),c&&c(n)}}),e.on("select","edge",e=>{if(n.current){const n=e.target;if(s(n)){const e=n.id();l(da(t,[e])),r&&r(e)}else n.unselect()}})},[t])}(e,t,a,n),function(e,t,n,a){const{onNodeUnselect:c,onEdgeUnselect:r}=a,s=Object(u.c)();Object(o.useEffect)(()=>{e.off("unselect"),e.on("unselect","node",e=>{if(n.current){const n=e.target.id();s(function(e,t){return(n,a)=>{const c=a(),r=se(c,e),o=new Set(r);t.forEach(e=>o.delete(e)),n(la(e,{selectedNodes:[...o]})),n(ra())}}(t,[n])),c&&c(n)}}),e.on("unselect","edge",e=>{if(n.current){const n=e.target.id();s(da(t,[])),r&&r(n)}})},[t])}(e,t,a,n),function(e,t,n,a){const c=Object(u.c)();Object(o.useEffect)(()=>{e.off("mouseover"),e.on("mouseover","node",e=>{const n=e.target.id();c(ua(t,[n]))})},[t])}(e,t),function(e,t,n,a){const c=Object(u.c)();Object(o.useEffect)(()=>{e.off("mouseout"),e.on("mouseout","node",e=>{c(ua(t,[]))})},[t])}(e,t),function(e){a.current=!1,e(),a.current=!0}}function Gt(e,t){const n=Object(u.d)(e=>Ee(e,t)),a=Object(o.useRef)(n);Object(o.useEffect)(()=>{a.current=n},[n]),function(e,t){function n(n){if(t.current){const t=e.$("node:selected");switch(n.key){case"ArrowLeft":const e=t.incomers().nodes();1==e.length&&(t.unselect(),e.select());break;case"ArrowRight":const n=t.outgoers().nodes();1==n.length&&(t.unselect(),n.select())}}}Object(o.useEffect)(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}),[])}(e,a)}function Bt(e,t,n){const a=Object(u.d)(e=>se(e,t)),c=Object(u.d)(e=>le(e,t)),r=Object(u.d)(e=>ie(e,t)),s=Object(u.d)(e=>ue(e,t));async function l(t,n){e.batch(()=>{for(const a of t)e.getElementById(a).addClass(n)})}async function i(t,n){e.batch(()=>{for(const a of t)e.getElementById(a).removeClass(n)})}Object(o.useEffect)(()=>(n(()=>async function(t){e.batch(()=>{for(const n of t)e.getElementById(n).select()})}([...a,...c])),()=>{n(()=>async function(t){e.batch(()=>{for(const n of t)e.getElementById(n).unselect()})}([...a,c]))}),[a,c]),Object(o.useEffect)(()=>(n(()=>l(s,"suggested")),()=>{n(()=>i(s,"suggested"))}),[s]),Object(o.useEffect)(()=>(n(()=>l(r,"hovered")),()=>{n(()=>i(r,"hovered"))}),[r])}function Jt(e){const{graphId:t,onNodeSelect:n,onNodeUnselect:a,edgePredicate:c=(e=>!1),onEdgeSelect:r,onEdgeUnselect:l,external:i,config:d,layout:f={name:"cose",directed:!0},htmlLabels:m=[],theme:p,style:E}=e,b=Object(u.d)(B);if(!Object(u.d)(e=>ye(e,t)))return s.a.createElement(ht,{content:`'${t}' graph undefined`});const y=Object(u.c)(),g=Object(o.useRef)(void 0),h=Object(o.useRef)(Nt()(d||function(e){return{style:[{selector:"node",style:{label:"data(label)","text-wrap":"wrap"}},{selector:"node[entrypoint]",style:{shape:"round-tag","background-color":e.palette.primary.main}},{selector:"node:selected",style:{"background-color":e.palette.select.main}},{selector:"edge",style:{label:"data(label)","curve-style":"bezier","line-color":Ut("line-color",e.palette.grey[500]),"line-style":Ut("line-style","solid"),"target-arrow-shape":"triangle","target-arrow-color":Ut("target-arrow-color",e.palette.grey[500])}},{selector:"edge:selected",style:{"line-color":e.palette.select.main,"target-arrow-color":e.palette.select.main}},{selector:".suggested",style:{"background-color":e.palette.suggest.main}},{selector:e=>e.hasClass("suggested")&&e.selected(),style:{"background-color":e.palette.suggest.dark}},{selector:".hovered",style:{"background-color":e.palette.hover.main}}],headless:!0}}(p))).current;Object(o.useEffect)(()=>(h.mount(g.current),()=>h.unmount()),[]);const v=Ht(h,t,{onNodeSelect:n,onNodeUnselect:a,onEdgeSelect:r,onEdgeUnselect:l,edgePredicate:c});return Gt(h,t),Ft(h,t,f),Bt(h,t,v),function(e,t){const n=Object(o.useRef)(void 0);Object(o.useEffect)(()=>{n.current=e.current.getBoundingClientRect()}),Object(o.useEffect)(()=>{t.resize()},[n.current])}(g,h),Object(o.useEffect)(()=>{h.nodeHtmlLabel(m)},[t]),Object(o.useEffect)(()=>{if(!i)return y(function(e){const t=C.getState(),n=fe(t,e);return sa(e,n+1)}(t)),()=>{y(function(e,t){const n=C.getState(),a=fe(n,e,t);return sa(e,a-1,t)}(t,b))}},[t]),s.a.createElement("div",{ref:g,style:{flex:"1 1 1%",display:"block",minHeight:0,width:"100%",...E}})}n.n(_t)()(Nt.a);var qt=Jt=Object(R.a)(Jt),Wt=n("G08z"),Xt=n("lFb4"),Vt=n("Dl3h"),Kt=n("aXMt"),Qt=n("5sOi"),Yt=n("U2vl"),Zt=n("vn1N"),en=n("yKwf"),tn=n("3Qh7"),nn=n("BNdo");function an(){return(an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function cn(e){const{panelId:t,panelType:n,onSelect:a,onUnselect:c,onMouseOver:r,onMouseOut:l,children:i,theme:d,classes:f}=e,m=Object(u.d)(e=>we(e,n))[t],p=Object(u.c)(),[E,b]=Object(o.useState)(!1);const{label:y,selected:g,saved:h}=m;let v,j;j=e.disableSelect?s.a.createElement(rn,{icon:s.a.createElement(Kt.a,{color:"disabled"}),tooltip:e.disableSelectMsg,disabled:!0}):g?s.a.createElement(rn,{icon:s.a.createElement(Yt.a,null),tooltip:"Unselect",onClick:function(){p(wa(n,t)),c&&c()}}):s.a.createElement(rn,{icon:s.a.createElement(Qt.a,null),tooltip:"Select",onClick:function(){p(ka(n,t)),a&&a()}}),v=h?s.a.createElement(rn,{icon:s.a.createElement(en.a,null),tooltip:"Unsave",onClick:()=>p(Oa(n,t))}):s.a.createElement(rn,{icon:s.a.createElement(Zt.a,null),tooltip:"Save",onClick:()=>p(ja(n,t))});const O=s.a.createElement(rn,{icon:s.a.createElement(tn.a,null),tooltip:"Delete",onClick:()=>p(ha(n,t))});return s.a.createElement(Wt.a,{onMouseOver:()=>{E||(r(),b(!0))},onMouseOut:()=>{E&&(l(),b(!1))},defaultExpanded:!h},s.a.createElement(Xt.a,{expandIcon:s.a.createElement(nn.a,null),classes:{root:f.panelRoot,content:f.panelContent,expandIcon:f.panelExpandIcon,expanded:f.panelExpanded},style:{backgroundColor:E?d.palette.hover.light:void 0}},j,v,O,s.a.createElement(T.a,null,y)),s.a.createElement(Vt.a,null,i))}function rn(e){const{icon:t,tooltip:n,disabled:a,onClick:c}=e,r={};return a?(r.disableRipple=!0,r.onClick=e=>{e.stopPropagation()}):r.onClick=e=>{e.stopPropagation(),c()},s.a.createElement(qe.a,{title:n},s.a.createElement(We.a,an({size:"small"},r),t))}var on=cn=Object(et.a)(e=>({panelRoot:{minHeight:0,"&$panelExpanded":{minHeight:0}},panelContent:{alignItems:"center",margin:"5px 0","&$panelExpanded":{margin:"8px 0"}},panelExpandIcon:{padding:"5px 12px"},panelExpanded:{}}),{withTheme:!0})(cn);var sn=function(e){const{item:t}=e,{vals:n,env:a}=t;let c;return n&&(c=n.map((e,t)=>{const n=e.map(e=>s.a.createElement(An,{key:e,valId:e}));return s.a.createElement("div",{key:t,style:{flex:"1 1 auto"}},n)})),s.a.createElement("div",{style:{display:"flex"}},c)};var ln=n("30+C"),un=n("oa/T"),dn=n("ePBu");var fn=class{constructor(e,t){this.cardIds=e,this.cardType=t,this.selected=void 0}select(e){this.selected=e}unselect(e){this.selected=void 0}get cards(){return this.cardIds}get type(){return this.cardType}};function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function pn(e){const{frameId:t,selected:n,theme:a,classes:c,onSet:r,onUnset:o}=e;let{onClick:l}=e;const i=Object(u.d)(Z),d=i.frames[t],{form:f,type:m,frames:p,cstacks:E,next:b}=d;let y,g;switch(f){case"addr":{const{func:e,env:n}=d;y=s.a.createElement(En,null,s.a.createElement(Rn,{stackId:t,stackType:Ae}),s.a.createElement(bn,{label:"Form"},f),s.a.createElement(bn,{label:"Function"},i.funcs[e].form),s.a.createElement(Dn,{envId:n}));break}case"frame":{const{env:e,instr:t,exprString:n}=d,a=i.instr[t].exprStrings.join(", ");y=s.a.createElement(En,null,s.a.createElement(bn,{label:"Type"},m),s.a.createElement(Dn,{envId:e}),s.a.createElement(bn,{label:"Instrumentation"},`[ ${a} ]`)),g=s.a.createElement(T.a,null,n);break}default:y=s.a.createElement(En,null,s.a.createElement(Rn,{stackId:t,stackType:Ae}),s.a.createElement(bn,{label:"Form"},f))}if(!l){let e;p?e=new fn(p,Ae):E?e=new fn(E,$e):b&&(e=new fn([b],Ae)),e&&(l=n?o:()=>r(e))}return s.a.createElement(ln.a,{key:t,onClick:l,classes:{root:l?c.enableHover:void 0},style:{flex:"1 0 0",backgroundColor:n?a.palette.select.light:void 0,cursor:l?"pointer":void 0,minWidth:100}},s.a.createElement(un.a,{style:{padding:8}},s.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"}},y,s.a.createElement("div",null,s.a.createElement(Je,{item:d}),s.a.createElement(yn,{content:g}))),s.a.createElement(sn,{item:d})))}function En(e){const{children:t}=e,n=s.a.Children.map(t,e=>s.a.cloneElement(e,{style:{marginRight:"5px"}}));return s.a.createElement("div",null,n)}function bn(e){const{label:t,children:n,style:a}=e;return s.a.createElement(qe.a,{title:t},s.a.createElement(T.a,mn({display:"inline"},{style:a}),n))}function yn(e){const{content:t}=e;return t?s.a.createElement(tt,{icon:s.a.createElement(dn.a,null),tooltip:"Show info"},t):null}var gn=pn=Object(et.a)(e=>({enableHover:{"&:hover":{backgroundColor:`${e.palette.hover.light} !important`}}}),{withTheme:!0})(pn);var hn=function(e){const{children:t}=e;return s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"5px 0",justifyContent:"center"}},t)};function vn(e){const{cstackId:t,selected:n,onSet:a,onUnset:c}=e,{cstacks:r}=Object(u.d)(Z),o=r[t][0],l=n?()=>c(t):()=>a(t);return s.a.createElement(gn,{frameId:o,selected:n,onClick:l})}var jn=function(e){const{layer:t,onSet:n,onUnset:a}=e,c=t.cards.map(e=>s.a.createElement(vn,{key:e,cstackId:e,selected:t.selected===e,onSet:n,onUnset:a}));return s.a.createElement(o.Fragment,null,s.a.createElement(hn,null,c),t.selected?s.a.createElement(wn,{cstackId:t.selected}):null)};var On=function(e){const{layer:t,onSet:n,onUnset:a}=e,c=t.cards.map(e=>s.a.createElement(gn,{key:e,frameId:e,selected:t.selected===e,onSet:t=>n(e,t),onUnset:()=>a(e)}));return s.a.createElement(hn,null,c)};var kn=function(e){const{frameId:t}=e,n=Object(u.d)(Z),[a,c]=Object(o.useState)([new fn([t],Ae)]);function r(e,t){const n=i(e);n[n.length-1].select(t),c(n)}function l(e,t){const n=i(e);n[n.length-1].unselect(t),c(n)}function i(e){return a.slice(0,e+1)}return a.map((e,t)=>{let i,u;switch(e.type){case $e:i=s.a.createElement(jn,{layer:e,onSet:e=>r(t,e),onUnset:e=>l(t,e)});break;default:i=s.a.createElement(On,{layer:e,onSet:(e,n)=>function(e,t,n){r(e,t),c([...a,n])}(t,e,n),onUnset:e=>l(t,e)})}const d=t===a.length-1,f=function(e){const t=a[e];switch(t.type){case Ae:for(const e of t.cards){const{frames:t,cstacks:a,next:c}=n.frames[e];if(t||a||c)return!0}return!1;default:return!1}}(t);return d&&f&&(u=s.a.createElement(hn,null,s.a.createElement(Me.a,{color:"disabled"}))),s.a.createElement(o.Fragment,{key:t},i,u)})};var wn=function(e){const{cstackId:t}=e,{cstacks:n}=Object(u.d)(Z),a=n[t].map(e=>s.a.createElement(kn,{key:e,frameId:e}));return s.a.createElement("div",{style:{margin:5}},a)};var In=function(){const e=Object(u.d)(e=>we(e,"stacks"));return s.a.createElement(Ct,{label:"Stacks",panels:e,onGenerate:function([e,t]){const{[Ae]:n,[$e]:a}=t;let c;return c=n?s.a.createElement(kn,{frameId:n}):s.a.createElement(wn,{cstackId:a}),s.a.createElement(on,{key:e,panelId:e,panelType:"stacks",onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},s.a.createElement("div",{style:{width:"100%"}},c))}})};function Sn(){const e=C.getState(),t=Z(e),n=we(e,"configs"),a=[];for(const[e,c]of Object.entries(n))if(!c.hidden&&c.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e],{[Ae]:c,[$e]:r}=n,o=xn(c||r,c?Ae:$e);a.push(o)}}return Ia("stacks",(e,t)=>a.includes(e)?{hidden:!1}:{hidden:!0})}function xn(e,t){return`${t}-${e}`}function Cn(e){return function(t,n){const a=n(),c=Z(a,e);c.configs&&t(function(e){return(t,n)=>{const a=n(),c=Z(a,e),r={};for(const[e,t]of Object.entries(c.configs)){const{form:n,states:a}=t;let o;if(a){const e=a[0],t=c.states[e];switch(t.form){case"halt":if(t.results){o=`[ ${t.results.map(e=>{const{type:t,name:n,valString:a}=c.vals[e];let r;switch(t){case"closure":r=n;break;case"bool":r=a}return r}).join(", ")} ]`}break;default:o=t.exprString}}const s=`${W(t)||e}: ${n} - ${o}`;r[e]=Sa(s)}t(ga(e,"configs",r))}}(e)),c.envs&&t(function(e){return(t,n)=>{const a=n(),c=Z(a,e),r={};for(const[e,t]of Object.entries(c.envs)){const n=t.entries.map(e=>e.label).join(", "),a=`${W(t)||e}: [ ${n} ]`;r[e]=Sa(a)}t(ga(e,"envs",r))}}(e)),(c.frames||c.cstacks)&&t(function(e){return(t,n)=>{const a=n(),c=Z(a,e),r={};if(c.frames)for(const[e,t]of Object.entries(c.frames)){const{descs:n}=t;let a=`${W(t)||e}: `;n.length>1?a+=`[ ${n[0]}, ... +${n.length-1} ]`:a+=`[ ${n[0]} ]`,r[xn(e,Ae)]={...Sa(a),frame:e}}if(c.cstacks)for(const[e,t]of Object.entries(c.cstacks)){let n=`${W(t)||e}`;r[xn(e,$e)]={...Sa(n),cstack:e}}t(ga(e,"stacks",r))}}(e))}}function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Dn=function(e){const{envId:t,style:n}=e,{envs:a}=Object(u.d)(Z),c=Object(u.c)();return s.a.createElement(rt,Tn({content:W(a[t])||t,tooltip:`Show environment ${t}`,onClick:()=>c(va("envs",t))},{style:n}))};function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Rn=function(e){const{stackId:t,stackType:n,style:a}=e,c=Object(u.c)(),r=function(e){const t=C.getState(),n=Z(t);switch(e){case $e:return n.cstacks;case Ae:return n.frames}}(n);return s.a.createElement(rt,Pn({content:W(r[t])||t,tooltip:`Show stack ${t}`,onClick:()=>c(function(e,t){const n=xn(e,t);return va("stacks",n)}(t,n))},{style:a}))};var An=function(e){const{valId:t,style:n}=e,a=Object(u.d)(Z),{type:c,label:r,env:o}=a.vals[t];let l=t;switch(c){case"bool":case"closure":case"unit":r&&(l=r);break;default:r&&(l=`'${r}' value type unsupported`)}return s.a.createElement(Tt,{childrenStyle:{marginRight:5}},s.a.createElement("div",{style:{display:"inline-block"}},s.a.createElement(T.a,{display:"inline"},l)),o?s.a.createElement(Dn,{envId:o}):void 0)};var $n=function(e){const{envId:t}=e,n=Object(u.d)(Z),{envs:a,instr:c,store:r,vals:o}=n,l=a[t].entries.map(e=>{const t=c[e.instr].exprStrings.join(", "),n=r[e.addr].map(e=>s.a.createElement(An,{key:e,valId:e}));return[e.label,`[ ${t} ]`,n]});return s.a.createElement(It,{labels:["var","instr","store"],entries:l})};var Nn=function(){const e=Object(u.d)(e=>we(e,"envs"));return s.a.createElement(Ct,{label:"Environments",panels:e,onGenerate:function([e,t]){return s.a.createElement(on,{key:e,panelId:e,panelType:"envs",onMouseOver:()=>{},onMouseOut:()=>{},disableSelect:!0,disableSelectMsg:"No action"},s.a.createElement($n,{envId:e}))}})};function _n(){const e=C.getState(),t=Z(e),n=we(e,"configs"),a=[];for(const[e,c]of Object.entries(n))if(!c.hidden&&c.selected){const n=t.configs[e].states;if(n)for(const e of n){const n=t.states[e].env;n&&a.push(n)}}return Ia("envs",(e,t)=>a.includes(e)?{hidden:!1}:{hidden:!0})}function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ln=function(e){const{stateId:t}=e,n=Object(u.d)(Z),a=n.states[t],{instr:c,frame:r,cstack:o,env:l}=a,i=n.instr[c].exprStrings.join(", "),d=s.a.createElement(T.a,{display:"inline"},`[ ${i} ]`),f=r||o,m=r?Ae:$e,p=s.a.createElement(Rn,Un({stackId:f},{stackType:m})),E=l?s.a.createElement(Dn,{envId:l}):void 0;return s.a.createElement(ln.a,{style:{width:"100%"}},s.a.createElement(un.a,{style:{padding:8}},s.a.createElement(Tt,{childrenStyle:{marginRight:5}},d,p,E),s.a.createElement(sn,{item:a})))};var zn=function(e){const{configId:t}=e,n=Object(u.d)(Z),{states:a}=n.configs[t];let c;return a&&(c=a.map(e=>{const{form:t}=n.states[e];switch(t){case"halt":return;default:return s.a.createElement(Ln,{key:e,stateId:e})}})),s.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},c)};function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Fn=function(){const e=Object(u.d)(e=>we(e,"configs")),t=Object(u.d)(Z),n=Object(u.d)(Ue),a=Object(u.c)();function c(){a(_n()),a(Sn())}const r={onFilterSaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)},onFilterUnsaved:function([e,n]){return!["not found","non-func"].includes(t.configs[e].form)}};return s.a.createElement(Ct,Mn({label:"Configurations",panels:e,onGenerate:function([e,t]){return s.a.createElement(on,{key:e,panelId:e,panelType:"configs",onMouseOver:()=>a(ua(n,[e])),onMouseOut:()=>a(ua(n,[])),onSelect:c,onUnselect:c},s.a.createElement(zn,{configId:e}))}},r))};function Hn(){const e=C.getState(),t=Ue(e),n=Pe(e,t),a=se(e,n);return Ia("configs",(e,t)=>a.includes(e)?{selected:!0,hidden:!1}:{hidden:!0})}function Gn(){return function(e){e(Hn()),e(_n()),e(Sn())}}function Bn(){return function(e){e(Hn()),e(_n()),e(Sn())}}function Jn(e){const t=C.getState(),n=Re(t,e);return function(e){let t=e;if(n[e]){const a=n[e].form;a&&(t+=`\n${a}`)}return{label:t}}}function qn(e){return function(t){t(Cn(e))}}function Wn(e){const{processed:t,analysisOutput:n}=e;return t||(!function(e){const{graphs:t}=e;for(const[e,n]of Object.entries(t)){const{start:e}=n;e instanceof Array||(n.start=[e])}}(n),function(e){const{states:t,configs:n}=e;for(const[e,a]of Object.entries(t)){const{form:t,expr:c}=a;n[e]={form:t,states:[e],astLink:[c]}}}(n),function(e){const{graphs:t,configs:n}=e,a=new Zn;for(const[c,r]of Object.entries(t)){const o=Ce(c);switch(c){case"states":{const e=Xn(r),c=Vn(a,e,r);Yn(c,n),t[o]=Qn(c);break}default:{const n=Xn(r),c=Vn(a,n,r);Kn(a,c,r,e),t[o]=Qn(c);break}}}}(n),e.processed=!0),e}function Xn(e){const{graph:t,start:n}=e,a={};for(const e of n)a[e]={start:!0};const c=[...n];for(;c.length>0;){const e=c.shift(),n=t[e];a[e].visited=!0;const r=Object.keys(n);for(const e of r)a[e]||(a[e]={}),a[e].visited?a[e].visited&&(a[e].start=!0):(c.push(e),r.length>1&&(a[e].start=!0))}const r={};for(const[e,t]of Object.entries(a))t.start&&(r[e]=void 0);return r}function Vn(e,t,n){const{graph:a,start:c}=n,r={};for(const n of Object.keys(t)){const o=e.getId();t[n]=o;const s=new ta(n);c.includes(n)&&s.setEntry(!0),r[o]=s;let l=n;for(;l;){const e=a[l],n=Object.keys(e);if(n.length>1){for(const a of n)t.hasOwnProperty(a)?s.addEdge(a,e[a]):console.error("bubble processing - multiple edges without path start");l=void 0}else if(1===n.length){const a=n[0];t.hasOwnProperty(a)?(s.addEdge(a,e[a]),l=void 0):(s.addNode(a),l=a)}else l=void 0}}for(const[e,t]of Object.entries(r))if(t.isSingleton()){const n=t.nodes[0],a=new ea;a.entry=t.entry,a.edges=t.edges,r[n]=a,delete r[e]}return r}function Kn(e,t,n,a){const{graph:c,start:r}=n,{configs:o,states:s}=a,l={};for(const[n,a]of Object.entries(t))if(a instanceof ta){const r=a.nodes.length;if(2===r){const e=a.nodes[1];t[e]=new ea(a);const n=a.nodes[0],r=new ea;r.entry=a.entry;const o=c[n][e];r.addEdge(e,o),t[n]=r}else if(r>2){const n=a.nodes[r-1];t[n]=new ea(a);const i=a.nodes[0],{states:u}=o[i],d=[],f=c[a.nodes[r-2]][n],m=a.entry;for(const a of u){const c=e.getId();d.push(c);const r=new ta(a);r.entry=m,r.addEdge(n,f),t[c]=r}l[i]=d;for(const e of a.nodes.slice(1,-1)){const{states:n}=o[e];for(let e=0;e<n.length;e++){t[d[e]].addNode(n[e])}}for(const e of d){const n=t[e],a=n.nodes,c=a.map(e=>s[e].expr);o[e]={states:a,astLink:c};const r=new ea(n);r.entry=n.entry,t[e]=r}}delete t[n]}for(const[e,n]of Object.entries(t))n.spreadEdges(l)}function Qn(e){const t={},n=[];for(const[a,c]of Object.entries(e))c.linkEdges(e),t[a]=c.edges,c.entry&&n.push(a);return{graph:t,start:n}}function Yn(e,t){for(const[n,a]of Object.entries(e))if(a instanceof ta){let e=[],c=[];for(const n of a.nodes){const a=t[n];e=e.concat(a.states),c=c.concat(a.astLink)}t[n]={states:e,astLink:c}}}class Zn{constructor(){this.count=0}getId(){return this.count+=1,`bubble-${this.count}`}}class ea{constructor(e){this.edges=e?e.edges:{},this.entry=!1}setEntry(e){this.entry=e}addEdge(e,t){this.edges[e]=t}linkEdges(e){for(const[t,n]of Object.entries(this.edges))for(const[a,c]of Object.entries(e))if(c instanceof ta&&c.nodes.includes(t)){this.edges[a]=n,delete this.edges[t];break}}spreadEdges(e){for(const[t,n]of Object.entries(this.edges))for(const[a,c]of Object.entries(e))if(t===a){for(const e of c)this.edges[e]=n;delete this.edges[t];break}}}class ta extends ea{constructor(e){super(),this.nodes=[],e&&this.addNode(e)}addNode(e){this.nodes.push(e)}isSingleton(){return 1===this.nodes.length}}const na=function(e,t,n){let a=e[t];return a||(a=function(){}),a}(c,"dataProcessHook"),aa=E(c,"generateMetadataHook"),ca=E(c,"nodeSelectHook"),ra=E(c,"nodeUnselectHook"),oa=function(e,t,n){let a=e[t];return a||(a=function(){return function(){}}),a}(c,"cyNodeDataHook");function sa(e,t,n){return la(e,{viewers:t},n)}function la(e,t,n){const a=C.getState();return n||(n=B(a)),{type:"SET_GRAPH_METADATA",payload:{projectId:n,graphId:e,data:t}}}function ia(e,t){return(n,a)=>{const c=a(),r=se(c,e),o=new Set([...r,...t]);n(la(e,{selectedNodes:[...o]})),n(ca())}}function ua(e,t){return la(e,{hoveredNodes:t})}function da(e,t){return(n,a)=>{n(la(e,{selectedEdges:t}))}}const fa=e=>({type:"QUEUE_SNACKBAR",payload:{text:e}});function ma(e){return function(t){console.error(`${e}`)}}function pa(e){return function(t){return{type:"SET_DIALOG",payload:{dialogId:e,data:t}}}}const Ea=pa("rename"),ba=pa("delete");function ya(e,t,n){const a=C.getState();return{type:"SET_PANEL",payload:{projectId:B(a),type:e,panelId:t,data:n}}}function ga(e,t,n){return{type:"SET_PANELS",payload:{projectId:e,type:t,data:n}}}const ha=(e,t)=>ya(e,t,{hidden:!0}),va=(e,t)=>ya(e,t,{hidden:!1}),ja=(e,t)=>ya(e,t,{saved:!0}),Oa=(e,t)=>ya(e,t,{saved:!1}),ka=(e,t)=>ya(e,t,{selected:!0}),wa=(e,t)=>ya(e,t,{selected:!1});function Ia(e,t){const n=C.getState();return{type:"REFRESH_PANELS",payload:{projectId:B(n),type:e,func:t}}}function Sa(e){return{label:e,saved:!1,hidden:!0,selected:!1}}const xa=e=>({type:"ADD_PROJECT",payload:{projectId:e}}),Ca=(e,t)=>({type:"SET_PROJECT_DATA",payload:{projectId:e,data:t}}),Ta=()=>({type:"DEL_PROJECTS"});function Da(e){return t=>{if(e){const n=C.getState(),{name:a}=Q(n,e);t(F(a||e))}else t(F(void 0));t({type:"SEL_PROJECT",payload:{projectId:e}})}}function Pa(e){return t=>{0===e.length&&t(fa("No files dropped"));for(const n of e)t(Ra(n))}}function Ra(e){return t=>{const n=new FileReader;n.onload=()=>{try{const a=JSON.parse(n.result),c=/(?:(.*)(?=\.))?\.?(.*)/,r=e.name.match(c);if(r){const[e,n,c]=r;let o;o=n||c,t(function(e,t){return n=>{n(xa(e)),n(Ca(e,t)),n(_a(e,"done")),n(Ua(e,"local")),n($a(e))}}(o,a))}}catch(n){const{name:a,message:c}=n;switch(n.constructor){case SyntaxError:t(fa(`Import failed: ${e.name} is not valid JSON`));break;default:t(fa(`${a}: ${c}`))}}},n.readAsText(e)}}function Aa(e){return async function(t){switch(await t(Ja(e)),ee(C.getState(),e)){case"process":t(fa("Project still processing"));break;default:{const t=C.getState(),n=Q(t,e),a={};for(const[e,t]of Object.entries(n))["analysis","status","analysisInput","analysisOutput","processed"].includes(e)&&(a[e]=t);const c=JSON.stringify(a,null,2),r=new Blob([c],{type:"application/json"}),o=URL.createObjectURL(r),s=`aam-vis-${e}.json`,l=document.createElement("a");Object.assign(l,{href:o,download:s}),document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(o);break}}}}function $a(e){return function(t){t(aa(e))}}const Na=(e,t)=>({type:"SET_METADATA",payload:{projectId:e,data:t}}),_a=(e,t)=>({type:"SET_STATUS",payload:{projectId:e,data:t}});function Ua(e,t){return n=>{n(_a(e,{client:t}))}}function La(e,t){const n=C.getState(),a=G(n);return fetch(`/api/${a}/${e}`,{method:t})}function za(e,t){const n=C.getState(),a=G(n);return fetch(`/api/${a}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function Ma(e,t,n){return async function(a){switch((await za(`projects/${e}/save`,t)).status){case 202:await n();break;default:a(fa(`Project ${e} save request failed`))}}}async function Fa(e,t,n){const a=C.getState();let c;switch(ne(a,e)){case"local":c=await t();break;default:c=await n(t)}return c}function Ha(e,t){return function(n){n(ma(`server api ${e}: local project ${t}`))}}function Ga(){return async function(e){const t=await La("create","POST");let n;switch(t.status){case 200:n=(await t.json()).id,e(xa(n)),e(Da(void 0));break;default:e(fa("Project create request failed"))}return n}}function Ba(e){return async function(t){await Fa(e,(async function(){const n=C.getState(),{analysisInput:a,analysis:c}=Q(n,e),r=await t(Ga());t(Ca(r,{analysisInput:a,analysis:c})),t(Da(r))}),(async function(n){switch(ee(C.getState(),e)){case"empty":break;default:await t(qa(e))}await n()}))}}function Ja(e){return async function(t){return await Fa(e,(async function(){}),(async function(n){const a=C.getState();let c=!1;switch(ne(a,e)){case"downloaded":break;default:c=await async function(){const n=ee(C.getState(),e);let a=!1;switch(n){case"empty":break;case"edit":t(qa(e));break;case"process":{await t(Xa(e));const n=ee(C.getState(),e);a="process"===n;break}case"done":await t(Xa(e)),t($a(e));break;case"error":await t(Xa(e));break;default:t(ma(`server api downloadProject() request: unhandled ${e} '${n}' status`))}return a}()}return c}))}}function qa(e){return async function(t){await Fa(e,(async function(){t(Ha("getAnalysisInput()",e))}),(async function(n){const a=await La(`projects/${e}/code`,"GET"),{analysisInput:c}=await a.json();t(Ca(e,{analysisInput:c})),t(Ua(e,"downloaded"))}))}}function Wa(e,t){return async function(n){await Fa(e,(async function(){const a=C.getState(),{status:c}=Q(a,e);switch(c){case"empty":case"edit":{let a="edit";t||(a="empty"),n(Ca(e,{status:a,analysisInput:t}));break}default:n(ma(`server api saveAnalysisInput() request: '${c}' status project ${e}`))}}),(async function(a){t?await n(Ma(e,{analysisInput:t},a)):await n(function(e,t,n){return async function(a){switch((await za(`projects/${e}/clear`,t)).status){case 200:await n();break;default:a(fa(`Project ${e} clear request failed`))}}}(e,{analysisInput:!0},a))}))}}function Xa(e){return async function(t){await Fa(e,(async function(){t(Ha("getData()",e))}),(async function(n){const a=await La(`projects/${e}/data`,"GET");switch(a.status){case 200:const n=await a.json(),c={...n,...na(n)};t(Ca(e,c)),t(Ua(e,"downloaded"));break;case 204:break;case 412:t(fa("Project data request rejected"))}}))}}const Va=Object(D.a)(e=>({deleteButton:{color:e.palette.warning.main}}));var Ka=function(){const[e,t]=Object(o.useState)(""),n=Object(u.d)(ke),a=Object(u.d)(e=>{let t;return n&&(t=Y(e,n)),t}),c=Object(u.c)(),r=Va();function l(){t(""),c(ba(void 0))}let i,d;"unnamed"===a?(d="last four digits of project id",i=n.slice(-4)):(d="project name",i=a);const f=e===i;return s.a.createElement(A.a,{open:Boolean(n),onClose:l},s.a.createElement($.a,null,"Delete project?"),s.a.createElement(N.a,null,s.a.createElement(_.a,null,"Are you sure you want to permanently delete the project '",a,"' (",n,")?"),s.a.createElement(U.a,{label:d,value:e,onChange:e=>t(e.target.value),error:!f&&""!==e,fullWidth:!0})),s.a.createElement(L.a,null,s.a.createElement(z.a,{onClick:l},"cancel"),s.a.createElement(z.a,{classes:{root:r.deleteButton},onClick:()=>{l(),c(function(e){return async function(t){await Fa(e,(async function(){t((e=>({type:"DEL_PROJECT",payload:{projectId:e}}))(e))}),(async function(n){switch((await La(`projects/${e}/delete`,"POST")).status){case 205:await n();break;default:t(fa(`Project ${e} delete request failed`))}}))}}(n))},disabled:!f},"delete")))};var Qa=function(){const e=Object(u.d)(Oe),t=Object(u.d)(t=>Q(t,e)),n=Object(u.c)(),a=t?t.name:"",[c,r]=Object(o.useState)(void 0);function l(){n(Ea(void 0))}return Object(o.useEffect)(()=>r(a||""),[a]),s.a.createElement(A.a,{open:Boolean(e),onClose:l},s.a.createElement(N.a,null,s.a.createElement(U.a,{label:"name",value:c,onChange:e=>r(e.target.value),placeholder:`project ${e} name`})),s.a.createElement(L.a,null,s.a.createElement(z.a,{onClick:l},"cancel"),s.a.createElement(z.a,{onClick:()=>{l(),n(function(e,t){return async function(n){await Fa(e,(async function(){n(Ca(e,{name:t}))}),(async function(a){await n(Ma(e,{name:t},a))}))}}(e,c))}},"rename")))},Ya=n("bXiM");const Za=Object(D.a)(e=>({appbar:{zIndex:e.zIndex.drawer+1}}));var ec=function(){const e=Object(u.d)(J),t=Object(u.d)(q),n=Object(u.d)(B),a=Object(u.c)(),c=Za();let r,l;switch(e){case"list":r=s.a.createElement(tc,null),l=s.a.createElement(o.Fragment,null,s.a.createElement(ac,null),s.a.createElement(cc,{content:"new project",onClick:()=>a(Ga())}),s.a.createElement(nc,null));break;case"project":r=s.a.createElement(tc,null),l=s.a.createElement(o.Fragment,null,s.a.createElement(cc,{content:"fork project",onClick:()=>a(Ba(n))}),s.a.createElement(cc,{content:"export project",onClick:()=>a(Aa(n))}),s.a.createElement(nc,null))}return s.a.createElement(Ya.a,{position:"static",className:c.appbar},s.a.createElement(St.a,null,r,s.a.createElement(T.a,{variant:"h6",color:"inherit",style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"}},t),l))};function tc(){const e=Object(u.c)();return s.a.createElement(cc,{content:"project list",onClick:()=>e(Da(void 0))})}function nc(){const e=Object(u.c)();return s.a.createElement(cc,{content:"logout",onClick:t=>e(e=>{e(M(void 0)),e(Da(void 0)),e(Ta())})})}function ac(){const e=Object(o.useRef)(void 0),t=Object(u.c)();return s.a.createElement(o.Fragment,null,s.a.createElement(cc,{content:"import",onClick:()=>e.current.click()}),s.a.createElement("input",{ref:e,onInput:()=>t(Pa(e.current.files)),type:"file",hidden:!0}))}function cc(e){const{content:t,theme:n,onClick:a}=e;return s.a.createElement(z.a,{onClick:a,color:"inherit",variant:"outlined",style:{margin:n.spacing(1)}},t)}cc=Object(R.a)(cc);var rc=function(){const e=Object(u.c)(),[t,n]=Object(o.useState)("guest"),a=!/^\w+$/.test(t);return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center"}},s.a.createElement(U.a,{label:"username",value:t,onChange:e=>n(e.target.value),error:a,helperText:"You can use letters, numbers, & underscores"}),s.a.createElement(z.a,{onClick:()=>{return e((n=t,e=>{e(M(n))}));var n},disabled:a},"login"))},oc=n("eD//"),sc=n("+Isj"),lc=n("9NXQ");const ic=Object(D.a)(e=>({backdrop:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:e.palette.background.overlay,color:e.palette.secondary.main,zIndex:e.zIndex.tooltip}}));function uc(e){const{open:t}=e,n=ic();return s.a.createElement(sc.a,{open:t,classes:{root:n.backdrop}},s.a.createElement(lc.a,null),s.a.createElement(T.a,null,"Drop files here to import"))}var dc=function(e){const{children:t}=e,[n,a]=Object(o.useState)(!1),c=Object(o.useRef)(0),r=Object(u.c)();function l(){a(0!==c.current)}return s.a.createElement("div",{onDragEnter:e=>{e.preventDefault(),c.current+=1,l()},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},onDragLeave:e=>{c.current-=1,l()},onDrop:e=>{e.preventDefault(),c.current=0,l(),r(Pa(e.dataTransfer.files))},style:{position:"relative",flex:"1 1 auto",overflow:"hidden"}},s.a.createElement(uc,{open:n}),t)},fc=n("TjOe"),mc=n("tVbE"),pc=n("IsqK"),Ec=n("y7u+"),bc=n("DACN"),yc=n("56Ss"),gc=n("jIra"),hc=n("7bgf"),vc=n("CqGl");const jc=Object(D.a)(e=>({icon:{color:e.palette.text.secondary},tooltip:{textTransform:"capitalize"}}));var Oc=function(e){const{projectId:t}=e,n=Object(u.d)(e=>ne(e,t)),a=jc();let c;switch(n){case"local":c=s.a.createElement(gc.a,{classes:{root:a.icon}});break;case"downloaded":c=s.a.createElement(hc.a,{classes:{root:a.icon}});break;case"waiting":c=s.a.createElement(vc.a,{classes:{root:a.icon}});break;default:c=n}return s.a.createElement(yc.a,null,s.a.createElement(qe.a,{title:n,classes:{tooltip:a.tooltip}},c))},kc=n("BThs"),wc=n("kvP6"),Ic=n("Ieyj"),Sc=n("fD73");const xc=Object(D.a)(e=>({success:{color:e.palette.success.main},tooltip:{textTransform:"capitalize"}}));var Cc=function(e){const{projectId:t}=e,n=Object(u.d)(e=>ee(e,t)),a=xc();let c;switch(n){case"empty":c=s.a.createElement(kc.a,{color:"disabled"});break;case"edit":c=s.a.createElement(wc.a,{color:"primary"});break;case"process":c=s.a.createElement(st.a,{size:20,thickness:6});break;case"done":c=s.a.createElement(Ic.a,{classes:{root:a.success}});break;case"error":c=s.a.createElement(Sc.a,{color:"error"});break;default:c=n}return s.a.createElement(yc.a,null,s.a.createElement(qe.a,{title:n,classes:{tooltip:a.tooltip}},c))};const Tc=Object(D.a)(e=>({disabled:{color:e.palette.text.disabled}}));function Dc(e){const{value:t,defaultValue:n,style:a={flex:"0 0 10em"}}=e,c=Tc(),r=t||n,o=t?void 0:c.disabled;return s.a.createElement(pc.a,{classes:{root:o},style:{...a,overflow:"hidden",textOverflow:"ellipsis"}},r)}function Pc(e){const{projectId:t}=e,n=Object(u.d)(e=>ne(e,t)),a=Object(u.c)();let c;switch(n){case"local":c=s.a.createElement(Ye,{icon:s.a.createElement(tn.a,null),size:"medium",tooltip:"Remove",onClick:()=>a(ba(t))});break;default:c=s.a.createElement(Rc,{projectId:t})}return c}function Rc(e){const{projectId:t}=e,n=Object(u.d)(e=>ee(e,t)),a=Object(u.c)();let c;switch(n){case"process":c=s.a.createElement(Ye,{icon:s.a.createElement(bc.a,null),size:"medium",tooltip:"Cancel processing",onClick:()=>a(function(e){return async function(t){await Fa(e,(async function(){t(Ha("cancelProcess()",e))}),(async function(n){switch((await La(`projects/${e}/cancel`,"POST")).status){case 200:t(Ca(e,{status:"edit"})),t(Ua(e,"downloaded"));break;case 409:t(fa(`Project ${e} cancel request denied - already finished`))}}))}}(t))});break;default:c=s.a.createElement(Ye,{icon:s.a.createElement(tn.a,null),size:"medium",tooltip:"Delete",onClick:()=>a(ba(t))})}return c}var Ac=function(e){const{projectId:t}=e,{analysis:n,name:a}=Object(u.d)(e=>Q(e,t)),c=Object(u.c)(),r=s.a.createElement(fc.a,null,s.a.createElement(Fe,{items:[{label:"Rename",callback:()=>c(Ea(t))},{label:"Export",callback:()=>c(Aa(t))}]}),s.a.createElement(Ye,{icon:s.a.createElement(Ec.a,null),size:"medium",tooltip:"Fork",onClick:()=>c(Ba(t))}),s.a.createElement(Pc,{projectId:t}));return s.a.createElement(mc.a,{button:!0,key:t,onClick:()=>c(Da(t)),align:"flex-start",style:{paddingRight:160}},s.a.createElement(Dc,{value:n,defaultValue:"n/a"}),s.a.createElement(Dc,{value:a,defaultValue:"unnamed",style:{flex:"1 0 auto"}}),s.a.createElement(Dc,{value:t}),s.a.createElement(Cc,{projectId:t}),s.a.createElement(Oc,{projectId:t}),r)};var $c=function(){const e=Object(u.d)(K),t=Object(u.c)(),n=Object(o.useRef)(void 0);async function a(){await t((async function(e){const t=await La("all","GET");let n=!1;switch(t.status){case 200:const a=await t.json();for(const[t,c]of Object.entries(a)){const{status:a,name:r,analysis:o}=c;e(Ca(t,{status:a,name:r,analysis:o})),"process"===a&&(n=!0)}break;default:n=!0}return n}))&&(n.current=setTimeout(a,1e3))}Object(o.useEffect)(()=>(a(),()=>{clearTimeout(n.current)}),[]);const c=e.map(e=>s.a.createElement(Ac,{key:e,projectId:e}));return s.a.createElement(dc,null,s.a.createElement(oc.a,{style:{height:"100%",overflowY:"auto"}},c))},Nc=n("1AYd"),_c=n("cVXz"),Uc=n("VrN/"),Lc=n.n(Uc);n("8wdy"),n("rcDq");function zc(e){const{onClick:t}=e;return s.a.createElement(z.a,{onClick:t,variant:"contained",color:"secondary"},"process")}var Mc=function(e){const{edit:t=!0,error:n}=e,a=["0-cfa","1-cfa","2-cfa"],c=Object(o.useRef)(void 0),r={lineWrapping:!0,lineNumbers:!0,readOnly:!t},l=Object(o.useRef)(Lc.a),[i,d]=Object(o.useState)({analysis:a[0]}),f=Object(u.d)(B),{analysisInput:m="",error:p}=Object(u.d)(Q),E=Object(u.c)();function b(){return l.current.getDoc().getValue()}let y,g;if(Object(o.useEffect)(()=>(l.current=Lc.a.fromTextArea(c.current,r),()=>{l.current.toTextArea(),E(function(e,t){return function(n,a){switch(ee(a(),e)){case"empty":case"edit":n(Wa(e,""===t?void 0:t))}}}(f,b()))}),[]),Object(o.useEffect)(()=>{var e;e=m,l.current.getDoc().setValue(e)},[m]),t){y=s.a.createElement(T.a,null,"Input code for analysis");const e=a.map(e=>s.a.createElement(Le.a,{key:e,value:e},e));g=s.a.createElement(St.a,null,s.a.createElement("div",{style:{flex:"1 1 auto"}},s.a.createElement(Nc.a,null,"Analysis"),s.a.createElement(_c.a,{value:i.analysis,onChange:e=>{const t=e.target.value;d({...i,analysis:t})}},e)),s.a.createElement(zc,{onClick:function(){E(function(e,t,n){return async function(a){await Fa(e,(async function(){a(Ha("processAnalysisInput()",e))}),(async function(c){switch(await a(Wa(e,t)),(await za(`projects/${e}/process`,n)).status){case 200:a(Ca(e,{status:"process"})),a(Ua(e,"waiting"));break;case 412:a(fa("Project process request rejected"))}}))}}(f,b(),i))}}))}else n&&(y=s.a.createElement(o.Fragment,null,s.a.createElement(T.a,{variant:"h3"},"Analysis error"),s.a.createElement(T.a,null,p)));return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"auto"}},y,s.a.createElement("textarea",{ref:e=>c.current=e,style:{flex:"1 1 auto",overflow:"auto",height:"100%"}}),g)};var Fc=function(){const e=Object(u.d)(Z),{debug:t}=e,[n,a]=Object(o.useState)(!1);if(!t)return null;const c=n?"primary":"inherit";return s.a.createElement(o.Fragment,null,s.a.createElement(Ye,{icon:s.a.createElement(Be.a,{color:c}),tooltip:"Show debug",onClick:()=>a(!n)}),s.a.createElement(gt,{open:n},s.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",margin:"1em"}},s.a.createElement(Ge,{item:e}))))},Hc=n("dXLW");var Gc=function(){const e=Object(u.d)(ce),[t,n]=Object(o.useState)(e[0]),[a,c]=Object(o.useState)(!1),r=a?"primary":"inherit",l=e.map(e=>s.a.createElement(Le.a,{key:e,value:e},e));return s.a.createElement(o.Fragment,null,s.a.createElement(Ye,{icon:s.a.createElement(Hc.a,{color:r}),tooltip:"Show graph",onClick:()=>c(!a)}),s.a.createElement(gt,{open:a},s.a.createElement(ut,null,s.a.createElement(_c.a,{value:t,onChange:e=>n(e.target.value)},l),s.a.createElement(qt,{graphId:t,external:!0}))))},Bc=Object(o.createContext)(void 0),Jc=n("rwtN");function qc(e){const{lineId:t,chId:n,theme:a}=e,{ast:c}=Object(u.d)(Z),r=Object(u.d)(Ie),l=Object(u.d)(Se),{astNodes:i,code:d,onHover:f,onClick:m}=Object(o.useContext)(Bc),p=d[t][n],E=[parseInt(t),parseInt(n)],b=[parseInt(t),parseInt(n)+p.length];let y;for(const e of Object.keys(i))j(e,E,b)&&(y?g(c[e],c[y])<0&&(y=e):y=e);function g(e,t){const{start:n,end:a}=e,{start:c,end:r}=t,o=h(n,a),s=h(c,r);if(o<s)return-1;if(o>s)return 1;{const e=v(n,a),t=v(c,r);return e<t?-1:e>t?1:0}}function h(e,t){return t[0]-e[0]}function v(e,t){return t[1]-e[1]}function j(e,t,n){const{start:a,end:r}=c[e],o=O(a,t)<=0,s=O(n,r)<=0;return o&&s}function O(e,t){const[n,a]=e,[c,r]=t;return n<c?-1:n>c?1:a<r?-1:a>r?1:0}const k=p.match(/lambda|let|if|\#t|\#f/),w=l.find(e=>j(e,E,b)),I=r.find(e=>j(e,E,b));let S=p;return w?S=s.a.createElement(Wc,{content:p,color:a.palette.hover.light}):I&&(S=s.a.createElement(Wc,{content:p,color:a.palette.select.light})),s.a.createElement(Wc,{key:n,content:S,textColor:k?Jc.a[800]:void 0,onMouseOver:()=>f(y),onClick:()=>m(y),style:{cursor:"pointer"}})}function Wc(e){const{content:t,color:n,textColor:a,style:c,onClick:r,onMouseOver:o}=e;return s.a.createElement("span",{onMouseOver:o,onClick:r,style:{display:"inline-block",backgroundColor:n||"inherit",color:a||"inherit",...c}},t)}var Xc=qc=Object(R.a)(qc);function Vc(e){const{lineId:t,lastLine:n,width:a,theme:c,onSet:r}=e;return s.a.createElement("div",{style:{display:"inline-block",width:a,fontFamily:"Roboto Mono, Courier New, Courier, monospace",backgroundColor:c.palette.grey[200],textAlign:"right",padding:"0 5px"}},s.a.createElement(T.a,{variant:"body2",ref:function(e){if(e&&n){const t=e.getBoundingClientRect().width;a!==t&&r(t)}},color:"textSecondary"},parseInt(t)+1))}Vc=Object(R.a)(Vc);var Kc=function(e){const{lineId:t}=e,{code:n,onUnhover:a,gutterWidth:c,setGutterWidth:r}=Object(o.useContext)(Bc),l=n[t],i=Object.keys(l).map(e=>s.a.createElement(Xc,{key:e,lineId:t,chId:e}));return s.a.createElement("div",{key:t},s.a.createElement(Vc,{lineId:t,lastLine:t==Object.keys(n).length-1,width:c,onSet:r}),s.a.createElement(T.a,{onMouseLeave:()=>a(),variant:"body2",style:{display:"inline-block",verticalAlign:"bottom",fontFamily:'Roboto Mono, "Courier New", Courier, monospace'}},i))};const Qc=Object(H.a)(e=>e,me,(e,t)=>{const n={};for(const a of Object.keys(t)){const t=be(e,a),c=Re(e,a);n[a]={nodeIds:t,refData:c}}return n});var Yc=function(){const{analysisInput:e}=Object(u.d)(Q),t=Object(u.d)(Qc),n=Object(u.c)(),[a,c]=Object(o.useState)({}),[r,l]=Object(o.useState)({}),[i,d]=Object(o.useState)("auto");function f(){Object(u.b)(()=>{for(const e of Object.keys(t))n(ua(e,void 0))})}Object(o.useEffect)(()=>{const e={};for(const[n,a]of Object.entries(t)){const{nodeIds:t,refData:c}=a;for(const a of t){const t=xe([a],c);for(const c of t)e[c]?e[c][n]?e[c][n].push(a):e[c][n]=[a]:e[c]={[n]:[a]}}}c(e)},[t]),Object(o.useEffect)(()=>{const t={};e.split(/\r\n|\n/).forEach((e,n)=>{let a=0;const c={};e.match(/\(|\)|\[|\]|[^\s\(\)\[\]]+|\s+/g).forEach(e=>{c[a]=e,a+=e.length}),t[n]=c}),l(t)},[e]);const m=Object.keys(r).map(e=>s.a.createElement(Kc,{key:e,lineId:e}));return s.a.createElement(Bc.Provider,{value:{astNodes:a,code:r,onHover:function(e){f(),e&&a[e]&&Object(u.b)(()=>{for(const[t,c]of Object.entries(a[e]))n(ua(t,c))})},onUnhover:f,onClick:function(e){const t=a[e],c=Object.keys(t).filter(e=>"funcs"!==e);if(c.length>0){const e=c[0],a=t[e];n(ia(e,a))}},gutterWidth:i,setGutterWidth:d}},s.a.createElement("div",{style:{whiteSpace:"pre"}},m))},Zc=n("jVK8"),er=n("aXM8");function tr(e){const{graphId:t}=e,n=Object(u.d)(e=>De(e,t)),a=Object(u.c)();return void 0===n?null:s.a.createElement(nt,{icon:s.a.createElement(Zc.a,null),tooltip:"bubbling",enabled:n,onToggle:()=>a(function(e){const t=C.getState();return la(e,{bubbled:!De(t,e)})}(t)),style:{padding:0}})}var nr=function(e){const{graphId:t}=e,n=Object(er.a)();return s.a.createElement(St.a,{variant:"dense",style:{backgroundColor:n.palette.grey[300],color:n.palette.text.primary,minHeight:"unset"}},s.a.createElement(Tt,{childrenStyle:{marginRight:"1em"},noDiv:!0},s.a.createElement(T.a,null,t),s.a.createElement(tr,{graphId:t})))};var ar=function(){const e=Object(u.d)(Ne),t=Object(u.d)(Ue),n=Object(u.d)(t=>Pe(t,e)),a=Object(u.d)(e=>Pe(e,t)),c=Object(u.c)();function r(){return function(e,n){const a=n(),{graph:c}=ye(a,t),r=Ne(a),o=le(a,t),s=new Set;for(const e of o){const[t,n]=e.split("-"),a=c[t][n],{calls:r}=a;if(r)for(const e of r)s.add(e)}var l,i;e((l=r,i=[...s],la(l,{suggestedNodes:i})))}}return s.a.createElement(Rt,{horizontal:!0},s.a.createElement(ut,{height:"50%"},s.a.createElement(nr,{graphId:e}),s.a.createElement(qt,{graphId:n})),s.a.createElement(ut,{height:"50%"},s.a.createElement(nr,{graphId:t}),s.a.createElement(qt,{graphId:a,edgePredicate:e=>{const t=e.data("style");return!!t&&"dashed"===t["line-style"]},onEdgeSelect:()=>c(r()),onEdgeUnselect:()=>c(r())})))};var cr=function(){return s.a.createElement(ut,null,s.a.createElement(ft,null,s.a.createElement(Rt,{vertical:!0},s.a.createElement(ut,{width:"40%"},s.a.createElement(ar,null)),s.a.createElement(ut,null,s.a.createElement(Rt,{horizontal:!0},s.a.createElement(ut,{height:"48%"},s.a.createElement(Rt,{vertical:!0},s.a.createElement(ut,{width:"48%",overflow:"auto"},s.a.createElement(Yc,null)),s.a.createElement(ut,null,s.a.createElement(In,null)))),s.a.createElement(ut,{overflow:"auto"},s.a.createElement(Rt,null,s.a.createElement(ut,{width:"50%",overflow:"auto"},s.a.createElement(Fn,null)),s.a.createElement(ut,{overflow:"auto"},s.a.createElement(Nn,null)))))))),s.a.createElement(bt,null,s.a.createElement(Gc,null),s.a.createElement(Fc,null)))};const rr=p(r,"EditorLayout"),or=p(r,"ProjectLayout");function sr(){let e;switch(Object(u.d)(ne)){case"downloaded":case"local":e=s.a.createElement(or,null);break;default:e=s.a.createElement(it,{status:"Downloading"})}return e}var lr=function(){const e=Object(u.d)(B),t=Object(u.d)(ee),n=Object(u.c)(),a=Object(o.useRef)(void 0);async function c(){await n(Ja(e))&&(a.current=setTimeout(c,1e3))}let r;switch(Object(o.useEffect)(()=>(c(),()=>{clearTimeout(a.current)}),[]),Object(o.useEffect)(()=>{switch(t){case"process":case"done":c()}},[t]),t){case"empty":case"edit":r=s.a.createElement(rr,null);break;case"process":r=s.a.createElement(it,{status:"Processing"});break;case"done":r=s.a.createElement(sr,null);break;case"error":r=s.a.createElement(Editor,{error:!0})}return r},ir=n("viY9"),ur=n("edxh"),dr=n("UuMD"),fr=n("An1w"),mr=n("Rp/f");const pr=function(e,t,n){let a=e[t];return a||(a={}),a}(n("Ac2X"),"theme");var Er=Object(ir.a)({mixins:{message:{minHeight:24}},palette:{secondary:{light:ur.a[300],main:ur.a[500],dark:ur.a[700]},select:{light:ur.a[100],main:ur.a[400]},hover:{light:dr.a[100],main:dr.a[400]},suggest:{main:fr.a[400],dark:fr.a[700]},warn:{main:mr.a.A700,contrastText:"#fff"},background:{overlay:"rgba(255, 255, 255, 0.5)"}}},pr),br=n("79Xs"),yr=n("n0zQ");var gr=function(){const e=Object(u.d)(ve),t=Object(u.c)(),[n,a]=Object(o.useState)(void 0);function c(){clearTimeout(n),t({type:"DEQUEUE_SNACKBAR"})}return Object(o.useEffect)(()=>{e&&a(setTimeout(()=>{c()},2e4))},[e]),s.a.createElement(br.a,{open:Boolean(e),onClose:function(e,t){"clickaway"!==t&&c()},action:[s.a.createElement(We.a,{key:"close",onClick:c,color:"inherit"},s.a.createElement(yr.a,null))],autoHideDuration:2e4,message:e,anchorOrigin:{horizontal:"left",vertical:"bottom"}})};const hr=Object(D.a)(e=>({message:{zIndex:e.zIndex.drawer+1}}));var vr=function(){const e=Object(u.d)(J),t=Object(u.d)(X);let n;switch(e){case"login":n=s.a.createElement(rc,null);break;case"list":n=s.a.createElement($c,null);break;case"project":n=s.a.createElement(lr,null)}return s.a.createElement(P.a,{theme:Er},s.a.createElement(jr,null),s.a.createElement("div",{onDragEnter:e=>e.preventDefault(),onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="none"},onDrop:e=>e.preventDefault(),style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}},t&&s.a.createElement(Or,{content:"Development Server"}),s.a.createElement(ec,null),n,s.a.createElement(gr,null),s.a.createElement(Ka,null),s.a.createElement(Qa,null)))};function jr(){return s.a.createElement("div",{style:{display:"flex",height:"100%",width:"100%",position:"fixed",justifyContent:"flex-end",alignItems:"flex-end",pointerEvents:"none",zIndex:-1}},s.a.createElement(T.a,{variant:"caption",color:"textSecondary",style:{padding:5}},"0.4.0"))}function Or(e){const{content:t,theme:n}=e,a=hr();return s.a.createElement(T.a,{style:{display:"flex",justifyContent:"center",backgroundColor:n.palette.warn.main,color:n.palette.warn.contrastText},className:a.message},t)}Or=Object(R.a)(Or);n("qFG1");i.a.render(s.a.createElement(u.a,{store:C},s.a.createElement(vr,null)),document.getElementById("app"))},qFG1:function(e,t,n){var a=n("LboF"),c=n("7QqU");"string"==typeof(c=c.__esModule?c.default:c)&&(c=[[e.i,c,""]]);var r={insert:"head",singleton:!1},o=(a(c,r),c.locals?c.locals:{});e.exports=o},rcDq:function(e,t,n){var a=n("LboF"),c=n("+lx+");"string"==typeof(c=c.__esModule?c.default:c)&&(c=[[e.i,c,""]]);var r={insert:"head",singleton:!1},o=(a(c,r),c.locals?c.locals:{});e.exports=o}},[["dJRW",1,2,7,9,6,10,5,4,3,11,8]]]);